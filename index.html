<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Paradox Simulators</title>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #f59e0b;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #e2e8f0;
            --muted: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 3rem 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        nav {
            background: var(--card);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
        }

        nav a {
            color: var(--text);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            background: var(--bg);
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        nav a:hover {
            background: var(--primary);
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        section {
            margin-bottom: 3rem;
        }

        .category-title {
            font-size: 1.5rem;
            color: var(--accent);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent);
        }

        .paradox-card {
            background: var(--card);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .paradox-card h3 {
            color: var(--primary);
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .paradox-card .points {
            background: var(--accent);
            color: var(--bg);
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
        }

        .paradox-card .description {
            color: var(--muted);
            margin-bottom: 1rem;
        }

        .simulator {
            background: var(--bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .simulator h4 {
            color: var(--secondary);
            margin-bottom: 1rem;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .control-group label {
            font-size: 0.875rem;
            color: var(--muted);
        }

        input[type="range"] {
            width: 150px;
            accent-color: var(--primary);
        }

        input[type="number"] {
            width: 100px;
            padding: 0.5rem;
            border: 1px solid var(--muted);
            border-radius: 0.25rem;
            background: var(--card);
            color: var(--text);
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        button:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        .result {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid var(--primary);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        .visualization {
            margin-top: 1rem;
            min-height: 150px;
            position: relative;
        }

        canvas {
            width: 100%;
            border-radius: 0.5rem;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            gap: 0.5rem;
            height: 200px;
            padding: 1rem;
        }

        .bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }

        .bar {
            width: 100%;
            background: var(--primary);
            border-radius: 0.25rem 0.25rem 0 0;
            transition: height 0.5s ease;
            min-height: 5px;
        }

        .bar.second {
            background: var(--secondary);
        }

        .bar-label {
            font-size: 0.75rem;
            color: var(--muted);
            margin-top: 0.5rem;
            text-align: center;
        }

        .insight {
            background: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--accent);
            padding: 1rem;
            margin-top: 1rem;
            font-style: italic;
        }

        /* Network visualization styles */
        .network-container {
            position: relative;
            height: 300px;
            border: 1px solid var(--muted);
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .node {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .edge {
            position: absolute;
            background: var(--muted);
            height: 2px;
            transform-origin: left center;
            pointer-events: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-box {
            background: var(--card);
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }

        .stat-label {
            font-size: 0.875rem;
            color: var(--muted);
        }

        @media (max-width: 768px) {
            header {
                padding: 1.5rem 1rem;
            }

            header h1 {
                font-size: 1.5rem;
            }

            header p {
                font-size: 0.875rem;
            }

            nav {
                position: sticky;
                top: 0;
                padding: 0.4rem;
                gap: 0.2rem;
                flex-wrap: nowrap;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                justify-content: flex-start;
            }

            nav::-webkit-scrollbar {
                display: none;
            }

            nav a {
                font-size: 0.7rem;
                padding: 0.3rem 0.5rem;
                flex-shrink: 0;
            }

            main {
                padding: 0.25rem;
            }

            .category-title {
                font-size: 1.25rem;
            }

            .paradox-card {
                padding: 0.5rem;
                margin-bottom: 0.75rem;
                border-radius: 0.5rem;
            }

            .paradox-card h3 {
                font-size: 1rem;
                flex-wrap: wrap;
            }

            .paradox-card .description {
                font-size: 0.875rem;
            }

            .simulator {
                padding: 0.5rem;
            }

            .simulator h4 {
                font-size: 0.95rem;
            }

            .controls {
                flex-direction: column;
                gap: 0.75rem;
            }

            .controls button {
                width: 100%;
                padding: 0.875rem 1rem;
                font-size: 0.9rem;
            }

            .control-group {
                width: 100%;
            }

            input[type="range"] {
                width: 100%;
            }

            input[type="number"] {
                width: 100%;
                padding: 0.75rem;
                font-size: 1rem;
            }

            select {
                width: 100%;
                padding: 0.75rem;
                font-size: 1rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }

            .stat-box {
                padding: 0.35rem 0.2rem;
            }

            .stat-value {
                font-size: 1.1rem;
            }

            .stat-label {
                font-size: 0.7rem;
            }

            .result {
                padding: 0.4rem;
                font-size: 0.8rem;
            }

            .result-value {
                font-size: 1.5rem;
            }

            .insight {
                padding: 0.4rem;
                font-size: 0.75rem;
                border-left: none;
                border-top: 2px solid var(--accent);
            }

            .result {
                border-left: none;
                border-top: 1px solid var(--primary);
            }

            .network-container {
                height: 200px;
            }

            .bar-chart {
                height: 150px;
                padding: 0.5rem;
            }

            canvas {
                max-width: 100%;
                height: auto !important;
            }

            .sort-controls {
                flex-wrap: wrap;
                padding: 0.75rem;
                gap: 0.5rem;
            }

            .sort-controls button {
                padding: 0.5rem 0.75rem;
                font-size: 0.75rem;
            }

            .sort-controls select {
                padding: 0.4rem 0.6rem;
                font-size: 0.8rem;
            }

            /* Fix inline flex containers on mobile */
            [style*="display: flex"][style*="gap"] {
                flex-wrap: wrap !important;
            }

            /* Door/box game buttons */
            .controls > div[style*="display: flex"] {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
            header h1 {
                font-size: 1.25rem;
            }

            nav a {
                font-size: 0.65rem;
                padding: 0.25rem 0.5rem;
            }

            .paradox-card h3 {
                font-size: 0.95rem;
            }

            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }

            .stat-value {
                font-size: 1rem;
            }

            .stat-label {
                font-size: 0.65rem;
            }

            .controls button {
                font-size: 0.85rem;
                padding: 0.75rem;
            }
        }

        /* Sort Controls */
        .sort-controls {
            background: var(--card);
            padding: 1rem 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .sort-controls label {
            color: var(--muted);
            font-size: 0.875rem;
        }

        .sort-controls select {
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--muted);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .sort-controls select:hover {
            border-color: var(--primary);
        }

        .sort-controls button {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .sort-controls button.active {
            background: var(--accent);
        }

        /* All paradoxes view */
        #all-paradoxes {
            display: none;
        }

        #all-paradoxes.active {
            display: block;
        }

        .category-sections.hidden {
            display: none;
        }

        .points-badge {
            background: var(--accent);
            color: var(--bg);
            font-size: 0.875rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>Interactive Paradox Simulators</h1>
        <p>Explore mind-bending paradoxes through interactive simulations. Each paradox challenges our intuition about mathematics, physics, and reality.</p>
    </header>

    <nav>
        <a href="#mathematical">Mathematical</a>
        <a href="#physics">Physics</a>
        <a href="#social">Social</a>
        <a href="#technology">Technology</a>
        <a href="#scientific">Scientific</a>
        <a href="#probability">Probability</a>
        <a href="#infinity">Infinity</a>
        <a href="#advanced">Advanced</a>
        <a href="#behavior">Behavior</a>
        <a href="#economics">Economics</a>
        <a href="#philosophy">Philosophy</a>
        <a href="#decisions">Decisions</a>
        <a href="#quantum">Quantum</a>
        <a href="#logic">Logic</a>
        <a href="#morephysics">More Physics</a>
        <a href="#moretech">More Tech</a>
        <a href="#moresocial">More Social</a>
        <a href="#morelogic">More Logic</a>
        <a href="#moreeconomics">More Economics</a>
    </nav>

    <div class="sort-controls">
        <span id="paradox-count" style="color: var(--accent); font-weight: bold;">-- Paradoxes</span>
        <span style="color: var(--muted);">|</span>
        <label>View:</label>
        <button id="view-categories" class="active" onclick="showCategories()">By Category</button>
        <button id="view-points" onclick="showByPoints()">By Points</button>
        <select id="sort-order" onchange="updatePointsSort()" style="display: none;">
            <option value="desc">Highest First</option>
            <option value="asc">Lowest First</option>
        </select>
    </div>

    <main>
        <!-- MATHEMATICAL PARADOXES -->
        <section id="mathematical">
            <h2 class="category-title">Mathematical & Statistical Paradoxes</h2>

            <!-- Potato Paradox -->
            <div class="paradox-card">
                <h3>Potato Paradox <span class="points">559 pts</span></h3>
                <p class="description">100 lbs of potatoes that are 99% water. After drying to 98% water, they weigh only 50 lbs. A 1% change causes a 50% weight loss!</p>

                <div class="simulator">
                    <h4>Potato Dehydration Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Initial Weight (lbs)</label>
                            <input type="number" id="potato-weight" value="100" min="1" max="1000" oninput="calculatePotato()">
                        </div>
                        <div class="control-group">
                            <label>Initial Water %: <span id="potato-initial-val">99%</span></label>
                            <input type="range" id="potato-initial" min="80" max="99.9" step="0.1" value="99" oninput="calculatePotato()">
                        </div>
                        <div class="control-group">
                            <label>Final Water %: <span id="potato-final-val">98%</span></label>
                            <input type="range" id="potato-final" min="50" max="98.9" step="0.1" value="98" oninput="calculatePotato()">
                        </div>
                    </div>

                    <div class="potato-visualization">
                        <div class="potato-container">
                            <div class="potato-label">BEFORE</div>
                            <div class="potato-stack" id="potato-before-stack">
                                <div class="potato-water" id="potato-before-water"></div>
                                <div class="potato-solid" id="potato-before-solid"></div>
                            </div>
                            <div class="potato-weight" id="potato-before-weight">100 lbs</div>
                            <div class="potato-breakdown">
                                <span class="water-amount" id="potato-before-water-amt">99 lbs water</span>
                                <span class="solid-amount" id="potato-before-solid-amt">1 lb solid</span>
                            </div>
                        </div>

                        <div class="potato-arrow">
                            <div class="arrow-text">Evaporation</div>
                            <div class="arrow-icon">→</div>
                            <div class="water-lost" id="potato-water-lost">-49 lbs water</div>
                        </div>

                        <div class="potato-container">
                            <div class="potato-label">AFTER</div>
                            <div class="potato-stack" id="potato-after-stack">
                                <div class="potato-water" id="potato-after-water"></div>
                                <div class="potato-solid" id="potato-after-solid"></div>
                            </div>
                            <div class="potato-weight" id="potato-after-weight">50 lbs</div>
                            <div class="potato-breakdown">
                                <span class="water-amount" id="potato-after-water-amt">49 lbs water</span>
                                <span class="solid-amount" id="potato-after-solid-amt">1 lb solid</span>
                            </div>
                        </div>
                    </div>

                    <div class="result">
                        <p>Final Weight: <span class="result-value" id="potato-result">50 lbs</span></p>
                        <p>Water % change: <span id="potato-water-change" style="color: var(--accent);">-1%</span> → Weight change: <span id="potato-weight-change" style="color: #ef4444;">-50%</span></p>
                        <p id="potato-explanation">The solid matter (1 lb) stays constant. At 98% water, it must be 2% of total weight. So 1 = 0.02 × weight, meaning weight = 50 lbs.</p>
                    </div>

                    <div class="insight">
                        The paradox shows how percentages near 100% can be deceptive. The "dry matter" is the invariant that reveals the truth.
                    </div>
                </div>

                <style>
                    .potato-visualization {
                        display: flex;
                        justify-content: space-around;
                        align-items: center;
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        gap: 1rem;
                    }
                    .potato-container {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        flex: 1;
                    }
                    .potato-label {
                        font-weight: bold;
                        color: var(--muted);
                        margin-bottom: 0.5rem;
                        font-size: 0.875rem;
                    }
                    .potato-stack {
                        width: 120px;
                        height: 200px;
                        border: 3px solid var(--muted);
                        border-radius: 0.5rem;
                        display: flex;
                        flex-direction: column;
                        overflow: hidden;
                        position: relative;
                        background: var(--card);
                    }
                    .potato-water {
                        background: linear-gradient(180deg, #3b82f6, #1d4ed8);
                        transition: height 0.5s ease;
                    }
                    .potato-solid {
                        background: linear-gradient(180deg, #a16207, #78350f);
                        transition: height 0.5s ease;
                    }
                    .potato-weight {
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: var(--accent);
                        margin-top: 0.5rem;
                    }
                    .potato-breakdown {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        font-size: 0.75rem;
                        margin-top: 0.25rem;
                    }
                    .water-amount {
                        color: #3b82f6;
                    }
                    .solid-amount {
                        color: #a16207;
                    }
                    .potato-arrow {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        color: var(--muted);
                    }
                    .arrow-text {
                        font-size: 0.75rem;
                    }
                    .arrow-icon {
                        font-size: 2rem;
                        color: var(--primary);
                    }
                    .water-lost {
                        color: #3b82f6;
                        font-size: 0.875rem;
                        font-weight: bold;
                    }
                    @media (max-width: 600px) {
                        .potato-visualization {
                            flex-direction: column;
                        }
                        .potato-arrow {
                            transform: rotate(90deg);
                        }
                    }
                </style>
            </div>

            <!-- Simpson's Paradox -->
            <div class="paradox-card">
                <h3>Simpson's Paradox <span class="points">370 pts</span></h3>
                <p class="description">A trend appears in several groups but disappears or reverses when groups are combined. A treatment can look better in every subgroup but worse overall!</p>

                <div class="simulator">
                    <h4>Medical Treatment Simulator</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Compare success rates of Treatment A vs B across two patient groups</p>

                    <div class="controls">
                        <button onclick="runSimpson()">Generate Example</button>
                        <button onclick="resetSimpson()">Reset</button>
                    </div>

                    <div id="simpson-tables" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div class="stat-box">
                            <h5 style="color: var(--primary); margin-bottom: 0.5rem;">Group: Mild Cases</h5>
                            <p>Treatment A: <span id="simpson-mild-a">-</span></p>
                            <p>Treatment B: <span id="simpson-mild-b">-</span></p>
                            <p style="color: var(--accent);">Winner: <span id="simpson-mild-winner">-</span></p>
                        </div>
                        <div class="stat-box">
                            <h5 style="color: var(--secondary); margin-bottom: 0.5rem;">Group: Severe Cases</h5>
                            <p>Treatment A: <span id="simpson-severe-a">-</span></p>
                            <p>Treatment B: <span id="simpson-severe-b">-</span></p>
                            <p style="color: var(--accent);">Winner: <span id="simpson-severe-winner">-</span></p>
                        </div>
                        <div class="stat-box">
                            <h5 style="color: var(--accent); margin-bottom: 0.5rem;">Combined Data</h5>
                            <p>Treatment A: <span id="simpson-total-a">-</span></p>
                            <p>Treatment B: <span id="simpson-total-b">-</span></p>
                            <p style="color: var(--accent);">Winner: <span id="simpson-total-winner">-</span></p>
                        </div>
                    </div>

                    <div class="result" id="simpson-result" style="display: none;">
                        <p class="result-value" id="simpson-paradox-text">PARADOX DETECTED!</p>
                        <p id="simpson-explanation"></p>
                    </div>

                    <div class="insight">
                        This paradox is why we must be careful with aggregated statistics. The lurking variable (case severity) determines which treatment gets assigned to whom.
                    </div>
                </div>
            </div>

            <!-- St. Petersburg Paradox -->
            <div class="paradox-card">
                <h3>St. Petersburg Paradox <span class="points">144 pts</span></h3>
                <p class="description">A game with INFINITE expected value, yet no rational person would pay much to play. Flip coins until tails - win $2^n where n is the number of flips.</p>

                <div class="simulator">
                    <h4>St. Petersburg Casino</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Entry Fee ($)</label>
                            <input type="number" id="stpeter-fee" value="10" min="1" max="1000000">
                        </div>
                        <div class="control-group">
                            <label>Number of Games</label>
                            <input type="number" id="stpeter-games" value="100" min="1" max="10000">
                        </div>
                        <button onclick="playStPetersburg()">Play Games</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="stpeter-played">0</div>
                            <div class="stat-label">Games Played</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="stpeter-spent">$0</div>
                            <div class="stat-label">Total Spent</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="stpeter-won">$0</div>
                            <div class="stat-label">Total Won</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="stpeter-profit">$0</div>
                            <div class="stat-label">Net Profit/Loss</div>
                        </div>
                    </div>

                    <div id="stpeter-history" style="margin-top: 1rem; max-height: 150px; overflow-y: auto; font-size: 0.875rem; color: var(--muted);"></div>

                    <div class="result">
                        <p>Expected Value: <span class="result-value">INFINITE</span></p>
                        <p>Mathematical EV = 1/2×$2 + 1/4×$4 + 1/8×$8 + ... = $1 + $1 + $1 + ... = ∞</p>
                    </div>

                    <div class="insight">
                        Despite infinite expected value, most games pay small amounts. Big payoffs are exponentially rare. This is why expected value alone isn't a good decision criterion.
                    </div>
                </div>
            </div>

            <!-- Braess' Paradox -->
            <div class="paradox-card">
                <h3>Braess' Paradox <span class="points">98 pts</span></h3>
                <p class="description">Adding a new road to a traffic network can actually INCREASE travel time for everyone. Removing roads can sometimes improve traffic!</p>

                <div class="simulator">
                    <h4>Traffic Network Simulator</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">4000 cars must travel from A to B. Routes have time = (cars/100) or fixed 45 min.</p>

                    <div class="controls">
                        <button id="braess-toggle" onclick="toggleBraessRoad()">Add Shortcut Road</button>
                        <button onclick="resetBraess()">Reset</button>
                    </div>

                    <div class="network-container" id="braess-network">
                        <svg width="100%" height="100%" id="braess-svg">
                            <!-- Will be drawn by JS -->
                        </svg>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="braess-route1">2000</div>
                            <div class="stat-label">Route A→X→B</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="braess-route2">2000</div>
                            <div class="stat-label">Route A→Y→B</div>
                        </div>
                        <div class="stat-box" id="braess-route3-box" style="display: none;">
                            <div class="stat-value" id="braess-route3">0</div>
                            <div class="stat-label">Route A→X→Y→B</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="braess-time">65 min</div>
                            <div class="stat-label">Travel Time</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="braess-explanation">Without shortcut: Each route has 2000 cars. Time = 20 + 45 = 65 min (equilibrium).</p>
                    </div>

                    <div class="insight">
                        Selfish routing leads to a Nash equilibrium that's worse for everyone. This is why highway planners sometimes close roads to improve traffic!
                    </div>
                </div>
            </div>
        </section>

        <!-- JavaScript for Mathematical Paradoxes -->
        <script>
            // Potato Paradox
            function calculatePotato() {
                const weight = parseFloat(document.getElementById('potato-weight').value) || 100;
                const initialWaterPct = parseFloat(document.getElementById('potato-initial').value);
                const finalWaterPct = parseFloat(document.getElementById('potato-final').value);

                // Update slider labels
                document.getElementById('potato-initial-val').textContent = initialWaterPct + '%';
                document.getElementById('potato-final-val').textContent = finalWaterPct + '%';

                const initialWater = initialWaterPct / 100;
                const finalWater = finalWaterPct / 100;

                // Calculate values
                const solidMatter = weight * (1 - initialWater);
                const initialWaterWeight = weight * initialWater;
                const finalWeight = solidMatter / (1 - finalWater);
                const finalWaterWeight = finalWeight * finalWater;
                const waterLost = initialWaterWeight - finalWaterWeight;

                // Calculate percentage changes
                const waterPctChange = finalWaterPct - initialWaterPct;
                const weightPctChange = ((finalWeight - weight) / weight) * 100;

                // Update text displays
                document.getElementById('potato-result').textContent = finalWeight.toFixed(2) + ' lbs';
                document.getElementById('potato-before-weight').textContent = weight.toFixed(0) + ' lbs';
                document.getElementById('potato-after-weight').textContent = finalWeight.toFixed(2) + ' lbs';

                document.getElementById('potato-before-water-amt').textContent = initialWaterWeight.toFixed(1) + ' lbs water';
                document.getElementById('potato-before-solid-amt').textContent = solidMatter.toFixed(2) + ' lb solid';
                document.getElementById('potato-after-water-amt').textContent = finalWaterWeight.toFixed(1) + ' lbs water';
                document.getElementById('potato-after-solid-amt').textContent = solidMatter.toFixed(2) + ' lb solid';

                document.getElementById('potato-water-lost').textContent = '-' + waterLost.toFixed(1) + ' lbs water';

                document.getElementById('potato-water-change').textContent = waterPctChange.toFixed(1) + '%';
                document.getElementById('potato-weight-change').textContent = weightPctChange.toFixed(1) + '%';

                // Update visual bars (scale height based on weight relative to initial)
                const maxHeight = 200; // matches the CSS height
                const beforeTotalHeight = maxHeight;
                const afterTotalHeight = (finalWeight / weight) * maxHeight;

                // Before stack - full height
                const beforeWaterHeight = initialWater * beforeTotalHeight;
                const beforeSolidHeight = (1 - initialWater) * beforeTotalHeight;
                document.getElementById('potato-before-water').style.height = beforeWaterHeight + 'px';
                document.getElementById('potato-before-solid').style.height = beforeSolidHeight + 'px';

                // After stack - scaled by weight ratio
                const afterWaterHeight = finalWater * afterTotalHeight;
                const afterSolidHeight = (1 - finalWater) * afterTotalHeight;
                document.getElementById('potato-after-water').style.height = afterWaterHeight + 'px';
                document.getElementById('potato-after-solid').style.height = afterSolidHeight + 'px';

                // Update explanation
                document.getElementById('potato-explanation').textContent =
                    `The solid matter (${solidMatter.toFixed(2)} lbs) stays constant. At ${finalWaterPct}% water, solid must be ${(100 - finalWaterPct).toFixed(1)}% of total. ` +
                    `So ${solidMatter.toFixed(2)} = ${(100 - finalWaterPct).toFixed(1)}% × weight → weight = ${finalWeight.toFixed(2)} lbs.`;
            }

            // Simpson's Paradox
            function runSimpson() {
                // Classic Simpson's paradox data
                const mildA = { success: 81, total: 87 };  // 93%
                const mildB = { success: 234, total: 270 }; // 87%
                const severeA = { success: 192, total: 263 }; // 73%
                const severeB = { success: 55, total: 80 };   // 69%

                const totalA = { success: mildA.success + severeA.success, total: mildA.total + severeA.total };
                const totalB = { success: mildB.success + severeB.success, total: mildB.total + severeB.total };

                const pctMildA = (mildA.success / mildA.total * 100).toFixed(1);
                const pctMildB = (mildB.success / mildB.total * 100).toFixed(1);
                const pctSevereA = (severeA.success / severeA.total * 100).toFixed(1);
                const pctSevereB = (severeB.success / severeB.total * 100).toFixed(1);
                const pctTotalA = (totalA.success / totalA.total * 100).toFixed(1);
                const pctTotalB = (totalB.success / totalB.total * 100).toFixed(1);

                document.getElementById('simpson-mild-a').textContent = `${mildA.success}/${mildA.total} (${pctMildA}%)`;
                document.getElementById('simpson-mild-b').textContent = `${mildB.success}/${mildB.total} (${pctMildB}%)`;
                document.getElementById('simpson-mild-winner').textContent = pctMildA > pctMildB ? 'A' : 'B';

                document.getElementById('simpson-severe-a').textContent = `${severeA.success}/${severeA.total} (${pctSevereA}%)`;
                document.getElementById('simpson-severe-b').textContent = `${severeB.success}/${severeB.total} (${pctSevereB}%)`;
                document.getElementById('simpson-severe-winner').textContent = pctSevereA > pctSevereB ? 'A' : 'B';

                document.getElementById('simpson-total-a').textContent = `${totalA.success}/${totalA.total} (${pctTotalA}%)`;
                document.getElementById('simpson-total-b').textContent = `${totalB.success}/${totalB.total} (${pctTotalB}%)`;
                document.getElementById('simpson-total-winner').textContent = pctTotalA > pctTotalB ? 'A' : 'B';

                document.getElementById('simpson-result').style.display = 'block';
                document.getElementById('simpson-explanation').textContent =
                    `Treatment A wins in BOTH subgroups (${pctMildA}% > ${pctMildB}% for mild, ${pctSevereA}% > ${pctSevereB}% for severe). ` +
                    `But Treatment B wins overall (${pctTotalB}% > ${pctTotalA}%)! ` +
                    `This happens because Treatment A was mostly given to severe cases (harder to treat).`;
            }

            function resetSimpson() {
                ['simpson-mild-a', 'simpson-mild-b', 'simpson-severe-a', 'simpson-severe-b',
                 'simpson-total-a', 'simpson-total-b', 'simpson-mild-winner', 'simpson-severe-winner',
                 'simpson-total-winner'].forEach(id => document.getElementById(id).textContent = '-');
                document.getElementById('simpson-result').style.display = 'none';
            }

            // St. Petersburg Paradox
            function playStPetersburg() {
                const fee = parseFloat(document.getElementById('stpeter-fee').value);
                const numGames = parseInt(document.getElementById('stpeter-games').value);

                let totalWon = 0;
                let totalSpent = fee * numGames;
                let history = [];

                for (let i = 0; i < numGames; i++) {
                    let flips = 0;
                    while (Math.random() < 0.5) {
                        flips++;
                    }
                    const prize = Math.pow(2, flips + 1);
                    totalWon += prize;
                    if (flips >= 5 || i < 10) {
                        history.push(`Game ${i + 1}: ${flips + 1} flips → $${prize}`);
                    }
                }

                document.getElementById('stpeter-played').textContent = numGames;
                document.getElementById('stpeter-spent').textContent = '$' + totalSpent.toLocaleString();
                document.getElementById('stpeter-won').textContent = '$' + totalWon.toLocaleString();

                const profit = totalWon - totalSpent;
                const profitEl = document.getElementById('stpeter-profit');
                profitEl.textContent = (profit >= 0 ? '+$' : '-$') + Math.abs(profit).toLocaleString();
                profitEl.style.color = profit >= 0 ? '#22c55e' : '#ef4444';

                document.getElementById('stpeter-history').innerHTML =
                    '<strong>Notable games:</strong><br>' + history.slice(-20).join('<br>');
            }

            // Braess' Paradox
            let braessShortcut = false;

            function drawBraessNetwork() {
                const svg = document.getElementById('braess-svg');
                const w = svg.clientWidth || 400;
                const h = 280;

                const nodes = {
                    A: { x: 50, y: h / 2 },
                    X: { x: w / 2, y: 60 },
                    Y: { x: w / 2, y: h - 60 },
                    B: { x: w - 50, y: h / 2 }
                };

                let html = '';

                // Edges
                const edges = [
                    { from: 'A', to: 'X', label: 'T/100', variable: true },
                    { from: 'X', to: 'B', label: '45 min', variable: false },
                    { from: 'A', to: 'Y', label: '45 min', variable: false },
                    { from: 'Y', to: 'B', label: 'T/100', variable: true }
                ];

                if (braessShortcut) {
                    edges.push({ from: 'X', to: 'Y', label: '0 min', variable: false, shortcut: true });
                }

                edges.forEach(e => {
                    const x1 = nodes[e.from].x, y1 = nodes[e.from].y;
                    const x2 = nodes[e.to].x, y2 = nodes[e.to].y;
                    const color = e.shortcut ? '#f59e0b' : (e.variable ? '#6366f1' : '#64748b');
                    const strokeWidth = e.shortcut ? 4 : 2;

                    html += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="${color}" stroke-width="${strokeWidth}"/>`;

                    // Label
                    const mx = (x1 + x2) / 2, my = (y1 + y2) / 2;
                    const offset = e.from === 'A' ? -15 : 15;
                    html += `<text x="${mx}" y="${my + offset}" fill="${color}" font-size="12" text-anchor="middle">${e.label}</text>`;
                });

                // Nodes
                Object.entries(nodes).forEach(([name, pos]) => {
                    html += `<circle cx="${pos.x}" cy="${pos.y}" r="25" fill="${name === 'A' || name === 'B' ? '#6366f1' : '#8b5cf6'}"/>`;
                    html += `<text x="${pos.x}" y="${pos.y + 5}" fill="white" font-size="16" font-weight="bold" text-anchor="middle">${name}</text>`;
                });

                svg.innerHTML = html;
                updateBraessStats();
            }

            function updateBraessStats() {
                if (!braessShortcut) {
                    document.getElementById('braess-route1').textContent = '2000';
                    document.getElementById('braess-route2').textContent = '2000';
                    document.getElementById('braess-time').textContent = '65 min';
                    document.getElementById('braess-route3-box').style.display = 'none';
                    document.getElementById('braess-explanation').textContent =
                        'Without shortcut: Each route has 2000 cars. Time = 20 + 45 = 65 min (Nash equilibrium).';
                } else {
                    document.getElementById('braess-route1').textContent = '0';
                    document.getElementById('braess-route2').textContent = '0';
                    document.getElementById('braess-route3').textContent = '4000';
                    document.getElementById('braess-route3-box').style.display = 'block';
                    document.getElementById('braess-time').textContent = '80 min';
                    document.getElementById('braess-time').style.color = '#ef4444';
                    document.getElementById('braess-explanation').textContent =
                        'With shortcut: Everyone takes A→X→Y→B (Nash equilibrium). Time = 40 + 0 + 40 = 80 min. WORSE for everyone!';
                }
            }

            function toggleBraessRoad() {
                braessShortcut = !braessShortcut;
                document.getElementById('braess-toggle').textContent = braessShortcut ? 'Remove Shortcut Road' : 'Add Shortcut Road';
                document.getElementById('braess-time').style.color = braessShortcut ? '#ef4444' : 'var(--accent)';
                drawBraessNetwork();
            }

            function resetBraess() {
                braessShortcut = false;
                document.getElementById('braess-toggle').textContent = 'Add Shortcut Road';
                document.getElementById('braess-time').style.color = 'var(--accent)';
                drawBraessNetwork();
            }

            // Initialize
            window.addEventListener('load', () => {
                calculatePotato();
                drawBraessNetwork();
            });
            window.addEventListener('resize', drawBraessNetwork);
        </script>

        <!-- PHYSICS PARADOXES -->
        <section id="physics">
            <h2 class="category-title">Physics & Time Paradoxes</h2>

            <!-- Fermi Paradox -->
            <div class="paradox-card">
                <h3>Fermi Paradox <span class="points">223 pts</span></h3>
                <p class="description">Given the high probability of alien civilizations, why have we found no evidence of them? The universe should be teeming with life!</p>

                <div class="simulator">
                    <h4>Drake Equation Calculator</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Estimate the number of civilizations in our galaxy we could communicate with.</p>

                    <div class="controls" style="flex-wrap: wrap;">
                        <div class="control-group">
                            <label>Star formation rate (R*)</label>
                            <input type="range" id="drake-r" min="1" max="10" step="0.5" value="3">
                            <span id="drake-r-val">3/year</span>
                        </div>
                        <div class="control-group">
                            <label>% stars with planets (fp)</label>
                            <input type="range" id="drake-fp" min="10" max="100" step="5" value="100">
                            <span id="drake-fp-val">100%</span>
                        </div>
                        <div class="control-group">
                            <label>Habitable planets per star (ne)</label>
                            <input type="range" id="drake-ne" min="0.1" max="5" step="0.1" value="1">
                            <span id="drake-ne-val">1</span>
                        </div>
                        <div class="control-group">
                            <label>% where life develops (fl)</label>
                            <input type="range" id="drake-fl" min="1" max="100" step="1" value="50">
                            <span id="drake-fl-val">50%</span>
                        </div>
                        <div class="control-group">
                            <label>% with intelligence (fi)</label>
                            <input type="range" id="drake-fi" min="1" max="100" step="1" value="50">
                            <span id="drake-fi-val">50%</span>
                        </div>
                        <div class="control-group">
                            <label>% with technology (fc)</label>
                            <input type="range" id="drake-fc" min="1" max="100" step="1" value="20">
                            <span id="drake-fc-val">20%</span>
                        </div>
                        <div class="control-group">
                            <label>Civilization lifespan (L years)</label>
                            <input type="range" id="drake-l" min="100" max="100000000" step="100" value="10000">
                            <span id="drake-l-val">10,000</span>
                        </div>
                    </div>

                    <div class="result">
                        <p>Estimated Civilizations (N): <span class="result-value" id="drake-result">150</span></p>
                        <p id="drake-formula">N = R* × fp × ne × fl × fi × fc × L</p>
                    </div>

                    <div class="insight">
                        Even conservative estimates suggest thousands of civilizations. Yet we've detected nothing. This is the Fermi Paradox: "Where is everybody?"
                    </div>
                </div>
            </div>

            <!-- Grandfather Paradox -->
            <div class="paradox-card">
                <h3>Grandfather Paradox <span class="points">154 pts</span></h3>
                <p class="description">If you travel back in time and prevent your grandparents from meeting, you'd never be born - so you couldn't have traveled back!</p>

                <div class="simulator">
                    <h4>Time Travel Scenario Simulator</h4>

                    <div class="controls">
                        <button onclick="runGrandfather('standard')">Standard Timeline</button>
                        <button onclick="runGrandfather('paradox')">Paradox Attempt</button>
                        <button onclick="runGrandfather('multiverse')">Multiverse Solution</button>
                    </div>

                    <div id="grandfather-timeline" style="margin-top: 1rem; padding: 1rem; background: var(--bg); border-radius: 0.5rem; min-height: 200px;">
                        <div id="grandfather-viz"></div>
                    </div>

                    <div class="result">
                        <p id="grandfather-result">Select a scenario to see what happens...</p>
                    </div>

                    <div class="insight">
                        Possible resolutions: self-consistency (you can't change what happened), many-worlds (you create a new timeline), or Novikov self-consistency principle.
                    </div>
                </div>
            </div>

            <!-- Olbers' Paradox -->
            <div class="paradox-card">
                <h3>Olbers' Paradox <span class="points">264 pts</span></h3>
                <p class="description">If the universe is infinite and eternal, why isn't the night sky blazingly bright? Every line of sight should hit a star eventually.</p>

                <div class="simulator">
                    <h4>Night Sky Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Universe Age (billions of years)</label>
                            <input type="range" id="olbers-age" min="1" max="1000" value="13.8">
                            <span id="olbers-age-val">13.8 B</span>
                        </div>
                        <div class="control-group">
                            <label>Star Density</label>
                            <input type="range" id="olbers-density" min="1" max="100" value="20">
                            <span id="olbers-density-val">20%</span>
                        </div>
                        <button onclick="drawOlbersSky()">Generate Sky</button>
                    </div>

                    <canvas id="olbers-canvas" width="600" height="200" style="background: #000; width: 100%;"></canvas>

                    <div class="result">
                        <p>Visible Stars: <span class="result-value" id="olbers-stars">0</span></p>
                        <p id="olbers-explanation">In a finite-age universe, light from distant stars hasn't reached us yet.</p>
                    </div>

                    <div class="insight">
                        The dark night sky proves the universe is NOT infinitely old. Light has a speed limit, and distant stars' light hasn't had time to reach us.
                    </div>
                </div>
            </div>
        </section>

        <!-- SOCIAL PARADOXES -->
        <section id="social">
            <h2 class="category-title">Social & Economic Paradoxes</h2>

            <!-- Friendship Paradox -->
            <div class="paradox-card">
                <h3>Friendship Paradox <span class="points">288 pts</span></h3>
                <p class="description">On average, your friends have more friends than you do. This is a mathematical certainty!</p>

                <div class="simulator">
                    <h4>Social Network Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Number of People</label>
                            <input type="number" id="friend-people" value="20" min="5" max="50">
                        </div>
                        <div class="control-group">
                            <label>Connection Probability</label>
                            <input type="range" id="friend-prob" min="10" max="60" value="25">
                            <span id="friend-prob-val">25%</span>
                        </div>
                        <button onclick="generateFriendNetwork()">Generate Network</button>
                    </div>

                    <canvas id="friend-canvas" width="600" height="300" style="width: 100%; border-radius: 0.5rem;"></canvas>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="friend-avg">0</div>
                            <div class="stat-label">Avg Friends</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="friend-fof">0</div>
                            <div class="stat-label">Avg Friends-of-Friends</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="friend-pct">0%</div>
                            <div class="stat-label">People w/ Less Popular Friends</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="friend-explanation">Generate a network to see the paradox in action!</p>
                    </div>

                    <div class="insight">
                        This isn't just statistics - it affects your perception of social media. You see your popular friends' posts more, making everyone seem more social than you.
                    </div>
                </div>
            </div>

            <!-- Jevons Paradox -->
            <div class="paradox-card">
                <h3>Jevons Paradox <span class="points">98 pts</span></h3>
                <p class="description">Increasing efficiency in resource use often leads to INCREASED total consumption, not decreased!</p>

                <div class="simulator">
                    <h4>Fuel Efficiency Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Initial MPG</label>
                            <input type="number" id="jevons-mpg1" value="20" min="10" max="50">
                        </div>
                        <div class="control-group">
                            <label>Improved MPG</label>
                            <input type="number" id="jevons-mpg2" value="40" min="15" max="100">
                        </div>
                        <div class="control-group">
                            <label>Rebound Effect %</label>
                            <input type="range" id="jevons-rebound" min="0" max="200" value="120">
                            <span id="jevons-rebound-val">120%</span>
                        </div>
                        <button onclick="calculateJevons()">Calculate Impact</button>
                    </div>

                    <div class="bar-chart" style="height: 150px;">
                        <div class="bar-group">
                            <div class="bar" id="jevons-bar1" style="height: 50%;"></div>
                            <div class="bar-label">Miles Driven<br>(Before)</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar second" id="jevons-bar2" style="height: 60%;"></div>
                            <div class="bar-label">Miles Driven<br>(After)</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar" id="jevons-bar3" style="height: 50%;"></div>
                            <div class="bar-label">Fuel Used<br>(Before)</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar second" id="jevons-bar4" style="height: 55%;"></div>
                            <div class="bar-label">Fuel Used<br>(After)</div>
                        </div>
                    </div>

                    <div class="result">
                        <p>Expected Fuel Savings: <span id="jevons-expected">-50%</span></p>
                        <p>Actual Fuel Change: <span class="result-value" id="jevons-actual">+10%</span></p>
                    </div>

                    <div class="insight">
                        When driving costs half as much per mile, people drive more. Energy efficiency improvements often don't reduce consumption as expected.
                    </div>
                </div>
            </div>

            <!-- Waiting Time Paradox -->
            <div class="paradox-card">
                <h3>Waiting Time Paradox <span class="points">345 pts</span></h3>
                <p class="description">If buses arrive every 10 minutes on average, your expected wait is NOT 5 minutes - it's longer!</p>

                <div class="simulator">
                    <h4>Bus Stop Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Average Interval (min)</label>
                            <input type="number" id="bus-interval" value="10" min="1" max="60">
                        </div>
                        <div class="control-group">
                            <label>Variability (0=exact, 100=random)</label>
                            <input type="range" id="bus-variance" min="0" max="100" value="70">
                            <span id="bus-variance-val">70%</span>
                        </div>
                        <div class="control-group">
                            <label>Simulations</label>
                            <input type="number" id="bus-sims" value="1000" min="100" max="10000">
                        </div>
                        <button onclick="simulateBus()">Simulate Arrivals</button>
                    </div>

                    <div id="bus-viz" style="height: 80px; background: var(--bg); border-radius: 0.5rem; position: relative; overflow: hidden; margin-top: 1rem;">
                        <div style="position: absolute; top: 50%; left: 0; right: 0; height: 4px; background: var(--muted);"></div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="bus-expected">5 min</div>
                            <div class="stat-label">Naive Expectation</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="bus-actual">7.5 min</div>
                            <div class="stat-label">Actual Avg Wait</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="bus-ratio">1.5x</div>
                            <div class="stat-label">Longer Than Expected</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="bus-explanation">You're more likely to arrive during a LONG gap than a short one. The average gap you experience is longer than the average gap between buses.</p>
                    </div>

                    <div class="insight">
                        This is called the "inspection paradox" - you're sampling intervals proportional to their length. It explains why buses seem late!
                    </div>
                </div>
            </div>
        </section>

        <script>
            // Drake Equation (Fermi Paradox)
            function updateDrake() {
                const R = parseFloat(document.getElementById('drake-r').value);
                const fp = parseFloat(document.getElementById('drake-fp').value) / 100;
                const ne = parseFloat(document.getElementById('drake-ne').value);
                const fl = parseFloat(document.getElementById('drake-fl').value) / 100;
                const fi = parseFloat(document.getElementById('drake-fi').value) / 100;
                const fc = parseFloat(document.getElementById('drake-fc').value) / 100;
                const L = parseFloat(document.getElementById('drake-l').value);

                document.getElementById('drake-r-val').textContent = R + '/year';
                document.getElementById('drake-fp-val').textContent = (fp * 100) + '%';
                document.getElementById('drake-ne-val').textContent = ne;
                document.getElementById('drake-fl-val').textContent = (fl * 100) + '%';
                document.getElementById('drake-fi-val').textContent = (fi * 100) + '%';
                document.getElementById('drake-fc-val').textContent = (fc * 100) + '%';
                document.getElementById('drake-l-val').textContent = L.toLocaleString();

                const N = R * fp * ne * fl * fi * fc * L;
                document.getElementById('drake-result').textContent = Math.round(N).toLocaleString();
            }

            ['drake-r', 'drake-fp', 'drake-ne', 'drake-fl', 'drake-fi', 'drake-fc', 'drake-l'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateDrake);
            });

            // Grandfather Paradox
            function runGrandfather(scenario) {
                const viz = document.getElementById('grandfather-viz');
                const result = document.getElementById('grandfather-result');

                if (scenario === 'standard') {
                    viz.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 1rem; margin: 1rem 0;">
                            <div style="background: var(--primary); padding: 1rem; border-radius: 0.5rem; text-align: center;">
                                1950<br>Grandparents meet
                            </div>
                            <div style="font-size: 2rem;">→</div>
                            <div style="background: var(--secondary); padding: 1rem; border-radius: 0.5rem; text-align: center;">
                                1975<br>Parents born
                            </div>
                            <div style="font-size: 2rem;">→</div>
                            <div style="background: var(--accent); padding: 1rem; border-radius: 0.5rem; text-align: center;">
                                2000<br>You are born
                            </div>
                            <div style="font-size: 2rem;">→</div>
                            <div style="background: #22c55e; padding: 1rem; border-radius: 0.5rem; text-align: center;">
                                2025<br>Present day
                            </div>
                        </div>`;
                    result.innerHTML = '<span style="color: #22c55e;">Standard timeline: Everything is consistent.</span>';
                } else if (scenario === 'paradox') {
                    viz.innerHTML = `
                        <div style="display: flex; flex-direction: column; gap: 1rem; margin: 1rem 0;">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="background: var(--primary); padding: 1rem; border-radius: 0.5rem;">2025: You build time machine</div>
                                <div style="font-size: 2rem;">→</div>
                                <div style="background: var(--secondary); padding: 1rem; border-radius: 0.5rem;">1950: Prevent grandparents meeting</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; margin-left: 2rem;">
                                <div style="font-size: 2rem;">↓</div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="background: #ef4444; padding: 1rem; border-radius: 0.5rem;">Parents never born</div>
                                <div style="font-size: 2rem;">→</div>
                                <div style="background: #ef4444; padding: 1rem; border-radius: 0.5rem;">You never born</div>
                                <div style="font-size: 2rem;">→</div>
                                <div style="background: #ef4444; padding: 1rem; border-radius: 0.5rem;">Can't travel back???</div>
                            </div>
                        </div>`;
                    result.innerHTML = '<span style="color: #ef4444;">PARADOX! If you were never born, who prevented the meeting? Logical impossibility!</span>';
                } else {
                    viz.innerHTML = `
                        <div style="display: flex; flex-direction: column; gap: 0.5rem; margin: 1rem 0;">
                            <div style="background: var(--primary); padding: 0.5rem; border-radius: 0.5rem;">Timeline A (original): You are born → Travel back</div>
                            <div style="margin-left: 15rem; font-size: 1.5rem;">↘</div>
                            <div style="background: var(--secondary); padding: 0.5rem; border-radius: 0.5rem; margin-left: 2rem;">Timeline B (new): Grandparents don't meet → Different universe</div>
                            <div style="margin-left: 1rem; font-size: 1.5rem;">↓</div>
                            <div style="background: var(--accent); padding: 0.5rem; border-radius: 0.5rem;">Timeline A continues: You still exist in original timeline!</div>
                        </div>`;
                    result.innerHTML = '<span style="color: #22c55e;">Many-Worlds Solution: You create a new branch. Both timelines exist independently. No paradox!</span>';
                }
            }

            // Olbers' Paradox
            function drawOlbersSky() {
                const canvas = document.getElementById('olbers-canvas');
                const ctx = canvas.getContext('2d');
                const age = parseFloat(document.getElementById('olbers-age').value);
                const density = parseFloat(document.getElementById('olbers-density').value);

                document.getElementById('olbers-age-val').textContent = age + ' B';
                document.getElementById('olbers-density-val').textContent = density + '%';

                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Calculate visible stars based on light travel time
                const maxLightYears = age * 1e9; // Light years
                const universeRadius = 93e9; // Observable universe radius
                const visibilityFactor = Math.min(maxLightYears / universeRadius, 1);

                const numStars = Math.floor(density * visibilityFactor * 5);

                for (let i = 0; i < numStars; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const size = Math.random() * 2 + 0.5;
                    const brightness = Math.random() * 0.8 + 0.2;

                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(255, 255, 255, ${brightness})`;
                    ctx.fill();
                }

                // If infinite age/density, fill with white
                if (age > 500 && density > 80) {
                    ctx.fillStyle = `rgba(255, 255, 200, ${(age - 500) / 500 * (density / 100)})`;
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }

                document.getElementById('olbers-stars').textContent = numStars;

                if (age > 500) {
                    document.getElementById('olbers-explanation').textContent =
                        'With an old enough universe, every line of sight hits a star. The sky would be blindingly bright!';
                } else {
                    document.getElementById('olbers-explanation').textContent =
                        `At ${age}B years old, light has only traveled ${(age * 1e9).toExponential(1)} light years. Many stars remain invisible.`;
                }
            }

            document.getElementById('olbers-age').addEventListener('input', function() {
                document.getElementById('olbers-age-val').textContent = this.value + ' B';
            });
            document.getElementById('olbers-density').addEventListener('input', function() {
                document.getElementById('olbers-density-val').textContent = this.value + '%';
            });

            // Friendship Paradox
            let friendNetwork = [];

            function generateFriendNetwork() {
                const n = parseInt(document.getElementById('friend-people').value);
                const prob = parseFloat(document.getElementById('friend-prob').value) / 100;
                document.getElementById('friend-prob-val').textContent = (prob * 100) + '%';

                // Generate adjacency
                const adj = Array(n).fill(null).map(() => []);

                for (let i = 0; i < n; i++) {
                    for (let j = i + 1; j < n; j++) {
                        if (Math.random() < prob) {
                            adj[i].push(j);
                            adj[j].push(i);
                        }
                    }
                }

                // Calculate stats
                const friendCounts = adj.map(a => a.length);
                const avgFriends = friendCounts.reduce((a, b) => a + b, 0) / n;

                // Average friends-of-friends
                let totalFoF = 0;
                let totalConnections = 0;
                for (let i = 0; i < n; i++) {
                    for (const friend of adj[i]) {
                        totalFoF += adj[friend].length;
                        totalConnections++;
                    }
                }
                const avgFoF = totalConnections > 0 ? totalFoF / totalConnections : 0;

                // Count people with less popular friends
                let lessPopular = 0;
                for (let i = 0; i < n; i++) {
                    if (adj[i].length > 0) {
                        const friendAvg = adj[i].reduce((sum, f) => sum + adj[f].length, 0) / adj[i].length;
                        if (adj[i].length < friendAvg) lessPopular++;
                    }
                }

                document.getElementById('friend-avg').textContent = avgFriends.toFixed(1);
                document.getElementById('friend-fof').textContent = avgFoF.toFixed(1);
                document.getElementById('friend-pct').textContent = Math.round(lessPopular / n * 100) + '%';

                document.getElementById('friend-explanation').textContent =
                    `Your friends have ${avgFoF.toFixed(1)} friends on average, while you have ${avgFriends.toFixed(1)}. ` +
                    `${Math.round(lessPopular / n * 100)}% of people have friends more popular than themselves!`;

                // Draw network
                const canvas = document.getElementById('friend-canvas');
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#1e293b';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Position nodes in a circle
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;
                const radius = Math.min(cx, cy) - 40;

                const positions = [];
                for (let i = 0; i < n; i++) {
                    const angle = (2 * Math.PI * i) / n - Math.PI / 2;
                    positions.push({
                        x: cx + radius * Math.cos(angle),
                        y: cy + radius * Math.sin(angle)
                    });
                }

                // Draw edges
                ctx.strokeStyle = 'rgba(99, 102, 241, 0.3)';
                ctx.lineWidth = 1;
                for (let i = 0; i < n; i++) {
                    for (const j of adj[i]) {
                        if (j > i) {
                            ctx.beginPath();
                            ctx.moveTo(positions[i].x, positions[i].y);
                            ctx.lineTo(positions[j].x, positions[j].y);
                            ctx.stroke();
                        }
                    }
                }

                // Draw nodes (size by popularity)
                const maxFriends = Math.max(...friendCounts, 1);
                for (let i = 0; i < n; i++) {
                    const nodeSize = 5 + (friendCounts[i] / maxFriends) * 15;
                    ctx.beginPath();
                    ctx.arc(positions[i].x, positions[i].y, nodeSize, 0, Math.PI * 2);
                    ctx.fillStyle = friendCounts[i] >= avgFriends ? '#6366f1' : '#ef4444';
                    ctx.fill();
                }
            }

            document.getElementById('friend-prob').addEventListener('input', function() {
                document.getElementById('friend-prob-val').textContent = this.value + '%';
            });

            // Jevons Paradox
            function calculateJevons() {
                const mpg1 = parseFloat(document.getElementById('jevons-mpg1').value);
                const mpg2 = parseFloat(document.getElementById('jevons-mpg2').value);
                const rebound = parseFloat(document.getElementById('jevons-rebound').value) / 100;

                document.getElementById('jevons-rebound-val').textContent = (rebound * 100) + '%';

                // Base: 12000 miles/year
                const baseMiles = 12000;
                const efficiencyGain = (mpg2 - mpg1) / mpg1;

                // With rebound effect, increased efficiency leads to more driving
                const newMiles = baseMiles * (1 + efficiencyGain * rebound);

                const baseFuel = baseMiles / mpg1;
                const newFuel = newMiles / mpg2;

                const expectedSaving = (1 - mpg1 / mpg2) * 100;
                const actualChange = (newFuel / baseFuel - 1) * 100;

                // Update bars
                const maxMiles = Math.max(baseMiles, newMiles);
                const maxFuel = Math.max(baseFuel, newFuel);

                document.getElementById('jevons-bar1').style.height = (baseMiles / maxMiles * 120) + 'px';
                document.getElementById('jevons-bar2').style.height = (newMiles / maxMiles * 120) + 'px';
                document.getElementById('jevons-bar3').style.height = (baseFuel / maxFuel * 120) + 'px';
                document.getElementById('jevons-bar4').style.height = (newFuel / maxFuel * 120) + 'px';

                document.getElementById('jevons-expected').textContent = expectedSaving.toFixed(0) + '%';
                document.getElementById('jevons-expected').style.color = '#22c55e';

                const actualEl = document.getElementById('jevons-actual');
                actualEl.textContent = (actualChange >= 0 ? '+' : '') + actualChange.toFixed(0) + '%';
                actualEl.style.color = actualChange >= 0 ? '#ef4444' : '#22c55e';
            }

            document.getElementById('jevons-rebound').addEventListener('input', function() {
                document.getElementById('jevons-rebound-val').textContent = this.value + '%';
            });

            // Waiting Time Paradox
            function simulateBus() {
                const interval = parseFloat(document.getElementById('bus-interval').value);
                const variance = parseFloat(document.getElementById('bus-variance').value) / 100;
                const numSims = parseInt(document.getElementById('bus-sims').value);

                document.getElementById('bus-variance-val').textContent = (variance * 100) + '%';

                // Generate bus arrival times
                const arrivals = [0];
                let time = 0;
                while (time < 10000) {
                    // Exponential distribution with given variance
                    const gap = variance > 0 ?
                        -interval * Math.log(Math.random()) * variance + interval * (1 - variance) :
                        interval;
                    time += Math.max(0.1, gap);
                    arrivals.push(time);
                }

                // Simulate random passenger arrivals
                let totalWait = 0;
                for (let i = 0; i < numSims; i++) {
                    const arrivalTime = Math.random() * (arrivals[arrivals.length - 2]);
                    // Find next bus
                    for (const busTime of arrivals) {
                        if (busTime >= arrivalTime) {
                            totalWait += (busTime - arrivalTime);
                            break;
                        }
                    }
                }

                const avgWait = totalWait / numSims;
                const expected = interval / 2;
                const ratio = avgWait / expected;

                document.getElementById('bus-expected').textContent = expected.toFixed(1) + ' min';
                document.getElementById('bus-actual').textContent = avgWait.toFixed(1) + ' min';
                document.getElementById('bus-actual').style.color = avgWait > expected ? '#ef4444' : '#22c55e';
                document.getElementById('bus-ratio').textContent = ratio.toFixed(2) + 'x';

                // Visualize some arrivals
                const viz = document.getElementById('bus-viz');
                viz.innerHTML = '<div style="position: absolute; top: 50%; left: 0; right: 0; height: 4px; background: var(--muted);"></div>';

                const displayArrivals = arrivals.slice(0, 20);
                const maxTime = displayArrivals[displayArrivals.length - 1];

                displayArrivals.forEach((t, i) => {
                    const left = (t / maxTime) * 100;
                    const marker = document.createElement('div');
                    marker.style.cssText = `position: absolute; left: ${left}%; top: 30%; width: 20px; height: 30px; background: var(--primary); border-radius: 4px; transform: translateX(-50%);`;
                    marker.title = `Bus at ${t.toFixed(1)} min`;
                    viz.appendChild(marker);
                });
            }

            document.getElementById('bus-variance').addEventListener('input', function() {
                document.getElementById('bus-variance-val').textContent = this.value + '%';
            });

            // Initialize
            window.addEventListener('load', () => {
                updateDrake();
                drawOlbersSky();
                generateFriendNetwork();
                calculateJevons();
                simulateBus();
            });
        </script>

        <!-- TECHNOLOGY PARADOXES -->
        <section id="technology">
            <h2 class="category-title">Technology & Computing Paradoxes</h2>

            <!-- Moravec's Paradox -->
            <div class="paradox-card">
                <h3>Moravec's Paradox <span class="points">155 pts</span></h3>
                <p class="description">Tasks easy for humans (walking, face recognition) are hard for computers. Tasks hard for humans (chess, math) are easy for computers!</p>

                <div class="simulator">
                    <h4>Human vs AI Task Difficulty</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Compare the relative difficulty of tasks for humans vs AI systems.</p>

                    <div id="moravec-chart" style="display: grid; gap: 0.5rem;">
                        <div class="moravec-row" data-human="1" data-ai="95">
                            <span class="moravec-label">Walking on uneven terrain</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 10%;">Human: Easy</div>
                                <div class="moravec-ai" style="width: 95%;">AI: Hard</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="2" data-ai="90">
                            <span class="moravec-label">Recognizing faces</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 20%;">Human: Easy</div>
                                <div class="moravec-ai" style="width: 70%;">AI: Hard (improving)</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="3" data-ai="85">
                            <span class="moravec-label">Understanding sarcasm</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 30%;">Human: Easy</div>
                                <div class="moravec-ai" style="width: 85%;">AI: Hard</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="5" data-ai="70">
                            <span class="moravec-label">Common sense reasoning</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 50%;">Human: Medium</div>
                                <div class="moravec-ai" style="width: 70%;">AI: Hard</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="85" data-ai="5">
                            <span class="moravec-label">Chess (grandmaster level)</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 85%;">Human: Very Hard</div>
                                <div class="moravec-ai" style="width: 5%;">AI: Trivial</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="90" data-ai="3">
                            <span class="moravec-label">Complex calculations</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 90%;">Human: Very Hard</div>
                                <div class="moravec-ai" style="width: 3%;">AI: Trivial</div>
                            </div>
                        </div>
                        <div class="moravec-row" data-human="95" data-ai="2">
                            <span class="moravec-label">Searching billions of records</span>
                            <div class="moravec-bars">
                                <div class="moravec-human" style="width: 95%;">Human: Impossible</div>
                                <div class="moravec-ai" style="width: 2%;">AI: Trivial</div>
                            </div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="moravec-explanation">Evolution spent billions of years optimizing sensorimotor skills. Abstract thinking is new and inefficient - but easily automated!</p>
                    </div>

                    <div class="insight">
                        This is why self-driving cars are harder than chess-playing AI. Moving through the physical world requires solving problems evolution already solved for us.
                    </div>
                </div>

                <style>
                    .moravec-row {
                        display: grid;
                        grid-template-columns: 140px 1fr;
                        gap: 0.5rem;
                        align-items: center;
                        padding: 0.5rem;
                    }
                    @media (max-width: 768px) {
                        .moravec-row {
                            grid-template-columns: 1fr;
                            gap: 0.25rem;
                        }
                        .moravec-label {
                            font-weight: bold;
                            font-size: 0.8rem;
                            color: var(--accent);
                        }
                        .moravec-bars {
                            margin-bottom: 0.5rem;
                        }
                        .moravec-human, .moravec-ai {
                            font-size: 0.7rem;
                            padding: 0.3rem 0.5rem;
                        }
                    }
                    .moravec-row {
                        background: var(--bg);
                        border-radius: 0.25rem;
                    }
                    .moravec-label {
                        font-size: 0.875rem;
                    }
                    .moravec-bars {
                        display: flex;
                        flex-direction: column;
                        gap: 0.25rem;
                    }
                    .moravec-human {
                        background: linear-gradient(90deg, #22c55e, #84cc16);
                        padding: 0.25rem 0.5rem;
                        border-radius: 0.25rem;
                        font-size: 0.75rem;
                        min-width: 80px;
                    }
                    .moravec-ai {
                        background: linear-gradient(90deg, #6366f1, #8b5cf6);
                        padding: 0.25rem 0.5rem;
                        border-radius: 0.25rem;
                        font-size: 0.75rem;
                        min-width: 80px;
                    }
                </style>
            </div>

            <!-- Tog's Paradox -->
            <div class="paradox-card">
                <h3>Tog's Paradox <span class="points">260 pts</span></h3>
                <p class="description">Users believe they're faster with keyboard shortcuts, but studies show mouse users are often faster. The feeling of speed doesn't match reality!</p>

                <div class="simulator">
                    <h4>Keyboard vs Mouse Speed Test</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Test your speed: Click the targets or use keyboard shortcuts.</p>

                    <div class="controls">
                        <button onclick="startTogTest('mouse')">Start Mouse Test</button>
                        <button onclick="startTogTest('keyboard')">Start Keyboard Test (use 1-9)</button>
                        <button onclick="resetTogTest()">Reset</button>
                    </div>

                    <div id="tog-arena" style="height: 250px; background: var(--bg); border-radius: 0.5rem; position: relative; margin-top: 1rem; display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); gap: 0.5rem; padding: 0.5rem;">
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="tog-mouse-time">-</div>
                            <div class="stat-label">Mouse Time</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tog-keyboard-time">-</div>
                            <div class="stat-label">Keyboard Time</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tog-mouse-feel">-</div>
                            <div class="stat-label">Mouse Felt</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tog-keyboard-feel">-</div>
                            <div class="stat-label">Keyboard Felt</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="tog-result">Run both tests to compare!</p>
                    </div>

                    <div class="insight">
                        Keyboard shortcuts feel faster because they require conscious attention. Mouse movements are automatic, making them feel "passive" - but they're often quicker!
                    </div>
                </div>
            </div>

            <!-- Solow Paradox -->
            <div class="paradox-card">
                <h3>Solow Paradox <span class="points">97 pts</span></h3>
                <p class="description">"You can see the computer age everywhere but in the productivity statistics." Despite massive IT investment, productivity gains have been disappointing.</p>

                <div class="simulator">
                    <h4>IT Investment vs Productivity</h4>

                    <div id="solow-chart" style="padding: 1rem; background: var(--bg); border-radius: 0.5rem;">
                        <canvas id="solow-canvas" width="600" height="250" style="width: 100%;"></canvas>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="drawSolowChart()">Animate Chart</button>
                    </div>

                    <div class="result">
                        <p>IT Spending Growth: <span style="color: var(--primary);">+2000%</span> (1980-2020)</p>
                        <p>Productivity Growth: <span style="color: var(--accent);">+50%</span> (same period)</p>
                    </div>

                    <div class="insight">
                        Possible explanations: measurement problems, lag time, distractions (email, social media), or computers replacing easy tasks leaving hard ones.
                    </div>
                </div>
            </div>
        </section>

        <!-- SCIENTIFIC PARADOXES -->
        <section id="scientific">
            <h2 class="category-title">Scientific & Philosophical Paradoxes</h2>

            <!-- Peto's Paradox -->
            <div class="paradox-card">
                <h3>Peto's Paradox <span class="points">142 pts</span></h3>
                <p class="description">Large animals like elephants should have much higher cancer rates (more cells = more chances for cancer), but they don't!</p>

                <div class="simulator">
                    <h4>Cancer Risk Calculator</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Compare expected vs actual cancer rates based on body size.</p>

                    <div id="peto-animals" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <div class="peto-animal" data-cells="37e12" data-expected="12" data-actual="25">
                            <div class="peto-icon">Human</div>
                            <div class="peto-cells">37 trillion cells</div>
                            <div class="peto-expected">Expected: 12%</div>
                            <div class="peto-actual">Actual: 25%</div>
                        </div>
                        <div class="peto-animal" data-cells="3e15" data-expected="80" data-actual="5">
                            <div class="peto-icon">Elephant</div>
                            <div class="peto-cells">3 quadrillion cells</div>
                            <div class="peto-expected">Expected: 80%+</div>
                            <div class="peto-actual actual-low">Actual: ~5%</div>
                        </div>
                        <div class="peto-animal" data-cells="1e16" data-expected="99" data-actual="2">
                            <div class="peto-icon">Blue Whale</div>
                            <div class="peto-cells">10 quadrillion cells</div>
                            <div class="peto-expected">Expected: 99%+</div>
                            <div class="peto-actual actual-low">Actual: ~2%</div>
                        </div>
                        <div class="peto-animal" data-cells="1e10" data-expected="3" data-actual="30">
                            <div class="peto-icon">Mouse</div>
                            <div class="peto-cells">10 billion cells</div>
                            <div class="peto-expected">Expected: 3%</div>
                            <div class="peto-actual actual-high">Actual: 30%+</div>
                        </div>
                    </div>

                    <div class="result">
                        <p>Elephants have 20 copies of the p53 tumor suppressor gene. Humans have only 2!</p>
                    </div>

                    <div class="insight">
                        Large, long-lived animals evolved enhanced cancer suppression. This paradox is helping develop new cancer treatments for humans.
                    </div>
                </div>

                <style>
                    .peto-animal {
                        background: var(--bg);
                        padding: 1rem;
                        border-radius: 0.5rem;
                        text-align: center;
                    }
                    .peto-icon {
                        font-size: 1.25rem;
                        font-weight: bold;
                        color: var(--primary);
                        margin-bottom: 0.5rem;
                    }
                    .peto-cells {
                        font-size: 0.75rem;
                        color: var(--muted);
                    }
                    .peto-expected {
                        color: #ef4444;
                        margin-top: 0.5rem;
                    }
                    .peto-actual {
                        color: var(--accent);
                        font-weight: bold;
                    }
                    .peto-actual.actual-low {
                        color: #22c55e;
                    }
                    .peto-actual.actual-high {
                        color: #ef4444;
                    }
                </style>
            </div>

            <!-- Efficient Market Paradox -->
            <div class="paradox-card">
                <h3>Efficient Market Paradox <span class="points">95 pts</span></h3>
                <p class="description">If markets are perfectly efficient, there's no point analyzing stocks. But if nobody analyzes, markets can't be efficient!</p>

                <div class="simulator">
                    <h4>Market Efficiency Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>% of Analysts Active</label>
                            <input type="range" id="market-analysts" min="0" max="100" value="50">
                            <span id="market-analysts-val">50%</span>
                        </div>
                        <button onclick="simulateMarket()">Run Simulation</button>
                    </div>

                    <canvas id="market-canvas" width="600" height="200" style="width: 100%; margin-top: 1rem; border-radius: 0.5rem;"></canvas>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="market-efficiency">50%</div>
                            <div class="stat-label">Market Efficiency</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="market-profit">$0</div>
                            <div class="stat-label">Analyst Avg Profit</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="market-worth">Maybe</div>
                            <div class="stat-label">Analysis Worth It?</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="market-explanation">The paradox: If everyone believes markets are efficient and stops analyzing, inefficiencies emerge. Analysis is only profitable when enough people DON'T analyze!</p>
                    </div>

                    <div class="insight">
                        This creates an equilibrium where just enough analysts exist to keep markets mostly-but-not-perfectly efficient.
                    </div>
                </div>
            </div>

            <!-- Tolerance Paradox (Popper) -->
            <div class="paradox-card">
                <h3>Tolerance Paradox <span class="points">147 pts</span></h3>
                <p class="description">A tolerant society must be intolerant of intolerance, otherwise the intolerant will destroy tolerance itself.</p>

                <div class="simulator">
                    <h4>Society Tolerance Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Tolerance Policy</label>
                            <select id="tolerance-policy" onchange="runToleranceSim()">
                                <option value="unlimited">Unlimited Tolerance</option>
                                <option value="paradox" selected>Tolerant (Popper's Rule)</option>
                                <option value="low">Low Tolerance</option>
                            </select>
                        </div>
                        <button onclick="runToleranceSim()">Simulate 50 Years</button>
                    </div>

                    <div id="tolerance-viz" style="margin-top: 1rem; padding: 1rem; background: var(--bg); border-radius: 0.5rem;">
                        <div id="tolerance-timeline" style="display: flex; gap: 2px; height: 100px; align-items: flex-end;"></div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="tolerance-final">0%</div>
                            <div class="stat-label">Society Tolerance (Final)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tolerance-intolerant">0%</div>
                            <div class="stat-label">Intolerant Population</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="tolerance-result">Select a policy and run the simulation.</p>
                    </div>

                    <div class="insight">
                        Karl Popper: "If we extend unlimited tolerance even to those who are intolerant... then the tolerant will be destroyed, and tolerance with them."
                    </div>
                </div>
            </div>
        </section>

        <!-- PROBABILITY PARADOXES (NEW) -->
        <section id="probability">
            <h2 class="category-title">Probability & Logic Paradoxes</h2>

            <!-- Birthday Paradox -->
            <div class="paradox-card">
                <h3>Birthday Paradox <span class="points">86 pts</span></h3>
                <p class="description">In a room of just 23 people, there's a 50% chance two share a birthday. With 70 people, it's 99.9% certain!</p>

                <div class="simulator">
                    <h4>Birthday Collision Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Number of People: <span id="birthday-count-val">23</span></label>
                            <input type="range" id="birthday-count" min="2" max="100" value="23" oninput="updateBirthdayProbability()">
                        </div>
                        <button onclick="simulateBirthdays()">Run 1000 Simulations</button>
                    </div>

                    <div class="birthday-visual">
                        <div id="birthday-calendar" class="birthday-calendar"></div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="birthday-theoretical">50.7%</div>
                            <div class="stat-label">Theoretical Probability</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="birthday-simulated">-</div>
                            <div class="stat-label">Simulated Result</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="birthday-intuition">~6%</div>
                            <div class="stat-label">Naive Intuition (n/365)</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="birthday-explanation">With 23 people, there are C(23,2) = 253 pairs to compare. Each pair has a 1/365 chance of matching. These chances compound!</p>
                    </div>

                    <div class="insight">
                        We think "what's the chance someone shares MY birthday" (low). The real question is "any two people" - and pairs grow quadratically!
                    </div>
                </div>

                <style>
                    .birthday-calendar {
                        display: grid;
                        grid-template-columns: repeat(20, 1fr);
                        gap: 2px;
                        padding: 1rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .birthday-day {
                        aspect-ratio: 1;
                        background: var(--card);
                        border-radius: 2px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.5rem;
                        transition: all 0.2s;
                    }
                    .birthday-day.occupied {
                        background: var(--primary);
                    }
                    .birthday-day.collision {
                        background: #ef4444;
                        animation: pulse 0.5s;
                    }
                    @keyframes pulse {
                        0%, 100% { transform: scale(1); }
                        50% { transform: scale(1.2); }
                    }
                </style>
            </div>

            <!-- Monty Hall Problem -->
            <div class="paradox-card">
                <h3>Monty Hall Problem <span class="points">Classic</span></h3>
                <p class="description">Pick a door. The host opens another door showing a goat. Should you switch? YES - switching gives you 2/3 odds!</p>

                <div class="simulator">
                    <h4>Let's Make a Deal!</h4>

                    <div id="monty-game" class="monty-game">
                        <div class="monty-doors">
                            <div class="monty-door" id="door-0" onclick="pickDoor(0)">
                                <div class="door-front">Door 1</div>
                                <div class="door-back" id="door-back-0"></div>
                            </div>
                            <div class="monty-door" id="door-1" onclick="pickDoor(1)">
                                <div class="door-front">Door 2</div>
                                <div class="door-back" id="door-back-1"></div>
                            </div>
                            <div class="monty-door" id="door-2" onclick="pickDoor(2)">
                                <div class="door-front">Door 3</div>
                                <div class="door-back" id="door-back-2"></div>
                            </div>
                        </div>
                        <p id="monty-message" style="text-align: center; margin-top: 1rem; color: var(--accent);">Pick a door!</p>
                        <div id="monty-choice" style="display: none; text-align: center; margin-top: 1rem;">
                            <button onclick="makeChoice('stay')">Stay</button>
                            <button onclick="makeChoice('switch')">Switch</button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="monty-stay-wins">0</div>
                            <div class="stat-label">Stay Wins</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="monty-switch-wins">0</div>
                            <div class="stat-label">Switch Wins</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="monty-stay-pct">0%</div>
                            <div class="stat-label">Stay Win Rate</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="monty-switch-pct">0%</div>
                            <div class="stat-label">Switch Win Rate</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="resetMonty()">New Game</button>
                        <button onclick="autoPlayMonty(100)">Auto-Play 100 Games</button>
                    </div>

                    <div class="insight">
                        Your initial pick has 1/3 chance. The other two doors together have 2/3. When Monty opens a goat door, that 2/3 concentrates on the remaining door!
                    </div>
                </div>

                <style>
                    .monty-game {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .monty-doors {
                        display: flex;
                        justify-content: center;
                        gap: 1rem;
                    }
                    .monty-door {
                        width: 100px;
                        height: 150px;
                        perspective: 1000px;
                        cursor: pointer;
                    }
                    .monty-door .door-front,
                    .monty-door .door-back {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        backface-visibility: hidden;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 0.5rem;
                        font-weight: bold;
                        transition: transform 0.6s;
                    }
                    .monty-door .door-front {
                        background: linear-gradient(135deg, #6366f1, #4f46e5);
                        border: 3px solid #818cf8;
                    }
                    .monty-door .door-back {
                        background: var(--card);
                        transform: rotateY(180deg);
                        font-size: 2rem;
                    }
                    .monty-door.opened .door-front {
                        transform: rotateY(-180deg);
                    }
                    .monty-door.opened .door-back {
                        transform: rotateY(0deg);
                    }
                    .monty-door.selected {
                        border: 3px solid var(--accent);
                        border-radius: 0.5rem;
                    }
                    .monty-door.disabled {
                        opacity: 0.5;
                        pointer-events: none;
                    }
                </style>
            </div>

            <!-- Berkson's Paradox -->
            <div class="paradox-card">
                <h3>Berkson's Paradox <span class="points">87 pts</span></h3>
                <p class="description">Selection bias creates false correlations. Among Hollywood actors, talent and attractiveness seem negatively correlated - but only because you need at least one to get selected!</p>

                <div class="simulator">
                    <h4>Hollywood Selection Simulator</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">People have random, independent Talent (T) and Attractiveness (A). Only those with T+A above threshold become famous.</p>

                    <div class="controls">
                        <div class="control-group">
                            <label>Selection Threshold: <span id="berkson-threshold-val">100</span></label>
                            <input type="range" id="berkson-threshold" min="50" max="150" value="100" oninput="updateBerkson()">
                        </div>
                        <button onclick="runBerkson()">Generate Population</button>
                    </div>

                    <canvas id="berkson-canvas" width="500" height="400" style="width: 100%; margin-top: 1rem; border-radius: 0.5rem;"></canvas>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="berkson-pop-corr">0.00</div>
                            <div class="stat-label">Population Correlation</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="berkson-sel-corr">-0.45</div>
                            <div class="stat-label">Selected Correlation</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="berkson-selected">0</div>
                            <div class="stat-label">Selected Count</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="berkson-explanation">In the full population, Talent and Attractiveness are independent (correlation ≈ 0). But among the selected, they appear negatively correlated!</p>
                    </div>

                    <div class="insight">
                        This explains many spurious correlations: "nice guys finish last" (among people you date), "successful people are jerks" (among those who got promoted).
                    </div>
                </div>
            </div>
        </section>

        <!-- INFINITY PARADOXES (NEW) -->
        <section id="infinity">
            <h2 class="category-title">Infinity & Measurement Paradoxes</h2>

            <!-- Zeno's Paradox -->
            <div class="paradox-card">
                <h3>Zeno's Paradox <span class="points">47 pts</span></h3>
                <p class="description">To reach a destination, you must first travel half the distance, then half of what remains, forever. How can you complete infinite steps?</p>

                <div class="simulator">
                    <h4>Achilles and the Tortoise</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Tortoise Head Start: <span id="zeno-headstart-val">10</span>m</label>
                            <input type="range" id="zeno-headstart" min="1" max="50" value="10">
                        </div>
                        <div class="control-group">
                            <label>Speed Ratio (Achilles/Tortoise): <span id="zeno-ratio-val">10</span>x</label>
                            <input type="range" id="zeno-ratio" min="2" max="20" value="10">
                        </div>
                        <button onclick="runZeno()">Start Race</button>
                        <button onclick="resetZeno()">Reset</button>
                    </div>

                    <div id="zeno-track" class="zeno-track">
                        <div class="zeno-runner achilles" id="zeno-achilles">A</div>
                        <div class="zeno-runner tortoise" id="zeno-tortoise">T</div>
                        <div class="zeno-markers" id="zeno-markers"></div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="zeno-steps">0</div>
                            <div class="stat-label">Steps Taken</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="zeno-distance">0m</div>
                            <div class="stat-label">Distance Covered</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="zeno-remaining">10m</div>
                            <div class="stat-label">Gap Remaining</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="zeno-catchup">11.11m</div>
                            <div class="stat-label">Catch-up Point</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="zeno-explanation">Each step halves the gap but never closes it... yet the infinite series 1/2 + 1/4 + 1/8 + ... = 1. Infinite steps, finite time!</p>
                    </div>

                    <div class="insight">
                        Resolution: Infinite processes CAN complete in finite time. The sum of an infinite geometric series can be finite.
                    </div>
                </div>

                <style>
                    .zeno-track {
                        position: relative;
                        height: 100px;
                        background: linear-gradient(to right, #22c55e 0%, #f59e0b 100%);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        overflow: hidden;
                    }
                    .zeno-runner {
                        position: absolute;
                        bottom: 10px;
                        width: 30px;
                        height: 30px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: bold;
                        transition: left 0.3s ease-out;
                    }
                    .zeno-runner.achilles {
                        background: #6366f1;
                        left: 0;
                    }
                    .zeno-runner.tortoise {
                        background: #78350f;
                        left: 20%;
                    }
                    .zeno-markers {
                        position: absolute;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                    }
                    .zeno-marker {
                        position: absolute;
                        top: 0;
                        bottom: 0;
                        width: 2px;
                        background: rgba(255,255,255,0.5);
                    }
                </style>
            </div>

            <!-- Coastline Paradox -->
            <div class="paradox-card">
                <h3>Coastline Paradox <span class="points">63 pts</span></h3>
                <p class="description">The length of a coastline depends on the ruler size! Smaller rulers reveal more detail, making the coast infinitely long.</p>

                <div class="simulator">
                    <h4>Fractal Coastline Measurer</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Ruler Size: <span id="coastline-ruler-val">50</span> km</label>
                            <input type="range" id="coastline-ruler" min="5" max="100" value="50" oninput="measureCoastline()">
                        </div>
                    </div>

                    <canvas id="coastline-canvas" width="600" height="300" style="width: 100%; margin-top: 1rem; border-radius: 0.5rem; background: #1e3a5f;"></canvas>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="coastline-length">0 km</div>
                            <div class="stat-label">Measured Length</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="coastline-segments">0</div>
                            <div class="stat-label">Ruler Segments</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="coastline-dimension">1.25</div>
                            <div class="stat-label">Fractal Dimension</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="coastline-explanation">Britain's coast is ~12,400 km with a 50km ruler, but ~17,800 km with a 10km ruler. There's no "true" length!</p>
                    </div>

                    <div class="insight">
                        Benoit Mandelbrot used coastlines to introduce fractal geometry. Real coastlines have fractal dimension ~1.2, meaning they're "more than a line but less than a plane."
                    </div>
                </div>
            </div>

            <!-- Hilbert's Hotel -->
            <div class="paradox-card">
                <h3>Hilbert's Hotel <span class="points">60 pts</span></h3>
                <p class="description">A hotel with infinite rooms, all full, can still accommodate infinitely many new guests!</p>

                <div class="simulator">
                    <h4>Infinite Hotel Manager</h4>

                    <div class="controls">
                        <button onclick="hilbertAddOne()">+1 Guest Arrives</button>
                        <button onclick="hilbertAddInfinite()">+∞ Guests Arrive</button>
                        <button onclick="hilbertReset()">Reset Hotel</button>
                    </div>

                    <div id="hilbert-hotel" class="hilbert-hotel">
                        <div class="hilbert-rooms" id="hilbert-rooms"></div>
                        <div class="hilbert-info">
                            <span>Rooms: ∞</span>
                            <span>Occupied: <span id="hilbert-occupied">∞</span></span>
                            <span>Vacant: <span id="hilbert-vacant">0</span></span>
                        </div>
                    </div>

                    <div id="hilbert-animation" style="margin-top: 1rem; padding: 1rem; background: var(--bg); border-radius: 0.5rem; min-height: 60px;">
                        <p id="hilbert-message">The Grand Hotel is full. Every room has a guest.</p>
                    </div>

                    <div class="result">
                        <p>Operations performed: <span id="hilbert-ops">0</span></p>
                    </div>

                    <div class="insight">
                        This demonstrates that ∞ + 1 = ∞ and ∞ + ∞ = ∞. Countable infinities have surprising properties that defy our finite intuition.
                    </div>
                </div>

                <style>
                    .hilbert-hotel {
                        padding: 1rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .hilbert-rooms {
                        display: flex;
                        gap: 4px;
                        overflow-x: auto;
                        padding: 1rem 0;
                    }
                    .hilbert-room {
                        min-width: 40px;
                        height: 50px;
                        background: var(--primary);
                        border-radius: 4px;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.7rem;
                        transition: all 0.3s;
                    }
                    .hilbert-room.moving {
                        animation: roomShift 0.5s ease;
                    }
                    .hilbert-room .room-num {
                        font-weight: bold;
                    }
                    .hilbert-room .guest {
                        font-size: 1rem;
                    }
                    .hilbert-info {
                        display: flex;
                        justify-content: space-around;
                        color: var(--muted);
                        font-size: 0.875rem;
                    }
                    @keyframes roomShift {
                        0% { transform: translateX(-40px); opacity: 0; }
                        100% { transform: translateX(0); opacity: 1; }
                    }
                </style>
            </div>
        </section>

        <script>
            // Birthday Paradox
            function updateBirthdayProbability() {
                const n = parseInt(document.getElementById('birthday-count').value);
                document.getElementById('birthday-count-val').textContent = n;

                // Calculate theoretical probability
                let probNoMatch = 1;
                for (let i = 0; i < n; i++) {
                    probNoMatch *= (365 - i) / 365;
                }
                const probMatch = (1 - probNoMatch) * 100;

                document.getElementById('birthday-theoretical').textContent = probMatch.toFixed(1) + '%';
                document.getElementById('birthday-intuition').textContent = (n / 365 * 100).toFixed(1) + '%';

                const pairs = n * (n - 1) / 2;
                document.getElementById('birthday-explanation').textContent =
                    `With ${n} people, there are C(${n},2) = ${pairs} pairs to compare. The probability compounds with each pair!`;
            }

            function simulateBirthdays() {
                const n = parseInt(document.getElementById('birthday-count').value);
                let matches = 0;
                const trials = 1000;

                for (let t = 0; t < trials; t++) {
                    const birthdays = new Set();
                    let hasMatch = false;
                    for (let i = 0; i < n; i++) {
                        const day = Math.floor(Math.random() * 365);
                        if (birthdays.has(day)) {
                            hasMatch = true;
                            break;
                        }
                        birthdays.add(day);
                    }
                    if (hasMatch) matches++;
                }

                document.getElementById('birthday-simulated').textContent = (matches / trials * 100).toFixed(1) + '%';

                // Visualize last trial
                visualizeBirthdays(n);
            }

            function visualizeBirthdays(n) {
                const calendar = document.getElementById('birthday-calendar');
                calendar.innerHTML = '';

                const birthdays = [];
                const counts = new Array(365).fill(0);

                for (let i = 0; i < n; i++) {
                    const day = Math.floor(Math.random() * 365);
                    birthdays.push(day);
                    counts[day]++;
                }

                for (let d = 0; d < 365; d++) {
                    const div = document.createElement('div');
                    div.className = 'birthday-day';
                    if (counts[d] === 1) div.classList.add('occupied');
                    if (counts[d] > 1) div.classList.add('collision');
                    calendar.appendChild(div);
                }
            }

            // Monty Hall
            let montyState = { carDoor: 0, playerPick: -1, openedDoor: -1, phase: 'pick' };
            let montyStats = { stayWins: 0, switchWins: 0, stayTotal: 0, switchTotal: 0 };

            function resetMonty() {
                montyState = {
                    carDoor: Math.floor(Math.random() * 3),
                    playerPick: -1,
                    openedDoor: -1,
                    phase: 'pick'
                };

                for (let i = 0; i < 3; i++) {
                    const door = document.getElementById(`door-${i}`);
                    door.classList.remove('opened', 'selected', 'disabled');
                    document.getElementById(`door-back-${i}`).textContent = '';
                }

                document.getElementById('monty-message').textContent = 'Pick a door!';
                document.getElementById('monty-choice').style.display = 'none';
            }

            function pickDoor(doorNum) {
                if (montyState.phase !== 'pick') return;

                montyState.playerPick = doorNum;
                document.getElementById(`door-${doorNum}`).classList.add('selected');

                // Monty opens a door with a goat (not player's pick, not car)
                const options = [0, 1, 2].filter(d => d !== doorNum && d !== montyState.carDoor);
                montyState.openedDoor = options[Math.floor(Math.random() * options.length)];

                // Show goat behind opened door
                const openedDoor = document.getElementById(`door-${montyState.openedDoor}`);
                document.getElementById(`door-back-${montyState.openedDoor}`).textContent = '🐐';
                openedDoor.classList.add('opened', 'disabled');

                montyState.phase = 'choose';
                document.getElementById('monty-message').textContent = `Door ${montyState.openedDoor + 1} has a goat! Do you want to stay or switch?`;
                document.getElementById('monty-choice').style.display = 'block';
            }

            function makeChoice(choice) {
                if (montyState.phase !== 'choose') return;

                const finalPick = choice === 'stay' ? montyState.playerPick :
                    [0, 1, 2].find(d => d !== montyState.playerPick && d !== montyState.openedDoor);

                // Reveal all doors
                for (let i = 0; i < 3; i++) {
                    const back = document.getElementById(`door-back-${i}`);
                    back.textContent = i === montyState.carDoor ? '🚗' : '🐐';
                    document.getElementById(`door-${i}`).classList.add('opened');
                }

                const won = finalPick === montyState.carDoor;

                if (choice === 'stay') {
                    montyStats.stayTotal++;
                    if (won) montyStats.stayWins++;
                } else {
                    montyStats.switchTotal++;
                    if (won) montyStats.switchWins++;
                }

                updateMontyStats();

                document.getElementById('monty-message').textContent = won ?
                    `You ${choice === 'stay' ? 'stayed' : 'switched'} and WON the car!` :
                    `You ${choice === 'stay' ? 'stayed' : 'switched'} and got a goat.`;
                document.getElementById('monty-choice').style.display = 'none';
                montyState.phase = 'done';
            }

            function updateMontyStats() {
                document.getElementById('monty-stay-wins').textContent = montyStats.stayWins;
                document.getElementById('monty-switch-wins').textContent = montyStats.switchWins;
                document.getElementById('monty-stay-pct').textContent =
                    montyStats.stayTotal > 0 ? (montyStats.stayWins / montyStats.stayTotal * 100).toFixed(1) + '%' : '0%';
                document.getElementById('monty-switch-pct').textContent =
                    montyStats.switchTotal > 0 ? (montyStats.switchWins / montyStats.switchTotal * 100).toFixed(1) + '%' : '0%';
            }

            function autoPlayMonty(games) {
                for (let i = 0; i < games; i++) {
                    const carDoor = Math.floor(Math.random() * 3);
                    const playerPick = Math.floor(Math.random() * 3);

                    // Stay strategy
                    montyStats.stayTotal++;
                    if (playerPick === carDoor) montyStats.stayWins++;

                    // Switch strategy
                    montyStats.switchTotal++;
                    if (playerPick !== carDoor) montyStats.switchWins++;
                }
                updateMontyStats();
            }

            // Berkson's Paradox
            function updateBerkson() {
                document.getElementById('berkson-threshold-val').textContent =
                    document.getElementById('berkson-threshold').value;
            }

            function runBerkson() {
                const threshold = parseInt(document.getElementById('berkson-threshold').value);
                const canvas = document.getElementById('berkson-canvas');
                const ctx = canvas.getContext('2d');
                const w = canvas.width, h = canvas.height;

                ctx.fillStyle = '#0f172a';
                ctx.fillRect(0, 0, w, h);

                // Generate population
                const population = [];
                const selected = [];

                for (let i = 0; i < 500; i++) {
                    const talent = Math.random() * 100;
                    const attractiveness = Math.random() * 100;
                    population.push({ t: talent, a: attractiveness });

                    if (talent + attractiveness >= threshold) {
                        selected.push({ t: talent, a: attractiveness });
                    }
                }

                // Draw axes
                ctx.strokeStyle = '#64748b';
                ctx.beginPath();
                ctx.moveTo(50, h - 50);
                ctx.lineTo(w - 20, h - 50);
                ctx.moveTo(50, h - 50);
                ctx.lineTo(50, 20);
                ctx.stroke();

                ctx.fillStyle = '#64748b';
                ctx.font = '12px sans-serif';
                ctx.fillText('Talent →', w - 80, h - 30);
                ctx.save();
                ctx.translate(20, h / 2);
                ctx.rotate(-Math.PI / 2);
                ctx.fillText('Attractiveness →', 0, 0);
                ctx.restore();

                // Draw threshold line
                ctx.strokeStyle = 'rgba(245, 158, 11, 0.5)';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                const x1 = 50, y1 = h - 50 - (threshold - 0) * (h - 70) / 100;
                const x2 = 50 + threshold * (w - 70) / 100, y2 = h - 50;
                ctx.moveTo(x1, Math.max(20, y1));
                ctx.lineTo(Math.min(w - 20, x2), y2);
                ctx.stroke();
                ctx.setLineDash([]);

                // Draw population (gray)
                population.forEach(p => {
                    const x = 50 + p.t * (w - 70) / 100;
                    const y = h - 50 - p.a * (h - 70) / 100;
                    ctx.beginPath();
                    ctx.arc(x, y, 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(100, 116, 139, 0.3)';
                    ctx.fill();
                });

                // Draw selected (colored)
                selected.forEach(p => {
                    const x = 50 + p.t * (w - 70) / 100;
                    const y = h - 50 - p.a * (h - 70) / 100;
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fillStyle = '#6366f1';
                    ctx.fill();
                });

                // Calculate correlations
                const popCorr = correlation(population.map(p => p.t), population.map(p => p.a));
                const selCorr = selected.length > 2 ?
                    correlation(selected.map(p => p.t), selected.map(p => p.a)) : 0;

                document.getElementById('berkson-pop-corr').textContent = popCorr.toFixed(2);
                document.getElementById('berkson-sel-corr').textContent = selCorr.toFixed(2);
                document.getElementById('berkson-sel-corr').style.color = selCorr < -0.2 ? '#ef4444' : 'var(--accent)';
                document.getElementById('berkson-selected').textContent = selected.length;
            }

            function correlation(x, y) {
                const n = x.length;
                const sumX = x.reduce((a, b) => a + b, 0);
                const sumY = y.reduce((a, b) => a + b, 0);
                const sumXY = x.reduce((total, xi, i) => total + xi * y[i], 0);
                const sumX2 = x.reduce((total, xi) => total + xi * xi, 0);
                const sumY2 = y.reduce((total, yi) => total + yi * yi, 0);

                const num = n * sumXY - sumX * sumY;
                const den = Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));

                return den === 0 ? 0 : num / den;
            }

            // Zeno's Paradox
            let zenoInterval = null;

            function runZeno() {
                if (zenoInterval) clearInterval(zenoInterval);

                const headStart = parseFloat(document.getElementById('zeno-headstart').value);
                const ratio = parseFloat(document.getElementById('zeno-ratio').value);

                document.getElementById('zeno-headstart-val').textContent = headStart;
                document.getElementById('zeno-ratio-val').textContent = ratio;

                const catchupPoint = headStart * ratio / (ratio - 1);
                document.getElementById('zeno-catchup').textContent = catchupPoint.toFixed(2) + 'm';

                let achillesPos = 0;
                let tortoisePos = headStart;
                let steps = 0;
                const markers = document.getElementById('zeno-markers');
                markers.innerHTML = '';

                zenoInterval = setInterval(() => {
                    steps++;
                    const gap = tortoisePos - achillesPos;

                    if (gap < 0.001 || steps > 50) {
                        clearInterval(zenoInterval);
                        document.getElementById('zeno-explanation').textContent =
                            `After ${steps} steps, Achilles catches the tortoise! The infinite series converges to a finite value.`;
                        return;
                    }

                    // Achilles runs to where tortoise was
                    achillesPos = tortoisePos;
                    // Tortoise moves forward
                    tortoisePos += gap / ratio;

                    // Update positions (scale to percentage of track)
                    const maxPos = catchupPoint * 1.2;
                    document.getElementById('zeno-achilles').style.left = (achillesPos / maxPos * 90) + '%';
                    document.getElementById('zeno-tortoise').style.left = (tortoisePos / maxPos * 90) + '%';

                    // Add marker
                    const marker = document.createElement('div');
                    marker.className = 'zeno-marker';
                    marker.style.left = (achillesPos / maxPos * 90) + '%';
                    markers.appendChild(marker);

                    document.getElementById('zeno-steps').textContent = steps;
                    document.getElementById('zeno-distance').textContent = achillesPos.toFixed(4) + 'm';
                    document.getElementById('zeno-remaining').textContent = (tortoisePos - achillesPos).toFixed(6) + 'm';
                }, 300);
            }

            function resetZeno() {
                if (zenoInterval) clearInterval(zenoInterval);
                document.getElementById('zeno-achilles').style.left = '0';
                document.getElementById('zeno-tortoise').style.left = '20%';
                document.getElementById('zeno-markers').innerHTML = '';
                document.getElementById('zeno-steps').textContent = '0';
                document.getElementById('zeno-distance').textContent = '0m';
                document.getElementById('zeno-remaining').textContent = '10m';
            }

            // Coastline Paradox
            function measureCoastline() {
                const rulerSize = parseInt(document.getElementById('coastline-ruler').value);
                document.getElementById('coastline-ruler-val').textContent = rulerSize;

                const canvas = document.getElementById('coastline-canvas');
                const ctx = canvas.getContext('2d');
                const w = canvas.width, h = canvas.height;

                ctx.fillStyle = '#1e3a5f';
                ctx.fillRect(0, 0, w, h);

                // Generate fractal coastline
                const points = generateCoastline(w, h, rulerSize);

                // Draw land
                ctx.fillStyle = '#22c55e';
                ctx.beginPath();
                ctx.moveTo(0, h);
                points.forEach(p => ctx.lineTo(p.x, p.y));
                ctx.lineTo(w, h);
                ctx.closePath();
                ctx.fill();

                // Measure with ruler
                let totalLength = 0;
                let segments = 0;

                ctx.strokeStyle = '#ef4444';
                ctx.lineWidth = 2;
                ctx.beginPath();

                let i = 0;
                while (i < points.length - 1) {
                    let j = i + 1;
                    let dist = 0;

                    // Find point approximately rulerSize away
                    while (j < points.length && dist < rulerSize * 3) {
                        const dx = points[j].x - points[i].x;
                        const dy = points[j].y - points[i].y;
                        dist = Math.sqrt(dx * dx + dy * dy);
                        j++;
                    }

                    if (j < points.length) {
                        ctx.moveTo(points[i].x, points[i].y);
                        ctx.lineTo(points[j - 1].x, points[j - 1].y);
                        totalLength += dist;
                        segments++;
                        i = j - 1;
                    } else {
                        break;
                    }
                }
                ctx.stroke();

                // Scale to "km"
                const scaledLength = Math.round(totalLength * (200 / rulerSize));

                document.getElementById('coastline-length').textContent = scaledLength.toLocaleString() + ' km';
                document.getElementById('coastline-segments').textContent = segments;

                document.getElementById('coastline-explanation').textContent =
                    `With a ${rulerSize}km ruler, the coast measures ~${scaledLength.toLocaleString()}km. Smaller rulers reveal more detail!`;
            }

            function generateCoastline(w, h, detail) {
                const points = [];
                const roughness = 0.5;
                const iterations = Math.max(3, Math.floor(7 - detail / 20));

                // Start with basic line
                let line = [
                    { x: 0, y: h * 0.5 },
                    { x: w, y: h * 0.5 }
                ];

                // Midpoint displacement
                for (let iter = 0; iter < iterations; iter++) {
                    const newLine = [];
                    for (let i = 0; i < line.length - 1; i++) {
                        newLine.push(line[i]);
                        const midX = (line[i].x + line[i + 1].x) / 2;
                        const midY = (line[i].y + line[i + 1].y) / 2;
                        const displacement = (Math.random() - 0.5) * h * roughness / Math.pow(2, iter);
                        newLine.push({ x: midX, y: midY + displacement });
                    }
                    newLine.push(line[line.length - 1]);
                    line = newLine;
                }

                return line;
            }

            // Hilbert's Hotel
            let hilbertOps = 0;

            function hilbertReset() {
                hilbertOps = 0;
                document.getElementById('hilbert-ops').textContent = '0';
                document.getElementById('hilbert-occupied').textContent = '∞';
                document.getElementById('hilbert-vacant').textContent = '0';
                document.getElementById('hilbert-message').textContent = 'The Grand Hotel is full. Every room has a guest.';
                renderHilbertRooms();
            }

            function renderHilbertRooms() {
                const container = document.getElementById('hilbert-rooms');
                container.innerHTML = '';
                for (let i = 1; i <= 15; i++) {
                    const room = document.createElement('div');
                    room.className = 'hilbert-room';
                    room.innerHTML = `<span class="room-num">${i}</span><span class="guest">👤</span>`;
                    container.appendChild(room);
                }
                const ellipsis = document.createElement('div');
                ellipsis.className = 'hilbert-room';
                ellipsis.innerHTML = '<span>...</span><span>∞</span>';
                container.appendChild(ellipsis);
            }

            function hilbertAddOne() {
                hilbertOps++;
                document.getElementById('hilbert-ops').textContent = hilbertOps;
                document.getElementById('hilbert-message').innerHTML =
                    'A new guest arrives! <br>Solution: Move guest n to room n+1. Room 1 is now free!';

                const rooms = document.querySelectorAll('.hilbert-room');
                rooms.forEach(r => r.classList.add('moving'));
                setTimeout(() => rooms.forEach(r => r.classList.remove('moving')), 500);
            }

            function hilbertAddInfinite() {
                hilbertOps++;
                document.getElementById('hilbert-ops').textContent = hilbertOps;
                document.getElementById('hilbert-message').innerHTML =
                    'Infinitely many new guests arrive! <br>Solution: Move guest n to room 2n. All odd rooms are now free!';

                const rooms = document.querySelectorAll('.hilbert-room');
                rooms.forEach(r => r.classList.add('moving'));
                setTimeout(() => rooms.forEach(r => r.classList.remove('moving')), 500);
            }

            // Initialize new simulators
            window.addEventListener('load', () => {
                updateBirthdayProbability();
                visualizeBirthdays(23);
                resetMonty();
                runBerkson();
                measureCoastline();
                hilbertReset();
            });
        </script>

        <!-- RELATIVITY & ADVANCED PARADOXES (NEW from pages 6-10) -->
        <section id="advanced">
            <h2 class="category-title">Relativity & Advanced Paradoxes</h2>

            <!-- Two Envelopes Paradox -->
            <div class="paradox-card">
                <h3>Two Envelopes Paradox <span class="points">43 pts</span></h3>
                <p class="description">Two envelopes - one has twice as much money. You pick one. Should you switch? The math says always switch... but that can't be right!</p>

                <div class="simulator">
                    <h4>Envelope Switching Game</h4>

                    <div id="envelope-game" class="envelope-game">
                        <div class="envelopes">
                            <div class="envelope" id="env-a" onclick="pickEnvelope('a')">
                                <div class="envelope-front">A</div>
                                <div class="envelope-amount" id="env-a-amount">?</div>
                            </div>
                            <div class="envelope" id="env-b" onclick="pickEnvelope('b')">
                                <div class="envelope-front">B</div>
                                <div class="envelope-amount" id="env-b-amount">?</div>
                            </div>
                        </div>
                        <p id="envelope-message" style="text-align: center; margin-top: 1rem;">Pick an envelope!</p>
                        <div id="envelope-choice" style="display: none; text-align: center; margin-top: 1rem;">
                            <button onclick="envelopeDecision('keep')">Keep</button>
                            <button onclick="envelopeDecision('switch')">Switch</button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="env-keep-total">$0</div>
                            <div class="stat-label">Keep Total</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="env-switch-total">$0</div>
                            <div class="stat-label">Switch Total</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="env-games">0</div>
                            <div class="stat-label">Games Played</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="resetEnvelope()">New Game</button>
                        <button onclick="autoPlayEnvelope(100)">Auto-Play 100</button>
                    </div>

                    <div class="result">
                        <p id="envelope-paradox">The fallacy: You can't use the SAME variable X for both "your envelope has X" AND for expected value calculations. The amounts are correlated!</p>
                    </div>

                    <div class="insight">
                        The paradox reveals how easily we can be fooled by probabilistic reasoning when we conflate different reference points.
                    </div>
                </div>

                <style>
                    .envelope-game {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .envelopes {
                        display: flex;
                        justify-content: center;
                        gap: 2rem;
                    }
                    .envelope {
                        width: 120px;
                        height: 80px;
                        background: linear-gradient(135deg, #f59e0b, #d97706);
                        border-radius: 0.5rem;
                        cursor: pointer;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.3s;
                        position: relative;
                    }
                    .envelope:hover {
                        transform: scale(1.05);
                    }
                    .envelope.selected {
                        border: 3px solid #22c55e;
                    }
                    .envelope.revealed .envelope-amount {
                        opacity: 1;
                    }
                    .envelope-front {
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: white;
                    }
                    .envelope-amount {
                        font-size: 1.25rem;
                        font-weight: bold;
                        color: white;
                        opacity: 0;
                        transition: opacity 0.3s;
                    }
                </style>
            </div>

            <!-- Boy/Girl Paradox -->
            <div class="paradox-card">
                <h3>Boy/Girl Paradox <span class="points">8 pts</span></h3>
                <p class="description">"I have two children. At least one is a boy." What's the probability both are boys? Intuition says 1/2, but it's 1/3!</p>

                <div class="simulator">
                    <h4>Two-Child Family Simulator</h4>

                    <div class="controls">
                        <button onclick="simulateBoyGirl(1000)">Simulate 1000 Families</button>
                        <button onclick="resetBoyGirl()">Reset</button>
                    </div>

                    <div id="boygirl-families" style="display: flex; flex-wrap: wrap; gap: 4px; padding: 1rem; background: var(--bg); border-radius: 0.5rem; margin-top: 1rem; max-height: 200px; overflow-y: auto;">
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="bg-total">0</div>
                            <div class="stat-label">Families with ≥1 Boy</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="bg-both">0</div>
                            <div class="stat-label">Both Boys</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="bg-pct">0%</div>
                            <div class="stat-label">P(Both Boys | ≥1 Boy)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">33.3%</div>
                            <div class="stat-label">Theoretical</div>
                        </div>
                    </div>

                    <div class="result">
                        <p>Possible families: BB, BG, GB, GG. Given "at least one boy," GG is eliminated. Of BB, BG, GB, only BB has both boys = 1/3.</p>
                    </div>

                    <div class="insight">
                        Compare to: "My OLDER child is a boy" → P(both boys) = 1/2. The phrasing completely changes the answer!
                    </div>
                </div>
            </div>

            <!-- Ant on Rubber Rope -->
            <div class="paradox-card">
                <h3>Ant on a Rubber Rope <span class="points">9 pts</span></h3>
                <p class="description">An ant crawls 1 cm/s on a rubber rope that stretches 1 km/s. Will it ever reach the end? Impossibly, YES!</p>

                <div class="simulator">
                    <h4>Rubber Rope Race</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Ant Speed: <span id="ant-speed-val">1</span> cm/s</label>
                            <input type="range" id="ant-speed" min="1" max="10" value="1">
                        </div>
                        <div class="control-group">
                            <label>Stretch Rate: <span id="rope-stretch-val">100</span> cm/s</label>
                            <input type="range" id="rope-stretch" min="10" max="500" value="100">
                        </div>
                        <button onclick="startAntRace()">Start</button>
                        <button onclick="resetAntRace()">Reset</button>
                    </div>

                    <div id="ant-rope" class="ant-rope">
                        <div class="ant" id="ant-position">🐜</div>
                        <div class="rope-end">END</div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="ant-progress">0%</div>
                            <div class="stat-label">Progress (%)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ant-distance">0 cm</div>
                            <div class="stat-label">Ant Position</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="rope-length">100 cm</div>
                            <div class="stat-label">Rope Length</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ant-time">0s</div>
                            <div class="stat-label">Time Elapsed</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="ant-explanation">The ant's fractional progress = sum of 1/(1+k×stretch/speed). This harmonic series diverges, so the ant eventually reaches 100%!</p>
                    </div>

                    <div class="insight">
                        Even though the rope grows infinitely, the ant's fractional progress follows a harmonic series that diverges to infinity. Math beats intuition!
                    </div>
                </div>

                <style>
                    .ant-rope {
                        position: relative;
                        height: 60px;
                        background: linear-gradient(90deg, #78350f, #a16207);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        display: flex;
                        align-items: center;
                    }
                    .ant {
                        position: absolute;
                        font-size: 1.5rem;
                        left: 0;
                        transition: left 0.1s linear;
                    }
                    .rope-end {
                        position: absolute;
                        right: 10px;
                        color: white;
                        font-weight: bold;
                    }
                </style>
            </div>

            <!-- Ladder Paradox -->
            <div class="paradox-card">
                <h3>Ladder Paradox <span class="points">31 pts</span></h3>
                <p class="description">A 20-foot ladder moves at 0.9c. Can it fit in a 10-foot garage? From the garage's view: YES. From the ladder's view: the garage is even SHORTER! Both are correct!</p>

                <div class="simulator">
                    <h4>Relativistic Length Contraction</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Velocity: <span id="ladder-v-val">0.9</span>c</label>
                            <input type="range" id="ladder-v" min="0" max="99" value="90" oninput="updateLadder()">
                        </div>
                    </div>

                    <div class="ladder-viz">
                        <div class="frame-view">
                            <h5>Garage's Frame</h5>
                            <div class="garage-frame">
                                <div class="garage-box">Garage: 10 ft</div>
                                <div class="ladder-box" id="ladder-garage-frame">Ladder: <span id="ladder-contracted">5.6</span> ft</div>
                            </div>
                            <p id="garage-verdict" style="color: #22c55e; text-align: center;">✓ Ladder fits!</p>
                        </div>
                        <div class="frame-view">
                            <h5>Ladder's Frame</h5>
                            <div class="garage-frame">
                                <div class="garage-box" id="garage-contracted-box">Garage: <span id="garage-contracted">4.4</span> ft</div>
                                <div class="ladder-box ladder-rest">Ladder: 20 ft</div>
                            </div>
                            <p id="ladder-verdict" style="color: #ef4444; text-align: center;">✗ Ladder doesn't fit!</p>
                        </div>
                    </div>

                    <div class="result">
                        <p>Lorentz factor γ = <span id="ladder-gamma">2.29</span></p>
                        <p id="ladder-explanation">Both frames are correct! The resolution: "fitting" depends on simultaneity. The ladder's ends don't enter/exit at the same time in both frames.</p>
                    </div>

                    <div class="insight">
                        This paradox demonstrates that simultaneity is relative. Events that are simultaneous in one frame aren't simultaneous in another.
                    </div>
                </div>

                <style>
                    .ladder-viz {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 1rem;
                        padding: 1rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .frame-view h5 {
                        text-align: center;
                        color: var(--accent);
                        margin-bottom: 0.5rem;
                    }
                    .garage-frame {
                        position: relative;
                        height: 100px;
                        border: 2px dashed var(--muted);
                        border-radius: 0.5rem;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        padding: 0.5rem;
                    }
                    .garage-box {
                        background: var(--card);
                        padding: 0.5rem;
                        border-radius: 0.25rem;
                        text-align: center;
                        margin-bottom: 0.5rem;
                    }
                    .ladder-box {
                        background: var(--primary);
                        padding: 0.5rem;
                        border-radius: 0.25rem;
                        text-align: center;
                        transition: width 0.3s;
                    }
                    .ladder-box.ladder-rest {
                        width: 100%;
                    }
                    @media (max-width: 600px) {
                        .ladder-viz {
                            grid-template-columns: 1fr;
                        }
                    }
                </style>
            </div>

            <!-- Tea Leaf Paradox -->
            <div class="paradox-card">
                <h3>Tea Leaf Paradox <span class="points">12 pts</span></h3>
                <p class="description">When you stir tea, why do the leaves gather in the CENTER, not the edges? Centrifugal force should push them out!</p>

                <div class="simulator">
                    <h4>Einstein's Tea Cup</h4>

                    <div class="controls">
                        <button onclick="stirTea()">Stir Tea</button>
                        <button onclick="resetTea()">Reset</button>
                    </div>

                    <div class="tea-cup-container">
                        <div class="tea-cup" id="tea-cup">
                            <div class="tea-surface" id="tea-surface"></div>
                            <div class="tea-leaves" id="tea-leaves"></div>
                        </div>
                        <div class="flow-arrows" id="flow-arrows"></div>
                    </div>

                    <div class="result">
                        <p id="tea-explanation">The rotating water creates a SECONDARY flow: faster at top (lower pressure) → water curves down at edges → along bottom toward center → carries leaves inward!</p>
                    </div>

                    <div class="insight">
                        Einstein used this to explain river erosion and why river bends get more extreme. The same physics explains why tea leaves cluster at the center.
                    </div>
                </div>

                <style>
                    .tea-cup-container {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .tea-cup {
                        width: 200px;
                        height: 200px;
                        border-radius: 50%;
                        background: linear-gradient(135deg, #78350f 0%, #92400e 100%);
                        position: relative;
                        overflow: hidden;
                        border: 8px solid #57534e;
                    }
                    .tea-surface {
                        position: absolute;
                        inset: 10px;
                        border-radius: 50%;
                        background: radial-gradient(circle, #854d0e 0%, #713f12 100%);
                    }
                    .tea-leaves {
                        position: absolute;
                        inset: 0;
                        display: flex;
                        flex-wrap: wrap;
                        justify-content: center;
                        align-items: center;
                    }
                    .leaf {
                        position: absolute;
                        width: 6px;
                        height: 6px;
                        background: #15803d;
                        border-radius: 50%;
                        transition: all 2s ease-out;
                    }
                    .tea-cup.stirring .tea-surface {
                        animation: rotate 1s linear infinite;
                    }
                    @keyframes rotate {
                        from { transform: rotate(0deg); }
                        to { transform: rotate(360deg); }
                    }
                </style>
            </div>

            <!-- Russell's Paradox -->
            <div class="paradox-card">
                <h3>Russell's Paradox <span class="points">15 pts</span></h3>
                <p class="description">Consider the set of all sets that don't contain themselves. Does it contain itself? If yes, then no. If no, then yes!</p>

                <div class="simulator">
                    <h4>The Barber's Dilemma</h4>
                    <p style="margin-bottom: 1rem; color: var(--muted);">A barber shaves everyone who doesn't shave themselves. Does the barber shave himself?</p>

                    <div class="controls">
                        <button onclick="russellYes()">Yes, he shaves himself</button>
                        <button onclick="russellNo()">No, he doesn't</button>
                        <button onclick="russellReset()">Reset</button>
                    </div>

                    <div id="russell-viz" class="russell-viz">
                        <div class="set-container">
                            <div class="set-circle" id="set-self">
                                <div class="set-label">People who shave themselves</div>
                                <div class="set-members" id="self-members"></div>
                            </div>
                            <div class="set-circle" id="set-barber">
                                <div class="set-label">People shaved by barber</div>
                                <div class="set-members" id="barber-members"></div>
                            </div>
                        </div>
                        <div class="barber-icon" id="barber-icon">💈</div>
                    </div>

                    <div class="result">
                        <p id="russell-result">Click a button to explore the paradox...</p>
                    </div>

                    <div class="insight">
                        This paradox shook the foundations of set theory and mathematics. It led to the development of axiomatic set theory to avoid such contradictions.
                    </div>
                </div>

                <style>
                    .russell-viz {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        position: relative;
                    }
                    .set-container {
                        display: flex;
                        gap: 2rem;
                        justify-content: center;
                    }
                    .set-circle {
                        width: 180px;
                        height: 180px;
                        border: 3px dashed var(--muted);
                        border-radius: 50%;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        padding: 1rem;
                        transition: all 0.3s;
                    }
                    .set-circle.highlight {
                        border-color: #ef4444;
                        background: rgba(239, 68, 68, 0.1);
                    }
                    .set-label {
                        font-size: 0.75rem;
                        text-align: center;
                        color: var(--muted);
                        margin-bottom: 0.5rem;
                    }
                    .set-members {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 4px;
                        justify-content: center;
                    }
                    .member {
                        font-size: 1.5rem;
                    }
                    .barber-icon {
                        font-size: 3rem;
                        margin-top: 1rem;
                        transition: all 0.3s;
                    }
                    .barber-icon.confused {
                        animation: shake 0.5s infinite;
                    }
                    @keyframes shake {
                        0%, 100% { transform: translateX(0); }
                        25% { transform: translateX(-5px) rotate(-5deg); }
                        75% { transform: translateX(5px) rotate(5deg); }
                    }
                </style>
            </div>

            <!-- Necktie Paradox -->
            <div class="paradox-card">
                <h3>Necktie Paradox <span class="points">5 pts</span></h3>
                <p class="description">Two men bet their neckties: whoever has the cheaper one wins both. Each reasons: "I might lose mine, but could win a more expensive one!" Both think they have the advantage!</p>

                <div class="simulator">
                    <h4>Necktie Betting Game</h4>

                    <div id="necktie-game" class="necktie-game">
                        <div class="neckties">
                            <div class="necktie-player" id="tie-player">
                                <div class="necktie" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">👔</div>
                                <div class="tie-label">Your Tie</div>
                                <div class="tie-value" id="your-tie-value">?</div>
                            </div>
                            <div class="vs">VS</div>
                            <div class="necktie-player" id="tie-opponent">
                                <div class="necktie" style="background: linear-gradient(135deg, #ef4444, #b91c1c);">👔</div>
                                <div class="tie-label">Opponent's Tie</div>
                                <div class="tie-value" id="opp-tie-value">?</div>
                            </div>
                        </div>
                        <p id="necktie-message" style="text-align: center; margin-top: 1rem;">Click "Play Round" to bet your ties!</p>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="playNecktie()">Play Round</button>
                        <button onclick="autoNecktie(100)">Auto-Play 100</button>
                        <button onclick="resetNecktie()">Reset Stats</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="tie-wins">0</div>
                            <div class="stat-label">Your Wins</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tie-losses">0</div>
                            <div class="stat-label">Your Losses</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tie-net">$0</div>
                            <div class="stat-label">Net Value</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tie-games">0</div>
                            <div class="stat-label">Games</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="necktie-explanation">Each player's reasoning: "If I have the cheaper tie, I win the expensive one. If I have the expensive one, I only lose it." But both can't have an advantage!</p>
                    </div>

                    <div class="insight">
                        Like the Two Envelopes paradox, the fallacy is in the asymmetric reasoning. In reality, each has a 50% chance to win or lose, with equal expected value.
                    </div>
                </div>

                <style>
                    .necktie-game {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .neckties {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        gap: 2rem;
                    }
                    .necktie-player {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                    }
                    .necktie {
                        font-size: 3rem;
                        width: 80px;
                        height: 80px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border-radius: 0.5rem;
                    }
                    .tie-label {
                        margin-top: 0.5rem;
                        font-weight: bold;
                    }
                    .tie-value {
                        font-size: 1.25rem;
                        color: var(--primary);
                        font-weight: bold;
                    }
                    .vs {
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: var(--muted);
                    }
                    .necktie-player.winner .necktie {
                        box-shadow: 0 0 20px #22c55e;
                    }
                    .necktie-player.loser .necktie {
                        opacity: 0.5;
                    }
                </style>
            </div>

            <!-- Service Recovery Paradox -->
            <div class="paradox-card">
                <h3>Service Recovery Paradox <span class="points">7 pts</span></h3>
                <p class="description">Customers who experience a service failure and then get excellent recovery are MORE satisfied than customers who never had a problem!</p>

                <div class="simulator">
                    <h4>Customer Satisfaction Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Recovery Quality: <span id="recovery-quality-val">80</span>%</label>
                            <input type="range" id="recovery-quality" min="0" max="100" value="80" oninput="updateRecovery()">
                        </div>
                        <button onclick="simulateService()">Simulate 100 Customers</button>
                        <button onclick="resetService()">Reset</button>
                    </div>

                    <div id="service-viz" class="service-viz">
                        <div class="customer-group">
                            <h5>No Problem</h5>
                            <div class="satisfaction-bar">
                                <div class="bar-fill" id="no-problem-bar" style="width: 75%"></div>
                            </div>
                            <span id="no-problem-score">75%</span>
                        </div>
                        <div class="customer-group">
                            <h5>Problem + Poor Recovery</h5>
                            <div class="satisfaction-bar">
                                <div class="bar-fill poor" id="poor-recovery-bar" style="width: 30%"></div>
                            </div>
                            <span id="poor-recovery-score">30%</span>
                        </div>
                        <div class="customer-group">
                            <h5>Problem + Great Recovery</h5>
                            <div class="satisfaction-bar">
                                <div class="bar-fill excellent" id="great-recovery-bar" style="width: 85%"></div>
                            </div>
                            <span id="great-recovery-score">85%</span>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="srv-no-problem">0</div>
                            <div class="stat-label">No Problem</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="srv-poor">0</div>
                            <div class="stat-label">Poor Recovery</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="srv-great">0</div>
                            <div class="stat-label">Great Recovery</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="srv-paradox">-</div>
                            <div class="stat-label">Paradox Effect</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="service-result">The paradox occurs when recovery satisfaction exceeds baseline satisfaction. This creates loyal customers from failures!</p>
                    </div>

                    <div class="insight">
                        Companies that handle complaints excellently can turn angry customers into their biggest advocates. But don't intentionally create problems!
                    </div>
                </div>

                <style>
                    .service-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .customer-group {
                        margin-bottom: 1rem;
                        display: flex;
                        align-items: center;
                        gap: 1rem;
                    }
                    .customer-group h5 {
                        width: 180px;
                        margin: 0;
                        font-size: 0.875rem;
                    }
                    .satisfaction-bar {
                        flex: 1;
                        height: 30px;
                        background: var(--card);
                        border-radius: 0.25rem;
                        overflow: hidden;
                    }
                    .bar-fill {
                        height: 100%;
                        background: #3b82f6;
                        transition: width 0.5s ease;
                    }
                    .bar-fill.poor {
                        background: #ef4444;
                    }
                    .bar-fill.excellent {
                        background: #22c55e;
                    }
                    .customer-group span {
                        width: 50px;
                        text-align: right;
                        font-weight: bold;
                    }
                </style>
            </div>
        </section>

        <script>
            // Russell's Paradox
            function russellYes() {
                document.getElementById('russell-result').innerHTML =
                    '<strong style="color: #ef4444;">CONTRADICTION!</strong> If he shaves himself, he\'s someone who shaves themselves. But the barber only shaves those who DON\'T shave themselves!';
                document.getElementById('barber-icon').classList.add('confused');
                document.getElementById('set-self').classList.add('highlight');
                document.getElementById('self-members').innerHTML = '<span class="member">💈</span>';
            }

            function russellNo() {
                document.getElementById('russell-result').innerHTML =
                    '<strong style="color: #ef4444;">CONTRADICTION!</strong> If he doesn\'t shave himself, then by the rule, the barber MUST shave him... but he IS the barber!';
                document.getElementById('barber-icon').classList.add('confused');
                document.getElementById('set-barber').classList.add('highlight');
                document.getElementById('barber-members').innerHTML = '<span class="member">💈</span>';
            }

            function russellReset() {
                document.getElementById('russell-result').textContent = 'Click a button to explore the paradox...';
                document.getElementById('barber-icon').classList.remove('confused');
                document.getElementById('set-self').classList.remove('highlight');
                document.getElementById('set-barber').classList.remove('highlight');
                document.getElementById('self-members').innerHTML = '<span class="member">👤</span><span class="member">👤</span>';
                document.getElementById('barber-members').innerHTML = '<span class="member">👤</span><span class="member">👤</span>';
            }

            // Necktie Paradox
            let tieStats = { wins: 0, losses: 0, net: 0, games: 0 };

            function playNecktie() {
                const yourTie = Math.floor(Math.random() * 100) + 20;
                const oppTie = Math.floor(Math.random() * 100) + 20;

                document.getElementById('your-tie-value').textContent = '$' + yourTie;
                document.getElementById('opp-tie-value').textContent = '$' + oppTie;

                const playerEl = document.getElementById('tie-player');
                const oppEl = document.getElementById('tie-opponent');
                playerEl.classList.remove('winner', 'loser');
                oppEl.classList.remove('winner', 'loser');

                tieStats.games++;

                if (yourTie < oppTie) {
                    // You win (cheaper tie wins)
                    tieStats.wins++;
                    tieStats.net += oppTie;
                    playerEl.classList.add('winner');
                    oppEl.classList.add('loser');
                    document.getElementById('necktie-message').textContent = `You win! Your $${yourTie} tie was cheaper. You get both ties worth $${yourTie + oppTie}!`;
                } else if (yourTie > oppTie) {
                    // You lose
                    tieStats.losses++;
                    tieStats.net -= yourTie;
                    playerEl.classList.add('loser');
                    oppEl.classList.add('winner');
                    document.getElementById('necktie-message').textContent = `You lose! Your $${yourTie} tie was more expensive. You lose it!`;
                } else {
                    document.getElementById('necktie-message').textContent = `It's a tie! Both neckties are worth $${yourTie}. No exchange.`;
                }

                updateTieStats();
            }

            function autoNecktie(n) {
                for (let i = 0; i < n; i++) {
                    const yourTie = Math.floor(Math.random() * 100) + 20;
                    const oppTie = Math.floor(Math.random() * 100) + 20;
                    tieStats.games++;
                    if (yourTie < oppTie) {
                        tieStats.wins++;
                        tieStats.net += oppTie;
                    } else if (yourTie > oppTie) {
                        tieStats.losses++;
                        tieStats.net -= yourTie;
                    }
                }
                updateTieStats();
                document.getElementById('necktie-message').textContent = `Played ${n} rounds automatically. Check the stats!`;
            }

            function updateTieStats() {
                document.getElementById('tie-wins').textContent = tieStats.wins;
                document.getElementById('tie-losses').textContent = tieStats.losses;
                document.getElementById('tie-net').textContent = (tieStats.net >= 0 ? '+$' : '-$') + Math.abs(tieStats.net);
                document.getElementById('tie-games').textContent = tieStats.games;
            }

            function resetNecktie() {
                tieStats = { wins: 0, losses: 0, net: 0, games: 0 };
                updateTieStats();
                document.getElementById('your-tie-value').textContent = '?';
                document.getElementById('opp-tie-value').textContent = '?';
                document.getElementById('necktie-message').textContent = 'Click "Play Round" to bet your ties!';
                document.getElementById('tie-player').classList.remove('winner', 'loser');
                document.getElementById('tie-opponent').classList.remove('winner', 'loser');
            }

            // Service Recovery Paradox
            let serviceStats = { noProblem: [], poorRecovery: [], greatRecovery: [] };

            function updateRecovery() {
                const quality = document.getElementById('recovery-quality').value;
                document.getElementById('recovery-quality-val').textContent = quality;
            }

            function simulateService() {
                const recoveryQuality = parseInt(document.getElementById('recovery-quality').value);

                // Simulate 100 customers
                let noProblemTotal = 0, poorRecoveryTotal = 0, greatRecoveryTotal = 0;
                let noProblemCount = 0, poorCount = 0, greatCount = 0;

                for (let i = 0; i < 100; i++) {
                    const hadProblem = Math.random() < 0.3; // 30% have problems

                    if (!hadProblem) {
                        // Base satisfaction: 70-80%
                        const satisfaction = 70 + Math.random() * 10;
                        noProblemTotal += satisfaction;
                        noProblemCount++;
                    } else {
                        const goodRecovery = Math.random() * 100 < recoveryQuality;
                        if (goodRecovery) {
                            // Great recovery: 80-95%
                            const satisfaction = 80 + Math.random() * 15;
                            greatRecoveryTotal += satisfaction;
                            greatCount++;
                        } else {
                            // Poor recovery: 20-40%
                            const satisfaction = 20 + Math.random() * 20;
                            poorRecoveryTotal += satisfaction;
                            poorCount++;
                        }
                    }
                }

                const noProblemAvg = noProblemCount > 0 ? (noProblemTotal / noProblemCount).toFixed(0) : 0;
                const poorAvg = poorCount > 0 ? (poorRecoveryTotal / poorCount).toFixed(0) : 0;
                const greatAvg = greatCount > 0 ? (greatRecoveryTotal / greatCount).toFixed(0) : 0;

                // Update bars
                document.getElementById('no-problem-bar').style.width = noProblemAvg + '%';
                document.getElementById('no-problem-score').textContent = noProblemAvg + '%';
                document.getElementById('poor-recovery-bar').style.width = poorAvg + '%';
                document.getElementById('poor-recovery-score').textContent = poorAvg + '%';
                document.getElementById('great-recovery-bar').style.width = greatAvg + '%';
                document.getElementById('great-recovery-score').textContent = greatAvg + '%';

                // Update stats
                document.getElementById('srv-no-problem').textContent = noProblemCount;
                document.getElementById('srv-poor').textContent = poorCount;
                document.getElementById('srv-great').textContent = greatCount;

                // Check for paradox
                const paradoxEffect = greatAvg > noProblemAvg;
                document.getElementById('srv-paradox').textContent = paradoxEffect ? '✓ Yes!' : '✗ No';
                document.getElementById('srv-paradox').style.color = paradoxEffect ? '#22c55e' : '#ef4444';

                if (paradoxEffect) {
                    document.getElementById('service-result').innerHTML =
                        `<strong style="color: #22c55e;">PARADOX CONFIRMED!</strong> Customers with problems + great recovery (${greatAvg}%) are MORE satisfied than those with no problems (${noProblemAvg}%)!`;
                } else {
                    document.getElementById('service-result').innerHTML =
                        `No paradox this time. Baseline satisfaction (${noProblemAvg}%) beats recovery satisfaction (${greatAvg}%). Try increasing recovery quality!`;
                }
            }

            function resetService() {
                document.getElementById('no-problem-bar').style.width = '75%';
                document.getElementById('no-problem-score').textContent = '75%';
                document.getElementById('poor-recovery-bar').style.width = '30%';
                document.getElementById('poor-recovery-score').textContent = '30%';
                document.getElementById('great-recovery-bar').style.width = '85%';
                document.getElementById('great-recovery-score').textContent = '85%';
                document.getElementById('srv-no-problem').textContent = '0';
                document.getElementById('srv-poor').textContent = '0';
                document.getElementById('srv-great').textContent = '0';
                document.getElementById('srv-paradox').textContent = '-';
                document.getElementById('service-result').textContent = 'The paradox occurs when recovery satisfaction exceeds baseline satisfaction. This creates loyal customers from failures!';
            }

            // Initialize new simulators
            window.addEventListener('load', () => {
                russellReset();
                resetNecktie();
                resetService();
            });
        </script>

        <script>
            // Two Envelopes Paradox
            let envState = { amounts: [0, 0], picked: null, phase: 'pick' };
            let envStats = { keepTotal: 0, switchTotal: 0, games: 0 };

            function resetEnvelope() {
                const base = Math.floor(Math.random() * 100) + 10;
                const doubled = base * 2;
                envState.amounts = Math.random() < 0.5 ? [base, doubled] : [doubled, base];
                envState.picked = null;
                envState.phase = 'pick';

                document.getElementById('env-a').classList.remove('selected', 'revealed');
                document.getElementById('env-b').classList.remove('selected', 'revealed');
                document.getElementById('env-a-amount').textContent = '?';
                document.getElementById('env-b-amount').textContent = '?';
                document.getElementById('envelope-message').textContent = 'Pick an envelope!';
                document.getElementById('envelope-choice').style.display = 'none';
            }

            function pickEnvelope(choice) {
                if (envState.phase !== 'pick') return;
                envState.picked = choice;
                envState.phase = 'decide';

                const pickedEnv = document.getElementById(`env-${choice}`);
                pickedEnv.classList.add('selected');

                const amount = choice === 'a' ? envState.amounts[0] : envState.amounts[1];
                document.getElementById(`env-${choice}-amount`).textContent = '$' + amount;
                pickedEnv.classList.add('revealed');

                document.getElementById('envelope-message').textContent = `You found $${amount}. The other has either $${amount/2} or $${amount*2}. Switch?`;
                document.getElementById('envelope-choice').style.display = 'block';
            }

            function envelopeDecision(decision) {
                if (envState.phase !== 'decide') return;

                const otherEnv = envState.picked === 'a' ? 'b' : 'a';
                document.getElementById(`env-${otherEnv}`).classList.add('revealed');
                document.getElementById(`env-a-amount`).textContent = '$' + envState.amounts[0];
                document.getElementById(`env-b-amount`).textContent = '$' + envState.amounts[1];

                const pickedAmount = envState.picked === 'a' ? envState.amounts[0] : envState.amounts[1];
                const otherAmount = envState.picked === 'a' ? envState.amounts[1] : envState.amounts[0];
                const finalAmount = decision === 'keep' ? pickedAmount : otherAmount;

                if (decision === 'keep') {
                    envStats.keepTotal += finalAmount;
                } else {
                    envStats.switchTotal += finalAmount;
                }
                envStats.games++;

                document.getElementById('env-keep-total').textContent = '$' + envStats.keepTotal;
                document.getElementById('env-switch-total').textContent = '$' + envStats.switchTotal;
                document.getElementById('env-games').textContent = envStats.games;

                const won = finalAmount > (decision === 'keep' ? otherAmount : pickedAmount);
                document.getElementById('envelope-message').textContent =
                    `You ${decision === 'keep' ? 'kept' : 'switched'} and got $${finalAmount}. Other had $${decision === 'keep' ? otherAmount : pickedAmount}. ${won ? 'Good choice!' : 'Wrong choice!'}`;
                document.getElementById('envelope-choice').style.display = 'none';
                envState.phase = 'done';
            }

            function autoPlayEnvelope(n) {
                for (let i = 0; i < n; i++) {
                    const base = Math.floor(Math.random() * 100) + 10;
                    const amounts = Math.random() < 0.5 ? [base, base * 2] : [base * 2, base];
                    const picked = Math.random() < 0.5 ? 0 : 1;

                    // Randomly keep or switch
                    if (Math.random() < 0.5) {
                        envStats.keepTotal += amounts[picked];
                    } else {
                        envStats.switchTotal += amounts[1 - picked];
                    }
                    envStats.games++;
                }
                document.getElementById('env-keep-total').textContent = '$' + envStats.keepTotal;
                document.getElementById('env-switch-total').textContent = '$' + envStats.switchTotal;
                document.getElementById('env-games').textContent = envStats.games;
            }

            // Boy/Girl Paradox
            function simulateBoyGirl(n) {
                const container = document.getElementById('boygirl-families');
                container.innerHTML = '';

                let atLeastOneBoy = 0;
                let bothBoys = 0;

                for (let i = 0; i < n; i++) {
                    const child1 = Math.random() < 0.5 ? 'B' : 'G';
                    const child2 = Math.random() < 0.5 ? 'B' : 'G';

                    if (child1 === 'B' || child2 === 'B') {
                        atLeastOneBoy++;
                        if (child1 === 'B' && child2 === 'B') {
                            bothBoys++;
                        }

                        if (i < 200) {
                            const family = document.createElement('span');
                            family.textContent = child1 + child2;
                            family.style.cssText = `
                                padding: 2px 4px;
                                border-radius: 2px;
                                font-size: 0.75rem;
                                background: ${child1 === 'B' && child2 === 'B' ? '#6366f1' : 'var(--card)'};
                                color: ${child1 === 'B' && child2 === 'B' ? 'white' : 'var(--text)'};
                            `;
                            container.appendChild(family);
                        }
                    }
                }

                document.getElementById('bg-total').textContent = atLeastOneBoy;
                document.getElementById('bg-both').textContent = bothBoys;
                document.getElementById('bg-pct').textContent = (bothBoys / atLeastOneBoy * 100).toFixed(1) + '%';
            }

            function resetBoyGirl() {
                document.getElementById('boygirl-families').innerHTML = '';
                document.getElementById('bg-total').textContent = '0';
                document.getElementById('bg-both').textContent = '0';
                document.getElementById('bg-pct').textContent = '0%';
            }

            // Ant on Rubber Rope
            let antInterval = null;

            function startAntRace() {
                if (antInterval) clearInterval(antInterval);

                const antSpeed = parseFloat(document.getElementById('ant-speed').value);
                const stretchRate = parseFloat(document.getElementById('rope-stretch').value);

                document.getElementById('ant-speed-val').textContent = antSpeed;
                document.getElementById('rope-stretch-val').textContent = stretchRate;

                let ropeLength = 100;
                let antPos = 0;
                let time = 0;

                antInterval = setInterval(() => {
                    time++;

                    // Ant moves
                    antPos += antSpeed;

                    // Rope stretches (ant position also stretches proportionally)
                    const stretchFactor = (ropeLength + stretchRate) / ropeLength;
                    antPos *= stretchFactor;
                    ropeLength += stretchRate;

                    // Calculate progress
                    const progress = (antPos / ropeLength) * 100;

                    // Update display
                    document.getElementById('ant-position').style.left = `${Math.min(progress, 95)}%`;
                    document.getElementById('ant-progress').textContent = progress.toFixed(2) + '%';
                    document.getElementById('ant-distance').textContent = Math.round(antPos) + ' cm';
                    document.getElementById('rope-length').textContent = Math.round(ropeLength) + ' cm';
                    document.getElementById('ant-time').textContent = time + 's';

                    if (progress >= 100 || time > 10000) {
                        clearInterval(antInterval);
                        if (progress >= 100) {
                            document.getElementById('ant-explanation').textContent = `SUCCESS! The ant reached the end in ${time} seconds! The harmonic series wins!`;
                        }
                    }
                }, 50);
            }

            function resetAntRace() {
                if (antInterval) clearInterval(antInterval);
                document.getElementById('ant-position').style.left = '0';
                document.getElementById('ant-progress').textContent = '0%';
                document.getElementById('ant-distance').textContent = '0 cm';
                document.getElementById('rope-length').textContent = '100 cm';
                document.getElementById('ant-time').textContent = '0s';
            }

            // Ladder Paradox
            function updateLadder() {
                const v = parseFloat(document.getElementById('ladder-v').value) / 100;
                document.getElementById('ladder-v-val').textContent = v.toFixed(2);

                const gamma = 1 / Math.sqrt(1 - v * v);
                const ladderContracted = 20 / gamma;
                const garageContracted = 10 / gamma;

                document.getElementById('ladder-gamma').textContent = gamma.toFixed(2);
                document.getElementById('ladder-contracted').textContent = ladderContracted.toFixed(1);
                document.getElementById('garage-contracted').textContent = garageContracted.toFixed(1);

                // Update ladder width in garage frame
                const ladderWidth = Math.min(100, (ladderContracted / 10) * 100);
                document.getElementById('ladder-garage-frame').style.width = ladderWidth + '%';

                // Update verdicts
                if (ladderContracted <= 10) {
                    document.getElementById('garage-verdict').textContent = '✓ Ladder fits!';
                    document.getElementById('garage-verdict').style.color = '#22c55e';
                } else {
                    document.getElementById('garage-verdict').textContent = '✗ Ladder doesn\'t fit!';
                    document.getElementById('garage-verdict').style.color = '#ef4444';
                }
            }

            // Tea Leaf Paradox
            function resetTea() {
                const leaves = document.getElementById('tea-leaves');
                leaves.innerHTML = '';
                document.getElementById('tea-cup').classList.remove('stirring');

                // Create scattered leaves
                for (let i = 0; i < 30; i++) {
                    const leaf = document.createElement('div');
                    leaf.className = 'leaf';
                    const angle = Math.random() * Math.PI * 2;
                    const radius = 30 + Math.random() * 50;
                    leaf.style.left = (100 + Math.cos(angle) * radius) + 'px';
                    leaf.style.top = (100 + Math.sin(angle) * radius) + 'px';
                    leaves.appendChild(leaf);
                }
            }

            function stirTea() {
                document.getElementById('tea-cup').classList.add('stirring');

                // Move leaves to center
                setTimeout(() => {
                    const leafElements = document.querySelectorAll('.leaf');
                    leafElements.forEach(leaf => {
                        const centerOffset = (Math.random() - 0.5) * 30;
                        leaf.style.left = (100 + centerOffset) + 'px';
                        leaf.style.top = (100 + centerOffset) + 'px';
                    });
                }, 500);

                setTimeout(() => {
                    document.getElementById('tea-cup').classList.remove('stirring');
                }, 3000);
            }

            // Initialize new simulators on load
            window.addEventListener('load', () => {
                resetEnvelope();
                resetTea();
                updateLadder();
            });
        </script>

        <!-- BEHAVIOR & PSYCHOLOGY PARADOXES (NEW from pages 11-20) -->
        <section id="behavior">
            <h2 class="category-title">Behavior & Psychology Paradoxes</h2>

            <!-- Ship of Theseus -->
            <div class="paradox-card">
                <h3>Ship of Theseus <span class="points">10 pts</span></h3>
                <p class="description">If you replace every plank of a ship one by one, is the final ship the same ship? What if you build a new ship from the old planks?</p>

                <div class="simulator">
                    <h4>Identity Replacement Simulator</h4>

                    <div class="controls">
                        <button onclick="replacePlank()">Replace Next Plank</button>
                        <button onclick="replaceAllPlanks()">Replace All</button>
                        <button onclick="resetShip()">Reset Ship</button>
                    </div>

                    <div class="ship-viz">
                        <div class="ship-container">
                            <div class="ship-label">Original Ship</div>
                            <div class="ship" id="ship-original">
                                <div class="plank original" data-plank="1"></div>
                                <div class="plank original" data-plank="2"></div>
                                <div class="plank original" data-plank="3"></div>
                                <div class="plank original" data-plank="4"></div>
                                <div class="plank original" data-plank="5"></div>
                                <div class="plank original" data-plank="6"></div>
                                <div class="plank original" data-plank="7"></div>
                                <div class="plank original" data-plank="8"></div>
                            </div>
                            <div class="ship-identity" id="original-identity">100% Original</div>
                        </div>
                        <div class="ship-container">
                            <div class="ship-label">Rebuilt Ship (from old planks)</div>
                            <div class="ship" id="ship-rebuilt">
                            </div>
                            <div class="ship-identity" id="rebuilt-identity">0% Complete</div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="planks-replaced">0</div>
                            <div class="stat-label">Planks Replaced</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="original-pct">100%</div>
                            <div class="stat-label">Original Material</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ship-question">Same Ship?</div>
                            <div class="stat-label">The Question</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="theseus-result">Start replacing planks to explore the paradox of identity...</p>
                    </div>

                    <div class="insight">
                        This paradox applies to everything: your body replaces cells, companies change employees, code gets refactored. At what point does something become "different"?
                    </div>
                </div>

                <style>
                    .ship-viz {
                        display: flex;
                        justify-content: space-around;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        flex-wrap: wrap;
                        gap: 2rem;
                    }
                    .ship-container {
                        text-align: center;
                    }
                    .ship-label {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .ship {
                        display: flex;
                        flex-direction: column;
                        gap: 4px;
                        padding: 1rem;
                        background: linear-gradient(180deg, #0c4a6e 0%, #0369a1 100%);
                        border-radius: 0.5rem;
                        min-height: 200px;
                        width: 120px;
                    }
                    .plank {
                        height: 20px;
                        border-radius: 2px;
                        transition: all 0.3s;
                    }
                    .plank.original {
                        background: #92400e;
                    }
                    .plank.new {
                        background: #fbbf24;
                    }
                    .ship-identity {
                        margin-top: 0.5rem;
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                </style>
            </div>

            <!-- Abilene Paradox -->
            <div class="paradox-card">
                <h3>Abilene Paradox <span class="points">11 pts</span></h3>
                <p class="description">A group collectively decides on something no individual member actually wants, because everyone assumes others want it.</p>

                <div class="simulator">
                    <h4>Group Decision Simulator</h4>
                    <p style="margin-bottom: 1rem; color: var(--muted);">A family is deciding whether to drive to Abilene (4 hours in the heat) or stay home. What does each person REALLY want?</p>

                    <div class="abilene-viz">
                        <div class="family-member" id="member-dad">
                            <div class="member-icon">👨</div>
                            <div class="member-name">Dad</div>
                            <div class="member-thought" id="dad-thought">💭 ?</div>
                            <div class="member-says" id="dad-says">🗣️ ?</div>
                        </div>
                        <div class="family-member" id="member-mom">
                            <div class="member-icon">👩</div>
                            <div class="member-name">Mom</div>
                            <div class="member-thought" id="mom-thought">💭 ?</div>
                            <div class="member-says" id="mom-says">🗣️ ?</div>
                        </div>
                        <div class="family-member" id="member-son">
                            <div class="member-icon">👦</div>
                            <div class="member-name">Son</div>
                            <div class="member-thought" id="son-thought">💭 ?</div>
                            <div class="member-says" id="son-says">🗣️ ?</div>
                        </div>
                        <div class="family-member" id="member-daughter">
                            <div class="member-icon">👧</div>
                            <div class="member-name">Daughter</div>
                            <div class="member-thought" id="daughter-thought">💭 ?</div>
                            <div class="member-says" id="daughter-says">🗣️ ?</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="revealAbilene()">Reveal True Preferences</button>
                        <button onclick="simulateAbilene()">New Scenario</button>
                    </div>

                    <div class="result">
                        <p id="abilene-result">Click "Reveal True Preferences" to see what everyone actually wants vs. what they say...</p>
                    </div>

                    <div class="insight">
                        This happens in workplaces constantly: meetings no one wants, projects everyone privately doubts, consensus that serves no one.
                    </div>
                </div>

                <style>
                    .abilene-viz {
                        display: flex;
                        justify-content: space-around;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        flex-wrap: wrap;
                        gap: 1rem;
                    }
                    .family-member {
                        text-align: center;
                        padding: 1rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                        min-width: 100px;
                    }
                    .member-icon {
                        font-size: 2.5rem;
                    }
                    .member-name {
                        font-weight: bold;
                        margin: 0.5rem 0;
                    }
                    .member-thought, .member-says {
                        font-size: 0.875rem;
                        padding: 0.25rem;
                        border-radius: 0.25rem;
                        margin-top: 0.25rem;
                    }
                    .member-thought {
                        background: #fef3c7;
                        color: #92400e;
                    }
                    .member-says {
                        background: #dbeafe;
                        color: #1e40af;
                    }
                </style>
            </div>

            <!-- Stockdale Paradox -->
            <div class="paradox-card">
                <h3>Stockdale Paradox <span class="points">23 pts</span></h3>
                <p class="description">You must maintain unwavering faith you will prevail AND confront the brutal facts of your reality. Pure optimists died first in POW camps.</p>

                <div class="simulator">
                    <h4>Survival Strategy Simulator</h4>

                    <div class="stockdale-viz">
                        <div class="mindset-spectrum">
                            <div class="spectrum-label left">Pure Pessimist</div>
                            <div class="spectrum-bar">
                                <div class="spectrum-marker" id="stockdale-marker" style="left: 50%"></div>
                                <div class="spectrum-zone pessimist">Gives up</div>
                                <div class="spectrum-zone optimal">Stockdale Zone</div>
                                <div class="spectrum-zone optimist">Denial</div>
                            </div>
                            <div class="spectrum-label right">Pure Optimist</div>
                        </div>

                        <div class="controls" style="margin-top: 1.5rem;">
                            <div class="control-group">
                                <label>Faith in Success: <span id="faith-val">50</span>%</label>
                                <input type="range" id="faith-slider" min="0" max="100" value="50" oninput="updateStockdale()">
                            </div>
                            <div class="control-group">
                                <label>Confronting Reality: <span id="reality-val">50</span>%</label>
                                <input type="range" id="reality-slider" min="0" max="100" value="50" oninput="updateStockdale()">
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="survival-chance">50%</div>
                            <div class="stat-label">Survival Chance</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="mindset-type">Balanced</div>
                            <div class="stat-label">Mindset Type</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="stockdale-result">Adjust the sliders to find the optimal mindset balance...</p>
                    </div>

                    <div class="insight">
                        Admiral Stockdale survived 7+ years as a POW. He noticed optimists ("We'll be out by Christmas") broke when dates passed. Realists who confronted facts while maintaining long-term faith survived.
                    </div>
                </div>

                <style>
                    .stockdale-viz {
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .mindset-spectrum {
                        display: flex;
                        align-items: center;
                        gap: 1rem;
                    }
                    .spectrum-label {
                        font-size: 0.75rem;
                        color: var(--muted);
                        width: 80px;
                    }
                    .spectrum-label.right {
                        text-align: right;
                    }
                    .spectrum-bar {
                        flex: 1;
                        height: 40px;
                        background: var(--card);
                        border-radius: 0.5rem;
                        position: relative;
                        display: flex;
                        overflow: hidden;
                    }
                    .spectrum-zone {
                        flex: 1;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.75rem;
                        color: white;
                    }
                    .spectrum-zone.pessimist {
                        background: #ef4444;
                    }
                    .spectrum-zone.optimal {
                        background: #22c55e;
                    }
                    .spectrum-zone.optimist {
                        background: #f59e0b;
                    }
                    .spectrum-marker {
                        position: absolute;
                        top: -5px;
                        width: 4px;
                        height: 50px;
                        background: white;
                        border: 2px solid var(--text);
                        border-radius: 2px;
                        transform: translateX(-50%);
                        transition: left 0.3s;
                        z-index: 10;
                    }
                </style>
            </div>

            <!-- Triangle Dissection Paradox -->
            <div class="paradox-card">
                <h3>Triangle Dissection Paradox <span class="points">15 pts</span></h3>
                <p class="description">Cut a triangle into pieces and rearrange them into the "same" shape - but with an extra square! Where does the extra area come from?</p>

                <div class="simulator">
                    <h4>Missing Square Puzzle</h4>

                    <div class="controls">
                        <button onclick="toggleTriangleDissection()">Toggle Configuration</button>
                        <button onclick="showTriangleTrick()">Reveal the Trick</button>
                    </div>

                    <div class="triangle-viz">
                        <canvas id="triangle-canvas" width="400" height="200"></canvas>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="triangle-config">Config A</div>
                            <div class="stat-label">Configuration</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="triangle-area">32 sq</div>
                            <div class="stat-label">Apparent Area</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="triangle-extra">+1 sq?</div>
                            <div class="stat-label">Extra Square</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="triangle-result">Both configurations use the same pieces but one has an extra square! Click "Reveal the Trick" to see why.</p>
                    </div>

                    <div class="insight">
                        The "hypotenuse" is not actually straight - it's slightly bowed. The two triangles have different slopes (2/5 vs 3/8), creating a thin gap that accounts for the "extra" area.
                    </div>
                </div>

                <style>
                    .triangle-viz {
                        display: flex;
                        justify-content: center;
                        padding: 1rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    #triangle-canvas {
                        border: 1px solid var(--card);
                        border-radius: 0.25rem;
                    }
                </style>
            </div>
        </section>

        <!-- ECONOMICS & GAME THEORY PARADOXES -->
        <section id="economics">
            <h2 class="category-title">Economics & Game Theory Paradoxes</h2>

            <!-- Dollar Auction Paradox -->
            <div class="paradox-card">
                <h3>Dollar Auction Paradox <span class="points">6 pts</span></h3>
                <p class="description">An auction where ALL bidders pay their bids, but only the winner gets the prize. Rational players get trapped into bidding far more than the prize is worth!</p>

                <div class="simulator">
                    <h4>Dollar Auction Game</h4>
                    <p style="margin-bottom: 1rem; color: var(--muted);">You're bidding against an AI for a $100 prize. Both bidders pay their final bid, but only the winner gets the prize.</p>

                    <div class="dollar-auction-viz">
                        <div class="auction-prize">
                            <div class="prize-amount">$100</div>
                            <div class="prize-label">Prize</div>
                        </div>
                        <div class="bidders">
                            <div class="bidder you">
                                <div class="bidder-label">You</div>
                                <div class="bidder-bid" id="your-bid">$0</div>
                                <button onclick="placeBid()" id="bid-btn">Bid +$5</button>
                            </div>
                            <div class="vs-auction">VS</div>
                            <div class="bidder opponent">
                                <div class="bidder-label">Opponent</div>
                                <div class="bidder-bid" id="opponent-bid">$0</div>
                            </div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="foldAuction()">Fold (Stop Bidding)</button>
                        <button onclick="resetAuction()">New Auction</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="auction-round">0</div>
                            <div class="stat-label">Round</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="your-profit">$0</div>
                            <div class="stat-label">Your Profit/Loss</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="total-paid">$0</div>
                            <div class="stat-label">Total Paid (Both)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="auction-games">0</div>
                            <div class="stat-label">Games Played</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="auction-result">Start bidding! Remember: you pay your bid even if you lose.</p>
                    </div>

                    <div class="insight">
                        This demonstrates sunk cost fallacy and escalation of commitment. The rational choice is often not to play, but once committed, stopping means losing everything you've already bid.
                    </div>
                </div>

                <style>
                    .dollar-auction-viz {
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        text-align: center;
                    }
                    .auction-prize {
                        margin-bottom: 1.5rem;
                    }
                    .prize-amount {
                        font-size: 3rem;
                        font-weight: bold;
                        color: #22c55e;
                    }
                    .prize-label {
                        color: var(--muted);
                    }
                    .bidders {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        gap: 2rem;
                    }
                    .bidder {
                        padding: 1.5rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                        min-width: 120px;
                    }
                    .bidder.you {
                        border: 2px solid #3b82f6;
                    }
                    .bidder.opponent {
                        border: 2px solid #ef4444;
                    }
                    .bidder-label {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .bidder-bid {
                        font-size: 1.5rem;
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .vs-auction {
                        font-size: 1.5rem;
                        font-weight: bold;
                        color: var(--muted);
                    }
                </style>
            </div>

            <!-- Paradox of Thrift -->
            <div class="paradox-card">
                <h3>Paradox of Thrift <span class="points">6 pts</span></h3>
                <p class="description">If everyone saves more during a recession, aggregate demand falls, making the recession worse. Individual prudence becomes collective disaster.</p>

                <div class="simulator">
                    <h4>Economy Simulation</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Household Savings Rate: <span id="savings-rate-val">20</span>%</label>
                            <input type="range" id="savings-rate" min="0" max="80" value="20" oninput="updateThrift()">
                        </div>
                        <button onclick="simulateThrift()">Simulate 10 Years</button>
                        <button onclick="resetThrift()">Reset</button>
                    </div>

                    <div class="thrift-viz">
                        <div class="economy-bar">
                            <div class="econ-label">GDP</div>
                            <div class="econ-bar-fill" id="gdp-bar" style="width: 80%"></div>
                            <span id="gdp-value">$1000B</span>
                        </div>
                        <div class="economy-bar">
                            <div class="econ-label">Spending</div>
                            <div class="econ-bar-fill spending" id="spending-bar" style="width: 64%"></div>
                            <span id="spending-value">$800B</span>
                        </div>
                        <div class="economy-bar">
                            <div class="econ-label">Savings</div>
                            <div class="econ-bar-fill savings" id="savings-bar" style="width: 16%"></div>
                            <span id="savings-value">$200B</span>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="thrift-year">0</div>
                            <div class="stat-label">Year</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="gdp-change">0%</div>
                            <div class="stat-label">GDP Change</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="total-savings">$200B</div>
                            <div class="stat-label">Total Savings</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="paradox-active">No</div>
                            <div class="stat-label">Paradox Active</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="thrift-result">Increase the savings rate and simulate to see how individual thrift can hurt the collective economy.</p>
                    </div>

                    <div class="insight">
                        Keynes argued this is why government spending is needed during recessions - someone must spend when everyone else is saving.
                    </div>
                </div>

                <style>
                    .thrift-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .economy-bar {
                        display: flex;
                        align-items: center;
                        margin-bottom: 1rem;
                        gap: 1rem;
                    }
                    .econ-label {
                        width: 80px;
                        font-weight: bold;
                        font-size: 0.875rem;
                    }
                    .econ-bar-fill {
                        height: 30px;
                        background: #3b82f6;
                        border-radius: 0.25rem;
                        transition: width 0.5s;
                    }
                    .econ-bar-fill.spending {
                        background: #22c55e;
                    }
                    .econ-bar-fill.savings {
                        background: #f59e0b;
                    }
                    .economy-bar span {
                        font-size: 0.875rem;
                        min-width: 70px;
                    }
                </style>
            </div>

            <!-- Automation Paradox -->
            <div class="paradox-card">
                <h3>Automation Paradox <span class="points">19 pts</span></h3>
                <p class="description">The more reliable automation becomes, the less humans practice manual operation. When rare failures occur, humans are unprepared - making failures catastrophic.</p>

                <div class="simulator">
                    <h4>Skill Decay Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Automation Level: <span id="auto-level-val">50</span>%</label>
                            <input type="range" id="auto-level" min="0" max="99" value="50" oninput="updateAutomation()">
                        </div>
                        <button onclick="simulateFailure()">Simulate System Failure!</button>
                        <button onclick="resetAutomation()">Reset</button>
                    </div>

                    <div class="automation-viz">
                        <div class="pilot-container">
                            <div class="pilot-icon">👨‍✈️</div>
                            <div class="pilot-label">Human Operator</div>
                            <div class="skill-bar">
                                <div class="skill-fill" id="skill-fill" style="width: 50%"></div>
                            </div>
                            <div class="skill-label">Manual Skill: <span id="skill-pct">50%</span></div>
                        </div>
                        <div class="system-container">
                            <div class="system-icon" id="system-icon">🤖</div>
                            <div class="system-label">Automated System</div>
                            <div class="system-status" id="system-status">OPERATIONAL</div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="years-automated">0</div>
                            <div class="stat-label">Years Automated</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="failure-rate">1%</div>
                            <div class="stat-label">Failure Rate</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="recovery-chance">50%</div>
                            <div class="stat-label">Recovery Chance</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="incidents">0</div>
                            <div class="stat-label">Incidents</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="automation-result">Higher automation = lower manual skill. When the system fails, can the human take over?</p>
                    </div>

                    <div class="insight">
                        This explains many aviation and industrial accidents. Airlines now require pilots to hand-fly periodically to maintain skills, despite automation being more reliable.
                    </div>
                </div>

                <style>
                    .automation-viz {
                        display: flex;
                        justify-content: space-around;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        flex-wrap: wrap;
                        gap: 2rem;
                    }
                    .pilot-container, .system-container {
                        text-align: center;
                        min-width: 150px;
                    }
                    .pilot-icon, .system-icon {
                        font-size: 3rem;
                    }
                    .pilot-label, .system-label {
                        font-weight: bold;
                        margin: 0.5rem 0;
                    }
                    .skill-bar {
                        width: 150px;
                        height: 20px;
                        background: var(--card);
                        border-radius: 0.25rem;
                        overflow: hidden;
                        margin: 0.5rem auto;
                    }
                    .skill-fill {
                        height: 100%;
                        background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
                        transition: width 0.5s;
                    }
                    .skill-label {
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                    .system-status {
                        padding: 0.5rem 1rem;
                        border-radius: 0.25rem;
                        font-weight: bold;
                        background: #22c55e;
                        color: white;
                    }
                    .system-status.failed {
                        background: #ef4444;
                        animation: blink 0.5s infinite;
                    }
                    @keyframes blink {
                        50% { opacity: 0.5; }
                    }
                </style>
            </div>

            <!-- Preparedness Paradox -->
            <div class="paradox-card">
                <h3>Preparedness Paradox <span class="points">6 pts</span></h3>
                <p class="description">When disaster preparation works, nothing bad happens - making the preparation look like an overreaction. Y2K is often mocked, but massive effort prevented real problems.</p>

                <div class="simulator">
                    <h4>Disaster Preparation Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Preparation Level: <span id="prep-level-val">50</span>%</label>
                            <input type="range" id="prep-level" min="0" max="100" value="50" oninput="updatePreparedness()">
                        </div>
                        <button onclick="triggerDisaster()">Trigger Disaster Event</button>
                        <button onclick="resetPreparedness()">Reset Stats</button>
                    </div>

                    <div class="preparedness-viz">
                        <div class="disaster-container">
                            <div class="disaster-icon" id="disaster-icon">🌪️</div>
                            <div class="disaster-label">Incoming Disaster</div>
                            <div class="threat-level" id="threat-level">Threat: Medium</div>
                        </div>
                        <div class="outcome-container">
                            <div class="outcome-icon" id="outcome-icon">❓</div>
                            <div class="outcome-label" id="outcome-label">Outcome Unknown</div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="prep-cost">$5B</div>
                            <div class="stat-label">Preparation Cost</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="damage-prevented">$0B</div>
                            <div class="stat-label">Damage Prevented</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="public-perception">Neutral</div>
                            <div class="stat-label">Public Perception</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="disasters-handled">0</div>
                            <div class="stat-label">Disasters Handled</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="preparedness-result">High preparation = low visible damage = "Why did we waste all that money?"</p>
                    </div>

                    <div class="insight">
                        COVID-19 responses that worked (New Zealand, Taiwan) were criticized as overreactions. Failed responses were obvious disasters. Success is invisible.
                    </div>
                </div>

                <style>
                    .preparedness-viz {
                        display: flex;
                        justify-content: space-around;
                        align-items: center;
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .disaster-container, .outcome-container {
                        text-align: center;
                    }
                    .disaster-icon, .outcome-icon {
                        font-size: 4rem;
                        transition: all 0.3s;
                    }
                    .disaster-label, .outcome-label {
                        font-weight: bold;
                        margin-top: 0.5rem;
                    }
                    .threat-level {
                        color: var(--muted);
                        font-size: 0.875rem;
                    }
                </style>
            </div>
        </section>

        <script>
            // Ship of Theseus
            let theseusState = { planksReplaced: 0, totalPlanks: 8 };

            function replacePlank() {
                if (theseusState.planksReplaced >= theseusState.totalPlanks) return;

                theseusState.planksReplaced++;
                const planks = document.querySelectorAll('#ship-original .plank');
                const plank = planks[theseusState.planksReplaced - 1];
                plank.classList.remove('original');
                plank.classList.add('new');

                // Add old plank to rebuilt ship
                const rebuiltShip = document.getElementById('ship-rebuilt');
                const oldPlank = document.createElement('div');
                oldPlank.className = 'plank original';
                rebuiltShip.appendChild(oldPlank);

                updateTheseusDisplay();
            }

            function replaceAllPlanks() {
                while (theseusState.planksReplaced < theseusState.totalPlanks) {
                    replacePlank();
                }
            }

            function resetShip() {
                theseusState.planksReplaced = 0;
                const planks = document.querySelectorAll('#ship-original .plank');
                planks.forEach(p => {
                    p.classList.add('original');
                    p.classList.remove('new');
                });
                document.getElementById('ship-rebuilt').innerHTML = '';
                updateTheseusDisplay();
            }

            function updateTheseusDisplay() {
                const pct = Math.round((1 - theseusState.planksReplaced / theseusState.totalPlanks) * 100);
                document.getElementById('planks-replaced').textContent = theseusState.planksReplaced;
                document.getElementById('original-pct').textContent = pct + '%';
                document.getElementById('original-identity').textContent = pct + '% Original';
                document.getElementById('rebuilt-identity').textContent =
                    Math.round(theseusState.planksReplaced / theseusState.totalPlanks * 100) + '% Complete';

                let question = 'Same Ship?';
                let result = 'Keep replacing planks to see the paradox unfold...';

                if (theseusState.planksReplaced === theseusState.totalPlanks) {
                    question = 'Which is real?';
                    result = 'The original ship has 0% original material. The rebuilt ship has 100% original material. Which is the "Ship of Theseus"?';
                } else if (theseusState.planksReplaced > theseusState.totalPlanks / 2) {
                    question = 'Maybe...?';
                    result = `With only ${pct}% original material remaining, is this still the same ship?`;
                }

                document.getElementById('ship-question').textContent = question;
                document.getElementById('theseus-result').textContent = result;
            }

            // Abilene Paradox
            const abilenePrefs = {
                dad: { thinks: 'Stay home', says: "Let's go to Abilene!" },
                mom: { thinks: 'Stay home', says: "Sounds great!" },
                son: { thinks: 'Stay home', says: "Sure, why not?" },
                daughter: { thinks: 'Stay home', says: "I'm in!" }
            };

            function simulateAbilene() {
                document.getElementById('dad-thought').textContent = '💭 ?';
                document.getElementById('dad-says').textContent = '🗣️ ?';
                document.getElementById('mom-thought').textContent = '💭 ?';
                document.getElementById('mom-says').textContent = '🗣️ ?';
                document.getElementById('son-thought').textContent = '💭 ?';
                document.getElementById('son-says').textContent = '🗣️ ?';
                document.getElementById('daughter-thought').textContent = '💭 ?';
                document.getElementById('daughter-says').textContent = '🗣️ ?';
                document.getElementById('abilene-result').textContent = 'Click "Reveal True Preferences" to see what everyone actually wants vs. what they say...';
            }

            function revealAbilene() {
                document.getElementById('dad-thought').textContent = '💭 ' + abilenePrefs.dad.thinks;
                document.getElementById('dad-says').textContent = '🗣️ ' + abilenePrefs.dad.says;
                document.getElementById('mom-thought').textContent = '💭 ' + abilenePrefs.mom.thinks;
                document.getElementById('mom-says').textContent = '🗣️ ' + abilenePrefs.mom.says;
                document.getElementById('son-thought').textContent = '💭 ' + abilenePrefs.son.thinks;
                document.getElementById('son-says').textContent = '🗣️ ' + abilenePrefs.son.says;
                document.getElementById('daughter-thought').textContent = '💭 ' + abilenePrefs.daughter.thinks;
                document.getElementById('daughter-says').textContent = '🗣️ ' + abilenePrefs.daughter.says;

                document.getElementById('abilene-result').innerHTML =
                    '<strong style="color: #ef4444;">PARADOX REVEALED!</strong> Everyone wants to stay home, but everyone says "Let\'s go!" They all suffer through a miserable trip that nobody wanted.';
            }

            // Stockdale Paradox
            function updateStockdale() {
                const faith = parseInt(document.getElementById('faith-slider').value);
                const reality = parseInt(document.getElementById('reality-slider').value);

                document.getElementById('faith-val').textContent = faith;
                document.getElementById('reality-val').textContent = reality;

                // Calculate optimal position (high faith + high reality = best)
                const score = (faith + reality) / 2;
                const balance = Math.abs(faith - reality);

                // Position marker
                const position = faith; // Simplified: faith determines left-right
                document.getElementById('stockdale-marker').style.left = position + '%';

                // Calculate survival chance
                let survival = 0;
                let mindset = '';

                if (faith < 30 && reality > 70) {
                    survival = 20;
                    mindset = 'Pessimist';
                } else if (faith > 70 && reality < 30) {
                    survival = 30;
                    mindset = 'Delusional Optimist';
                } else if (faith > 50 && reality > 50) {
                    survival = Math.min(95, 50 + (faith + reality - 100) / 2);
                    mindset = 'Stockdale Zone!';
                } else {
                    survival = 40 + score / 5;
                    mindset = 'Unbalanced';
                }

                document.getElementById('survival-chance').textContent = Math.round(survival) + '%';
                document.getElementById('mindset-type').textContent = mindset;

                let result = '';
                if (mindset === 'Stockdale Zone!') {
                    result = '<span style="color: #22c55e;">OPTIMAL!</span> You believe you will prevail AND confront brutal facts. This is the survivor\'s mindset.';
                } else if (mindset === 'Pessimist') {
                    result = 'You see reality but have no hope. Without faith in eventual success, you may give up too soon.';
                } else if (mindset === 'Delusional Optimist') {
                    result = 'Pure optimism without reality. "We\'ll be out by Christmas!" When Christmas passes, your spirit breaks.';
                } else {
                    result = 'Find balance: high faith in ultimate success + honest confrontation of current problems.';
                }
                document.getElementById('stockdale-result').innerHTML = result;
            }

            // Triangle Dissection Paradox
            let triangleConfig = 'A';

            function toggleTriangleDissection() {
                triangleConfig = triangleConfig === 'A' ? 'B' : 'A';
                drawTriangle(false);
            }

            function showTriangleTrick() {
                drawTriangle(true);
            }

            function drawTriangle(showTrick) {
                const canvas = document.getElementById('triangle-canvas');
                const ctx = canvas.getContext('2d');
                const w = canvas.width, h = canvas.height;

                ctx.fillStyle = '#1e293b';
                ctx.fillRect(0, 0, w, h);

                const scale = 15;
                const offsetX = 50;
                const offsetY = 30;

                // Grid
                ctx.strokeStyle = '#334155';
                ctx.lineWidth = 1;
                for (let i = 0; i <= 13; i++) {
                    ctx.beginPath();
                    ctx.moveTo(offsetX + i * scale, offsetY);
                    ctx.lineTo(offsetX + i * scale, offsetY + 5 * scale);
                    ctx.stroke();
                }
                for (let i = 0; i <= 5; i++) {
                    ctx.beginPath();
                    ctx.moveTo(offsetX, offsetY + i * scale);
                    ctx.lineTo(offsetX + 13 * scale, offsetY + i * scale);
                    ctx.stroke();
                }

                // Draw pieces based on configuration
                const colors = ['#ef4444', '#3b82f6', '#22c55e', '#f59e0b'];

                if (triangleConfig === 'A') {
                    // Config A: Forms "complete" triangle
                    // Red triangle (bottom left)
                    ctx.fillStyle = colors[0];
                    ctx.beginPath();
                    ctx.moveTo(offsetX, offsetY + 5 * scale);
                    ctx.lineTo(offsetX + 5 * scale, offsetY + 5 * scale);
                    ctx.lineTo(offsetX + 5 * scale, offsetY + 3 * scale);
                    ctx.closePath();
                    ctx.fill();

                    // Blue triangle (top right)
                    ctx.fillStyle = colors[1];
                    ctx.beginPath();
                    ctx.moveTo(offsetX + 5 * scale, offsetY + 3 * scale);
                    ctx.lineTo(offsetX + 13 * scale, offsetY);
                    ctx.lineTo(offsetX + 13 * scale, offsetY + 3 * scale);
                    ctx.closePath();
                    ctx.fill();

                    // Green L-piece
                    ctx.fillStyle = colors[2];
                    ctx.fillRect(offsetX + 5 * scale, offsetY + 3 * scale, 3 * scale, 2 * scale);

                    // Yellow L-piece
                    ctx.fillStyle = colors[3];
                    ctx.fillRect(offsetX + 8 * scale, offsetY + 3 * scale, 5 * scale, 2 * scale);

                    document.getElementById('triangle-config').textContent = 'Config A';
                    document.getElementById('triangle-area').textContent = '32 sq';
                    document.getElementById('triangle-extra').textContent = 'Full';
                } else {
                    // Config B: Same pieces, different arrangement with gap
                    ctx.fillStyle = colors[0];
                    ctx.beginPath();
                    ctx.moveTo(offsetX, offsetY + 5 * scale);
                    ctx.lineTo(offsetX + 5 * scale, offsetY + 5 * scale);
                    ctx.lineTo(offsetX + 5 * scale, offsetY + 3 * scale);
                    ctx.closePath();
                    ctx.fill();

                    ctx.fillStyle = colors[1];
                    ctx.beginPath();
                    ctx.moveTo(offsetX + 5 * scale, offsetY + 2 * scale);
                    ctx.lineTo(offsetX + 13 * scale, offsetY);
                    ctx.lineTo(offsetX + 13 * scale, offsetY + 2 * scale);
                    ctx.closePath();
                    ctx.fill();

                    ctx.fillStyle = colors[2];
                    ctx.fillRect(offsetX + 5 * scale, offsetY + 2 * scale, 3 * scale, 3 * scale);

                    ctx.fillStyle = colors[3];
                    ctx.fillRect(offsetX + 8 * scale, offsetY + 2 * scale, 5 * scale, 2 * scale);

                    // Show the "gap"
                    ctx.fillStyle = '#fbbf24';
                    ctx.fillRect(offsetX + 5 * scale + 1, offsetY + 2 * scale + scale - 2, scale * 3 - 2, 4);

                    document.getElementById('triangle-config').textContent = 'Config B';
                    document.getElementById('triangle-area').textContent = '32 sq';
                    document.getElementById('triangle-extra').textContent = '+1 sq gap!';
                }

                if (showTrick) {
                    // Draw the "true" hypotenuse to show it's not straight
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(offsetX, offsetY + 5 * scale);
                    ctx.lineTo(offsetX + 13 * scale, offsetY);
                    ctx.stroke();
                    ctx.setLineDash([]);

                    document.getElementById('triangle-result').innerHTML =
                        '<strong style="color: #fbbf24;">THE TRICK:</strong> The white dashed line shows the true hypotenuse. The colored pieces don\'t form a straight line - they bow slightly, creating/hiding a tiny gap!';
                }
            }

            // Dollar Auction
            let auctionState = { yourBid: 0, oppBid: 0, round: 0, active: true, games: 0, totalProfit: 0 };

            function placeBid() {
                if (!auctionState.active) return;

                auctionState.yourBid += 5;
                auctionState.round++;
                document.getElementById('your-bid').textContent = '$' + auctionState.yourBid;
                document.getElementById('auction-round').textContent = auctionState.round;

                // AI responds
                setTimeout(() => {
                    if (auctionState.oppBid < auctionState.yourBid && auctionState.active) {
                        // AI decides whether to continue (more likely to continue if invested a lot)
                        const continueChance = Math.min(0.9, 0.5 + auctionState.oppBid / 200);
                        if (Math.random() < continueChance && auctionState.oppBid < 150) {
                            auctionState.oppBid = auctionState.yourBid + 5;
                            document.getElementById('opponent-bid').textContent = '$' + auctionState.oppBid;
                            document.getElementById('auction-result').textContent =
                                `Opponent bids $${auctionState.oppBid}. Total paid so far: $${auctionState.yourBid + auctionState.oppBid}. Keep going?`;
                        } else {
                            endAuction('you');
                        }
                    }
                    updateAuctionStats();
                }, 500);
            }

            function foldAuction() {
                if (!auctionState.active) return;
                endAuction('opponent');
            }

            function endAuction(winner) {
                auctionState.active = false;
                auctionState.games++;

                const totalPaid = auctionState.yourBid + auctionState.oppBid;
                let profit = 0;

                if (winner === 'you') {
                    profit = 100 - auctionState.yourBid; // Win $100, pay your bid
                    document.getElementById('auction-result').innerHTML =
                        `<span style="color: #22c55e;">YOU WIN!</span> Prize: $100. You paid: $${auctionState.yourBid}. Opponent paid: $${auctionState.oppBid}. Net profit: $${profit}`;
                } else {
                    profit = -auctionState.yourBid; // Lose, still pay your bid
                    document.getElementById('auction-result').innerHTML =
                        `<span style="color: #ef4444;">YOU LOSE!</span> You paid $${auctionState.yourBid} and got nothing. Opponent paid $${auctionState.oppBid} for a $100 prize.`;
                }

                auctionState.totalProfit += profit;
                document.getElementById('your-profit').textContent = (auctionState.totalProfit >= 0 ? '+$' : '-$') + Math.abs(auctionState.totalProfit);
                document.getElementById('auction-games').textContent = auctionState.games;
                document.getElementById('bid-btn').disabled = true;
            }

            function updateAuctionStats() {
                document.getElementById('total-paid').textContent = '$' + (auctionState.yourBid + auctionState.oppBid);
            }

            function resetAuction() {
                auctionState.yourBid = 0;
                auctionState.oppBid = 0;
                auctionState.round = 0;
                auctionState.active = true;
                document.getElementById('your-bid').textContent = '$0';
                document.getElementById('opponent-bid').textContent = '$0';
                document.getElementById('auction-round').textContent = '0';
                document.getElementById('total-paid').textContent = '$0';
                document.getElementById('auction-result').textContent = 'Start bidding! Remember: you pay your bid even if you lose.';
                document.getElementById('bid-btn').disabled = false;
            }

            // Paradox of Thrift
            let thriftState = { gdp: 1000, year: 0, initialGdp: 1000 };

            function updateThrift() {
                const rate = document.getElementById('savings-rate').value;
                document.getElementById('savings-rate-val').textContent = rate;
            }

            function simulateThrift() {
                const savingsRate = parseInt(document.getElementById('savings-rate').value) / 100;
                let gdp = thriftState.gdp;

                for (let i = 0; i < 10; i++) {
                    thriftState.year++;
                    // Higher savings = lower spending = lower GDP growth (simplified model)
                    const growthRate = 0.03 - (savingsRate - 0.2) * 0.15;
                    gdp = gdp * (1 + growthRate);
                }

                thriftState.gdp = Math.round(gdp);
                const spending = Math.round(gdp * (1 - savingsRate));
                const savings = Math.round(gdp * savingsRate);

                document.getElementById('gdp-bar').style.width = Math.min(100, (gdp / 1500) * 100) + '%';
                document.getElementById('gdp-value').textContent = '$' + thriftState.gdp + 'B';
                document.getElementById('spending-bar').style.width = Math.min(100, (spending / 1500) * 100) + '%';
                document.getElementById('spending-value').textContent = '$' + spending + 'B';
                document.getElementById('savings-bar').style.width = Math.min(50, (savings / 1500) * 100) + '%';
                document.getElementById('savings-value').textContent = '$' + savings + 'B';

                document.getElementById('thrift-year').textContent = thriftState.year;
                const gdpChange = ((thriftState.gdp / thriftState.initialGdp - 1) * 100).toFixed(1);
                document.getElementById('gdp-change').textContent = (gdpChange >= 0 ? '+' : '') + gdpChange + '%';
                document.getElementById('total-savings').textContent = '$' + savings + 'B';

                const paradoxActive = savingsRate > 0.3 && thriftState.gdp < thriftState.initialGdp;
                document.getElementById('paradox-active').textContent = paradoxActive ? 'Yes!' : 'No';
                document.getElementById('paradox-active').style.color = paradoxActive ? '#ef4444' : '#22c55e';

                if (paradoxActive) {
                    document.getElementById('thrift-result').innerHTML =
                        '<strong style="color: #ef4444;">PARADOX IN EFFECT!</strong> Everyone saved more, but GDP fell, so total savings are actually LOWER than if people had spent normally!';
                } else if (savingsRate > 0.5) {
                    document.getElementById('thrift-result').textContent =
                        'Very high savings are depressing the economy. Keep simulating to see the full effect.';
                } else {
                    document.getElementById('thrift-result').textContent =
                        'Economy is balanced. Try increasing savings above 50% to trigger the paradox.';
                }
            }

            function resetThrift() {
                thriftState = { gdp: 1000, year: 0, initialGdp: 1000 };
                document.getElementById('gdp-bar').style.width = '67%';
                document.getElementById('gdp-value').textContent = '$1000B';
                document.getElementById('spending-bar').style.width = '53%';
                document.getElementById('spending-value').textContent = '$800B';
                document.getElementById('savings-bar').style.width = '13%';
                document.getElementById('savings-value').textContent = '$200B';
                document.getElementById('thrift-year').textContent = '0';
                document.getElementById('gdp-change').textContent = '0%';
                document.getElementById('total-savings').textContent = '$200B';
                document.getElementById('paradox-active').textContent = 'No';
                document.getElementById('thrift-result').textContent = 'Increase the savings rate and simulate to see how individual thrift can hurt the collective economy.';
            }

            // Automation Paradox
            let autoState = { yearsAutomated: 0, incidents: 0 };

            function updateAutomation() {
                const level = parseInt(document.getElementById('auto-level').value);
                document.getElementById('auto-level-val').textContent = level;

                // Skill inversely proportional to automation
                const skill = 100 - level;
                document.getElementById('skill-fill').style.width = skill + '%';
                document.getElementById('skill-pct').textContent = skill + '%';

                // Failure rate decreases with automation, but recovery chance also decreases
                const failureRate = Math.max(0.1, (100 - level) / 50);
                const recoveryChance = skill;

                document.getElementById('failure-rate').textContent = failureRate.toFixed(1) + '%';
                document.getElementById('recovery-chance').textContent = recoveryChance + '%';

                document.getElementById('automation-result').textContent =
                    `Automation: ${level}% | Manual Skill: ${skill}% | When system fails, ${recoveryChance}% chance of successful recovery.`;
            }

            function simulateFailure() {
                const level = parseInt(document.getElementById('auto-level').value);
                const skill = 100 - level;
                autoState.yearsAutomated++;

                document.getElementById('system-status').textContent = 'FAILED!';
                document.getElementById('system-status').classList.add('failed');
                document.getElementById('system-icon').textContent = '💥';

                setTimeout(() => {
                    const recovered = Math.random() * 100 < skill;
                    if (recovered) {
                        document.getElementById('system-status').textContent = 'RECOVERED';
                        document.getElementById('system-status').classList.remove('failed');
                        document.getElementById('system-icon').textContent = '✅';
                        document.getElementById('automation-result').innerHTML =
                            '<span style="color: #22c55e;">SUCCESS!</span> Human operator had enough skill to recover from the failure.';
                    } else {
                        autoState.incidents++;
                        document.getElementById('system-icon').textContent = '🔥';
                        document.getElementById('automation-result').innerHTML =
                            '<span style="color: #ef4444;">CATASTROPHIC FAILURE!</span> Human operator skills had atrophied too much to recover.';
                    }
                    document.getElementById('years-automated').textContent = autoState.yearsAutomated;
                    document.getElementById('incidents').textContent = autoState.incidents;
                }, 1500);
            }

            function resetAutomation() {
                autoState = { yearsAutomated: 0, incidents: 0 };
                document.getElementById('years-automated').textContent = '0';
                document.getElementById('incidents').textContent = '0';
                document.getElementById('system-status').textContent = 'OPERATIONAL';
                document.getElementById('system-status').classList.remove('failed');
                document.getElementById('system-icon').textContent = '🤖';
                updateAutomation();
            }

            // Preparedness Paradox
            let prepState = { disastersHandled: 0, totalPrevented: 0 };

            function updatePreparedness() {
                const level = document.getElementById('prep-level').value;
                document.getElementById('prep-level-val').textContent = level;
                document.getElementById('prep-cost').textContent = '$' + Math.round(level / 10) + 'B';
            }

            function triggerDisaster() {
                const prepLevel = parseInt(document.getElementById('prep-level').value);
                prepState.disastersHandled++;

                const baseDamage = Math.floor(Math.random() * 50) + 50; // $50-100B potential damage
                const actualDamage = Math.max(0, baseDamage * (100 - prepLevel) / 100);
                const prevented = baseDamage - actualDamage;
                prepState.totalPrevented += prevented;

                document.getElementById('disaster-icon').textContent = '💥';
                document.getElementById('outcome-icon').textContent = actualDamage < 10 ? '✅' : actualDamage < 30 ? '⚠️' : '💀';

                let perception = '';
                if (prepLevel > 70 && actualDamage < 10) {
                    perception = '"Overreaction!"';
                    document.getElementById('outcome-label').textContent = 'Minor Impact';
                } else if (prepLevel < 30 && actualDamage > 30) {
                    perception = '"Unprepared!"';
                    document.getElementById('outcome-label').textContent = 'Major Disaster';
                } else {
                    perception = 'Mixed';
                    document.getElementById('outcome-label').textContent = 'Moderate Impact';
                }

                document.getElementById('damage-prevented').textContent = '$' + Math.round(prevented) + 'B';
                document.getElementById('public-perception').textContent = perception;
                document.getElementById('disasters-handled').textContent = prepState.disastersHandled;

                if (prepLevel > 70 && actualDamage < 10) {
                    document.getElementById('preparedness-result').innerHTML =
                        `<strong style="color: #f59e0b;">PARADOX!</strong> Preparation worked perfectly (prevented $${Math.round(prevented)}B damage), but outcome looks like the $${Math.round(prepLevel/10)}B spent was wasted.`;
                } else if (prepLevel < 30) {
                    document.getElementById('preparedness-result').innerHTML =
                        `<strong style="color: #ef4444;">DISASTER!</strong> $${Math.round(actualDamage)}B in damages. Everyone asks "Why weren't we prepared?"`;
                } else {
                    document.getElementById('preparedness-result').textContent =
                        `Preparation prevented $${Math.round(prevented)}B of the potential $${baseDamage}B damage.`;
                }

                setTimeout(() => {
                    document.getElementById('disaster-icon').textContent = '🌪️';
                }, 2000);
            }

            function resetPreparedness() {
                prepState = { disastersHandled: 0, totalPrevented: 0 };
                document.getElementById('damage-prevented').textContent = '$0B';
                document.getElementById('public-perception').textContent = 'Neutral';
                document.getElementById('disasters-handled').textContent = '0';
                document.getElementById('outcome-icon').textContent = '❓';
                document.getElementById('outcome-label').textContent = 'Outcome Unknown';
                document.getElementById('preparedness-result').textContent = 'High preparation = low visible damage = "Why did we waste all that money?"';
            }

            // Initialize new simulators
            window.addEventListener('load', () => {
                resetShip();
                simulateAbilene();
                updateStockdale();
                drawTriangle(false);
                resetAuction();
                resetThrift();
                resetAutomation();
                resetPreparedness();
            });
        </script>

        <!-- PHILOSOPHY & LOGIC PARADOXES (Chunk 2) -->
        <section id="philosophy">
            <h2 class="category-title">Philosophy & Logic Paradoxes</h2>

            <!-- Blub Paradox -->
            <div class="paradox-card">
                <h3>Blub Paradox <span class="points">19 pts</span></h3>
                <p class="description">Programmers can look "down" at less powerful languages and see what's missing, but can't look "up" at more powerful languages and see what they're missing.</p>

                <div class="simulator">
                    <h4>Programming Language Power Spectrum</h4>

                    <div class="blub-viz">
                        <div class="language-spectrum">
                            <div class="lang-level" data-lang="assembly">
                                <span class="lang-name">Assembly</span>
                                <span class="lang-features">Manual memory, No abstraction</span>
                            </div>
                            <div class="lang-level" data-lang="c">
                                <span class="lang-name">C</span>
                                <span class="lang-features">Pointers, No OOP</span>
                            </div>
                            <div class="lang-level current" data-lang="java" id="blub-current">
                                <span class="lang-name">Java (You are here)</span>
                                <span class="lang-features">OOP, Garbage Collection</span>
                                <span class="blub-indicator">👈 "Blub"</span>
                            </div>
                            <div class="lang-level hidden-power" data-lang="python">
                                <span class="lang-name">Python</span>
                                <span class="lang-features">Dynamic typing, Metaprogramming</span>
                            </div>
                            <div class="lang-level hidden-power" data-lang="lisp">
                                <span class="lang-name">Lisp</span>
                                <span class="lang-features">Macros, Code as data</span>
                            </div>
                            <div class="lang-level hidden-power" data-lang="haskell">
                                <span class="lang-name">Haskell</span>
                                <span class="lang-features">Pure FP, Type inference</span>
                            </div>
                        </div>
                        <div class="perspective-arrows">
                            <div class="arrow-down">👀 Can see what's missing below</div>
                            <div class="arrow-up">🙈 Can't see what's missing above</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <select id="blub-select" onchange="changeBlubPerspective()">
                            <option value="assembly">View from Assembly</option>
                            <option value="c">View from C</option>
                            <option value="java" selected>View from Java</option>
                            <option value="python">View from Python</option>
                            <option value="lisp">View from Lisp</option>
                            <option value="haskell">View from Haskell</option>
                        </select>
                    </div>

                    <div class="result">
                        <p id="blub-result">From Java's perspective: C and Assembly look primitive (no GC, no OOP). But what's Lisp/Haskell doing that you can't even imagine?</p>
                    </div>

                    <div class="insight">
                        Paul Graham's insight: You can't evaluate a language more powerful than your current one because you don't know what you're missing. This is why trying new paradigms matters.
                    </div>
                </div>

                <style>
                    .blub-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .language-spectrum {
                        display: flex;
                        flex-direction: column;
                        gap: 0.5rem;
                    }
                    .lang-level {
                        padding: 0.75rem 1rem;
                        background: var(--card);
                        border-radius: 0.25rem;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        transition: all 0.3s;
                        border-left: 4px solid transparent;
                    }
                    .lang-level.current {
                        background: #6366f1;
                        color: white;
                        border-left-color: #22c55e;
                    }
                    .lang-level.below {
                        opacity: 0.7;
                        border-left-color: #22c55e;
                    }
                    .lang-level.hidden-power {
                        opacity: 0.4;
                        border-left-color: #ef4444;
                    }
                    .lang-name {
                        font-weight: bold;
                    }
                    .lang-features {
                        font-size: 0.75rem;
                        color: var(--muted);
                    }
                    .lang-level.current .lang-features {
                        color: rgba(255,255,255,0.8);
                    }
                    .blub-indicator {
                        font-size: 0.875rem;
                    }
                    .perspective-arrows {
                        display: flex;
                        justify-content: space-between;
                        margin-top: 1rem;
                        font-size: 0.875rem;
                    }
                    .arrow-down { color: #22c55e; }
                    .arrow-up { color: #ef4444; }
                </style>
            </div>

            <!-- Privacy Paradox -->
            <div class="paradox-card">
                <h3>Privacy Paradox <span class="points">11 pts</span></h3>
                <p class="description">People claim to value privacy highly but consistently fail to act on it, sharing personal data freely despite knowing the risks.</p>

                <div class="simulator">
                    <h4>Data Sharing Decision Game</h4>

                    <div class="privacy-scenario">
                        <div class="scenario-card" id="privacy-scenario">
                            <div class="scenario-icon">📱</div>
                            <div class="scenario-text" id="scenario-text">A new app offers you a free service. It asks for access to your contacts, location, and browsing history.</div>
                            <div class="scenario-reward" id="scenario-reward">Reward: Free photo editing</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="privacyChoice('accept')" class="accept-btn">Accept & Share Data</button>
                        <button onclick="privacyChoice('decline')" class="decline-btn">Decline & Protect Privacy</button>
                        <button onclick="nextPrivacyScenario()">Next Scenario</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="privacy-stated">High</div>
                            <div class="stat-label">Stated Privacy Value</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="privacy-shared">0</div>
                            <div class="stat-label">Data Shared</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="privacy-protected">0</div>
                            <div class="stat-label">Data Protected</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="privacy-paradox-pct">-</div>
                            <div class="stat-label">Paradox Score</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="privacy-result">Make choices to see if your behavior matches your stated values...</p>
                    </div>

                    <div class="insight">
                        Studies show ~90% of people say privacy is important, but ~70% trade it for minor conveniences. The gap between stated preference and revealed preference is the paradox.
                    </div>
                </div>

                <style>
                    .privacy-scenario {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .scenario-card {
                        text-align: center;
                    }
                    .scenario-icon {
                        font-size: 3rem;
                        margin-bottom: 1rem;
                    }
                    .scenario-text {
                        margin-bottom: 1rem;
                    }
                    .scenario-reward {
                        color: #22c55e;
                        font-weight: bold;
                    }
                    .accept-btn {
                        background: #22c55e !important;
                    }
                    .decline-btn {
                        background: #6366f1 !important;
                    }
                </style>
            </div>

            <!-- Golf Ball Paradox -->
            <div class="paradox-card">
                <h3>Golf Ball Paradox <span class="points">9 pts</span></h3>
                <p class="description">Dimpled golf balls fly farther than smooth ones. Counter-intuitively, surface roughness REDUCES drag by creating a turbulent boundary layer.</p>

                <div class="simulator">
                    <h4>Aerodynamic Comparison</h4>

                    <div class="golf-viz">
                        <div class="ball-comparison">
                            <div class="ball-demo smooth-ball">
                                <div class="ball-surface">Smooth</div>
                                <div class="airflow-lines" id="smooth-airflow">
                                    <div class="flow-line laminar"></div>
                                    <div class="flow-line laminar"></div>
                                    <div class="wake large"></div>
                                </div>
                                <div class="ball-stats">
                                    <div>Drag: <strong>High</strong></div>
                                    <div>Distance: <strong id="smooth-dist">180 yds</strong></div>
                                </div>
                            </div>
                            <div class="ball-demo dimpled-ball">
                                <div class="ball-surface">Dimpled</div>
                                <div class="airflow-lines" id="dimpled-airflow">
                                    <div class="flow-line turbulent"></div>
                                    <div class="flow-line turbulent"></div>
                                    <div class="wake small"></div>
                                </div>
                                <div class="ball-stats">
                                    <div>Drag: <strong>Low</strong></div>
                                    <div>Distance: <strong id="dimpled-dist">280 yds</strong></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <div class="control-group">
                            <label>Club Speed: <span id="club-speed-val">100</span> mph</label>
                            <input type="range" id="club-speed" min="60" max="120" value="100" oninput="updateGolfDistance()">
                        </div>
                        <button onclick="animateGolfShot()">Animate Shot</button>
                    </div>

                    <div class="result">
                        <p id="golf-result">Dimples create turbulence that keeps airflow attached longer, reducing the wake (low pressure zone) behind the ball. Less wake = less drag = more distance.</p>
                    </div>

                    <div class="insight">
                        This principle applies beyond golf: shark skin, airplane wings, and swimsuits all use controlled roughness to reduce drag.
                    </div>
                </div>

                <style>
                    .golf-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .ball-comparison {
                        display: flex;
                        justify-content: space-around;
                        gap: 2rem;
                        flex-wrap: wrap;
                    }
                    .ball-demo {
                        text-align: center;
                        padding: 1rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                        min-width: 150px;
                    }
                    .ball-surface {
                        font-weight: bold;
                        margin-bottom: 1rem;
                    }
                    .airflow-lines {
                        height: 80px;
                        position: relative;
                        margin: 1rem 0;
                    }
                    .flow-line {
                        height: 2px;
                        position: absolute;
                        left: 10%;
                        width: 80%;
                    }
                    .flow-line.laminar {
                        background: linear-gradient(90deg, #3b82f6, #3b82f6 60%, transparent 60%);
                    }
                    .flow-line.laminar:nth-child(1) { top: 20%; }
                    .flow-line.laminar:nth-child(2) { top: 60%; }
                    .flow-line.turbulent {
                        background: linear-gradient(90deg, #3b82f6, #22c55e);
                    }
                    .flow-line.turbulent:nth-child(1) { top: 20%; }
                    .flow-line.turbulent:nth-child(2) { top: 60%; }
                    .wake {
                        position: absolute;
                        right: 5%;
                        top: 50%;
                        transform: translateY(-50%);
                        border-radius: 50%;
                    }
                    .wake.large {
                        width: 40px;
                        height: 40px;
                        background: rgba(239, 68, 68, 0.3);
                        border: 2px dashed #ef4444;
                    }
                    .wake.small {
                        width: 20px;
                        height: 20px;
                        background: rgba(34, 197, 94, 0.3);
                        border: 2px dashed #22c55e;
                    }
                    .ball-stats {
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                </style>
            </div>

            <!-- Pancake Paradox -->
            <div class="paradox-card">
                <h3>Pancake Paradox <span class="points">8 pts</span></h3>
                <p class="description">The first pancake is always bad because you need to cook one to calibrate the pan temperature. Some systems require failure to achieve success.</p>

                <div class="simulator">
                    <h4>First Attempt Simulator</h4>

                    <div class="pancake-viz">
                        <div class="pan-container">
                            <div class="pan" id="pancake-pan">
                                <div class="pancake" id="current-pancake"></div>
                                <div class="temp-indicator" id="pan-temp">🌡️ Cold</div>
                            </div>
                        </div>
                        <div class="pancake-stack" id="pancake-stack">
                            <div class="stack-label">Pancake Stack</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="cookPancake()">Cook Pancake</button>
                        <button onclick="resetPancakes()">Start Over</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="pancake-count">0</div>
                            <div class="stat-label">Pancakes Made</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="pan-temperature">Cold</div>
                            <div class="stat-label">Pan Status</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="pancake-quality">-</div>
                            <div class="stat-label">Current Quality</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="good-pancakes">0</div>
                            <div class="stat-label">Good Pancakes</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="pancake-result">Cook pancakes to see the first-attempt phenomenon in action...</p>
                    </div>

                    <div class="insight">
                        This applies everywhere: first drafts, prototypes, pilots. The "first pancake" teaches you what you need to know for success. Embrace necessary failures.
                    </div>
                </div>

                <style>
                    .pancake-viz {
                        display: flex;
                        justify-content: space-around;
                        align-items: center;
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        flex-wrap: wrap;
                        gap: 2rem;
                    }
                    .pan-container {
                        text-align: center;
                    }
                    .pan {
                        width: 150px;
                        height: 150px;
                        background: linear-gradient(145deg, #374151, #1f2937);
                        border-radius: 50%;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        border: 8px solid #4b5563;
                        position: relative;
                    }
                    .pancake {
                        width: 100px;
                        height: 100px;
                        border-radius: 50%;
                        transition: all 0.5s;
                    }
                    .pancake.cooking {
                        animation: sizzle 0.3s infinite;
                    }
                    @keyframes sizzle {
                        0%, 100% { transform: scale(1); }
                        50% { transform: scale(1.02); }
                    }
                    .pancake.bad {
                        background: linear-gradient(145deg, #78350f, #451a03);
                    }
                    .pancake.ok {
                        background: linear-gradient(145deg, #ca8a04, #a16207);
                    }
                    .pancake.good {
                        background: linear-gradient(145deg, #fbbf24, #f59e0b);
                    }
                    .temp-indicator {
                        position: absolute;
                        bottom: -30px;
                        font-size: 0.875rem;
                    }
                    .pancake-stack {
                        min-width: 120px;
                    }
                    .stack-label {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                        text-align: center;
                    }
                    .stacked-pancake {
                        width: 80px;
                        height: 15px;
                        margin: 2px auto;
                        border-radius: 50%;
                    }
                </style>
            </div>
        </section>

        <script>
            // Blub Paradox
            function changeBlubPerspective() {
                const selected = document.getElementById('blub-select').value;
                const levels = document.querySelectorAll('.lang-level');
                const langOrder = ['assembly', 'c', 'java', 'python', 'lisp', 'haskell'];
                const selectedIndex = langOrder.indexOf(selected);

                levels.forEach((level, i) => {
                    level.classList.remove('current', 'below', 'hidden-power');
                    const levelLang = level.getAttribute('data-lang');
                    const levelIndex = langOrder.indexOf(levelLang);

                    if (levelIndex === selectedIndex) {
                        level.classList.add('current');
                        level.querySelector('.lang-name').textContent = langOrder[levelIndex].charAt(0).toUpperCase() + langOrder[levelIndex].slice(1) + ' (You are here)';
                    } else if (levelIndex < selectedIndex) {
                        level.classList.add('below');
                        level.querySelector('.lang-name').textContent = langOrder[levelIndex].charAt(0).toUpperCase() + langOrder[levelIndex].slice(1);
                    } else {
                        level.classList.add('hidden-power');
                        level.querySelector('.lang-name').textContent = langOrder[levelIndex].charAt(0).toUpperCase() + langOrder[levelIndex].slice(1);
                    }
                });

                const results = {
                    'assembly': 'From Assembly: Everything above looks like unnecessary abstraction. Why do you need OOP?',
                    'c': 'From C: Assembly is tedious, but Java\'s garbage collection seems wasteful. What\'s functional programming even for?',
                    'java': 'From Java: C and Assembly look primitive. But what\'s Lisp doing with macros that you can\'t even imagine?',
                    'python': 'From Python: Java is verbose. But Haskell\'s type system and purity... why would you want that?',
                    'lisp': 'From Lisp: Most languages lack macros and homoiconicity. But even Lispers miss Haskell\'s guarantees.',
                    'haskell': 'From Haskell: You can see the flaws in everything below. But are there languages above even this?'
                };
                document.getElementById('blub-result').textContent = results[selected];
            }

            // Privacy Paradox
            let privacyStats = { shared: 0, protected: 0, scenario: 0 };
            const privacyScenarios = [
                { icon: '📱', text: 'A free app wants access to your contacts, location, and browsing history.', reward: 'Free photo editing' },
                { icon: '🎁', text: 'Store offers 10% discount if you share your purchase history and email.', reward: '10% off next purchase' },
                { icon: '🎮', text: 'Game wants access to your friend list and will post on your behalf.', reward: 'Free premium features' },
                { icon: '📧', text: 'Newsletter promises exclusive content if you share your profile data.', reward: 'Exclusive articles' },
                { icon: '🏪', text: 'Grocery store tracks all purchases for personalized coupons.', reward: '$5 off groceries' },
                { icon: '🚗', text: 'Insurance offers lower rates if you install driving monitoring app.', reward: '15% rate reduction' }
            ];

            function privacyChoice(choice) {
                if (choice === 'accept') {
                    privacyStats.shared++;
                } else {
                    privacyStats.protected++;
                }

                document.getElementById('privacy-shared').textContent = privacyStats.shared;
                document.getElementById('privacy-protected').textContent = privacyStats.protected;

                const total = privacyStats.shared + privacyStats.protected;
                const shareRate = total > 0 ? Math.round((privacyStats.shared / total) * 100) : 0;
                document.getElementById('privacy-paradox-pct').textContent = shareRate + '%';

                let result = '';
                if (shareRate > 60) {
                    result = `PARADOX DETECTED: You share data ${shareRate}% of the time despite "valuing privacy." Your revealed preference differs from stated preference!`;
                } else if (shareRate > 30) {
                    result = `Mixed behavior: ${shareRate}% sharing rate. You sometimes trade privacy for convenience - a common human pattern.`;
                } else {
                    result = `Consistent: ${shareRate}% sharing rate. Your behavior matches your stated privacy values. You're in the minority!`;
                }
                document.getElementById('privacy-result').textContent = result;

                nextPrivacyScenario();
            }

            function nextPrivacyScenario() {
                privacyStats.scenario = (privacyStats.scenario + 1) % privacyScenarios.length;
                const s = privacyScenarios[privacyStats.scenario];
                document.querySelector('.scenario-icon').textContent = s.icon;
                document.getElementById('scenario-text').textContent = s.text;
                document.getElementById('scenario-reward').textContent = 'Reward: ' + s.reward;
            }

            // Golf Ball Paradox
            function updateGolfDistance() {
                const speed = parseInt(document.getElementById('club-speed').value);
                document.getElementById('club-speed-val').textContent = speed;

                const smoothDist = Math.round(speed * 1.8);
                const dimpledDist = Math.round(speed * 2.8);

                document.getElementById('smooth-dist').textContent = smoothDist + ' yds';
                document.getElementById('dimpled-dist').textContent = dimpledDist + ' yds';
            }

            function animateGolfShot() {
                document.getElementById('golf-result').innerHTML =
                    '<strong>Shot comparison:</strong> The dimpled ball travels ~55% farther because its turbulent boundary layer delays flow separation, creating a smaller wake and less pressure drag.';
            }

            // Pancake Paradox
            let pancakeState = { count: 0, panTemp: 0, goodPancakes: 0 };

            function cookPancake() {
                pancakeState.count++;
                pancakeState.panTemp = Math.min(100, pancakeState.panTemp + 35);

                const pancake = document.getElementById('current-pancake');
                pancake.classList.add('cooking');

                setTimeout(() => {
                    pancake.classList.remove('cooking');

                    let quality = '';
                    let qualityClass = '';

                    if (pancakeState.count === 1) {
                        quality = 'Bad ❌';
                        qualityClass = 'bad';
                        document.getElementById('pancake-result').textContent =
                            'First pancake is bad! Pan was too cold. But now it\'s heating up...';
                    } else if (pancakeState.panTemp < 70) {
                        quality = 'OK 😐';
                        qualityClass = 'ok';
                        document.getElementById('pancake-result').textContent =
                            'Pan still calibrating. Getting better!';
                    } else {
                        quality = 'Perfect! ✨';
                        qualityClass = 'good';
                        pancakeState.goodPancakes++;
                        document.getElementById('pancake-result').textContent =
                            'Perfect pancake! The first one\'s sacrifice was not in vain.';
                    }

                    pancake.className = 'pancake ' + qualityClass;

                    // Add to stack
                    const stack = document.getElementById('pancake-stack');
                    const stackedPancake = document.createElement('div');
                    stackedPancake.className = 'stacked-pancake ' + qualityClass;
                    stack.appendChild(stackedPancake);

                    // Update stats
                    document.getElementById('pancake-count').textContent = pancakeState.count;
                    document.getElementById('pan-temperature').textContent =
                        pancakeState.panTemp < 50 ? 'Cold' : pancakeState.panTemp < 80 ? 'Warming' : 'Perfect!';
                    document.getElementById('pan-temp').textContent =
                        pancakeState.panTemp < 50 ? '🌡️ Cold' : pancakeState.panTemp < 80 ? '🌡️ Warm' : '🌡️ Hot!';
                    document.getElementById('pancake-quality').textContent = quality;
                    document.getElementById('good-pancakes').textContent = pancakeState.goodPancakes;
                }, 1000);
            }

            function resetPancakes() {
                pancakeState = { count: 0, panTemp: 0, goodPancakes: 0 };
                document.getElementById('current-pancake').className = 'pancake';
                document.getElementById('pancake-stack').innerHTML = '<div class="stack-label">Pancake Stack</div>';
                document.getElementById('pancake-count').textContent = '0';
                document.getElementById('pan-temperature').textContent = 'Cold';
                document.getElementById('pan-temp').textContent = '🌡️ Cold';
                document.getElementById('pancake-quality').textContent = '-';
                document.getElementById('good-pancakes').textContent = '0';
                document.getElementById('pancake-result').textContent = 'Cook pancakes to see the first-attempt phenomenon in action...';
            }

            // Initialize chunk 2 simulators
            window.addEventListener('load', () => {
                changeBlubPerspective();
                nextPrivacyScenario();
                updateGolfDistance();
                resetPancakes();
            });
        </script>

        <!-- DECISION THEORY PARADOXES (NEW from pages 21-30) -->
        <section id="decisions">
            <h2 class="category-title">Decision Theory Paradoxes</h2>

            <!-- Newcomb's Paradox -->
            <div class="paradox-card">
                <h3>Newcomb's Paradox <span class="points">5 pts</span></h3>
                <p class="description">A predictor who is almost always right offers two boxes. Box A has $1,000 (visible). Box B has either $1M or $0, depending on whether the predictor thought you'd take one box or both.</p>

                <div class="simulator">
                    <h4>The Predictor's Game</h4>
                    <p style="margin-bottom: 1rem; color: var(--muted);">The predictor is 90% accurate. They've already made their prediction and filled the boxes.</p>

                    <div class="newcomb-viz">
                        <div class="newcomb-boxes">
                            <div class="newcomb-box transparent" id="box-a">
                                <div class="box-label">Box A (Transparent)</div>
                                <div class="box-content">$1,000</div>
                            </div>
                            <div class="newcomb-box opaque" id="box-b">
                                <div class="box-label">Box B (Opaque)</div>
                                <div class="box-content">???</div>
                            </div>
                        </div>
                        <div class="predictor">
                            <div class="predictor-icon">🔮</div>
                            <div class="predictor-text" id="predictor-thought">The predictor is watching...</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="newcombChoice('one')">Take Only Box B</button>
                        <button onclick="newcombChoice('both')">Take Both Boxes</button>
                        <button onclick="resetNewcomb()">Reset</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="newcomb-games">0</div>
                            <div class="stat-label">Games Played</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="newcomb-one-avg">$0</div>
                            <div class="stat-label">Avg (One Box)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="newcomb-both-avg">$0</div>
                            <div class="stat-label">Avg (Both)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="newcomb-total">$0</div>
                            <div class="stat-label">Total Winnings</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="newcomb-result">Two schools of thought: "one-boxers" (take only B, trust the predictor) vs "two-boxers" (take both, the money is already there).</p>
                    </div>

                    <div class="insight">
                        Causal decision theory says take both (the prediction is already made). Evidential decision theory says take one (your choice is evidence of the prediction).
                    </div>
                </div>

                <style>
                    .newcomb-viz {
                        padding: 2rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        text-align: center;
                    }
                    .newcomb-boxes {
                        display: flex;
                        justify-content: center;
                        gap: 2rem;
                        margin-bottom: 1.5rem;
                    }
                    .newcomb-box {
                        width: 140px;
                        height: 140px;
                        border-radius: 0.5rem;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.3s;
                    }
                    .newcomb-box.transparent {
                        background: rgba(59, 130, 246, 0.2);
                        border: 3px solid #3b82f6;
                    }
                    .newcomb-box.opaque {
                        background: #1e293b;
                        border: 3px solid #64748b;
                    }
                    .newcomb-box.selected {
                        transform: scale(1.1);
                        box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
                    }
                    .newcomb-box.revealed {
                        background: rgba(34, 197, 94, 0.2);
                        border-color: #22c55e;
                    }
                    .box-label {
                        font-size: 0.75rem;
                        color: var(--muted);
                        margin-bottom: 0.5rem;
                    }
                    .box-content {
                        font-size: 1.5rem;
                        font-weight: bold;
                    }
                    .predictor {
                        margin-top: 1rem;
                    }
                    .predictor-icon {
                        font-size: 2rem;
                    }
                    .predictor-text {
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                </style>
            </div>

            <!-- Parrondo's Paradox -->
            <div class="paradox-card">
                <h3>Parrondo's Paradox <span class="points">4 pts</span></h3>
                <p class="description">Two losing gambling strategies can be combined to create a winning strategy! By alternating between them, you can come out ahead.</p>

                <div class="simulator">
                    <h4>Two Losing Games</h4>

                    <div class="parrondo-viz">
                        <div class="game-display">
                            <div class="game-card" id="game-a">
                                <div class="game-title">Game A (Coin Flip)</div>
                                <div class="game-odds">49% win chance</div>
                                <div class="game-result" id="game-a-result">-</div>
                            </div>
                            <div class="game-card" id="game-b">
                                <div class="game-title">Game B (Capital-based)</div>
                                <div class="game-odds">Varies by capital</div>
                                <div class="game-result" id="game-b-result">-</div>
                            </div>
                        </div>
                        <div class="capital-display">
                            <div class="capital-label">Your Capital</div>
                            <div class="capital-value" id="parrondo-capital">$100</div>
                            <div class="capital-bar">
                                <div class="capital-fill" id="capital-fill" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="playParrondo('A')">Play Game A Only</button>
                        <button onclick="playParrondo('B')">Play Game B Only</button>
                        <button onclick="playParrondo('AB')">Alternate A-B</button>
                        <button onclick="resetParrondo()">Reset</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="parrondo-rounds">0</div>
                            <div class="stat-label">Rounds</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="parrondo-a-net">$0</div>
                            <div class="stat-label">Game A Net</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="parrondo-b-net">$0</div>
                            <div class="stat-label">Game B Net</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="parrondo-ab-net">$0</div>
                            <div class="stat-label">A+B Net</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="parrondo-result">Play each strategy 100 times to see the paradox emerge...</p>
                    </div>

                    <div class="insight">
                        Game A: slightly losing coin flip. Game B: lose if capital divisible by 3, else good odds. Alternating breaks the pattern that makes B lose!
                    </div>
                </div>

                <style>
                    .parrondo-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .game-display {
                        display: flex;
                        justify-content: center;
                        gap: 2rem;
                        margin-bottom: 1.5rem;
                    }
                    .game-card {
                        padding: 1rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                        text-align: center;
                        min-width: 150px;
                    }
                    .game-title {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .game-odds {
                        font-size: 0.75rem;
                        color: var(--muted);
                    }
                    .game-result {
                        font-size: 1.5rem;
                        margin-top: 0.5rem;
                    }
                    .capital-display {
                        text-align: center;
                    }
                    .capital-label {
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                    .capital-value {
                        font-size: 2rem;
                        font-weight: bold;
                        color: var(--primary);
                    }
                    .capital-bar {
                        width: 100%;
                        height: 20px;
                        background: var(--card);
                        border-radius: 0.25rem;
                        overflow: hidden;
                        margin-top: 0.5rem;
                    }
                    .capital-fill {
                        height: 100%;
                        background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
                        transition: width 0.3s;
                    }
                </style>
            </div>

            <!-- Ellsberg Paradox -->
            <div class="paradox-card">
                <h3>Ellsberg Paradox <span class="points">4 pts</span></h3>
                <p class="description">People prefer known risks over unknown risks, even when the expected values are identical. We're ambiguity-averse, not just risk-averse.</p>

                <div class="simulator">
                    <h4>The Urn Experiment</h4>
                    <p style="margin-bottom: 1rem; color: var(--muted);">An urn has 90 balls: 30 red, and 60 that are either black or yellow (unknown ratio). You win $100 if you draw your chosen color.</p>

                    <div class="ellsberg-viz">
                        <div class="urn-container">
                            <div class="urn">
                                <div class="ball red">30</div>
                                <div class="ball unknown">60 (B or Y)</div>
                            </div>
                        </div>

                        <div class="gamble-choices">
                            <div class="gamble-set">
                                <div class="gamble-title">Gamble 1: Choose your bet</div>
                                <button onclick="ellsbergChoice(1, 'red')" id="g1-red">Bet on RED (30/90 = 33%)</button>
                                <button onclick="ellsbergChoice(1, 'black')" id="g1-black">Bet on BLACK (?/90 = ?%)</button>
                            </div>
                            <div class="gamble-set">
                                <div class="gamble-title">Gamble 2: Choose your bet</div>
                                <button onclick="ellsbergChoice(2, 'red-yellow')" id="g2-ry">Bet on RED or YELLOW</button>
                                <button onclick="ellsbergChoice(2, 'black-yellow')" id="g2-by">Bet on BLACK or YELLOW</button>
                            </div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="ellsberg-result">Most people choose RED in Gamble 1 (known probability) but BLACK+YELLOW in Gamble 2. This is inconsistent! Can you see why?</p>
                    </div>

                    <div class="insight">
                        If you prefer Red (Gamble 1), you should prefer Red+Yellow (Gamble 2). The inconsistency reveals we're not maximizing expected utility—we're avoiding ambiguity.
                    </div>
                </div>

                <style>
                    .ellsberg-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .urn-container {
                        display: flex;
                        justify-content: center;
                        margin-bottom: 1.5rem;
                    }
                    .urn {
                        width: 150px;
                        height: 180px;
                        background: linear-gradient(180deg, #374151, #1f2937);
                        border-radius: 0 0 50% 50%;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        gap: 0.5rem;
                        padding: 1rem;
                    }
                    .ball {
                        padding: 0.5rem 1rem;
                        border-radius: 2rem;
                        font-size: 0.875rem;
                        font-weight: bold;
                    }
                    .ball.red {
                        background: #ef4444;
                        color: white;
                    }
                    .ball.unknown {
                        background: linear-gradient(90deg, #1f2937, #fbbf24);
                        color: white;
                    }
                    .gamble-choices {
                        display: flex;
                        flex-direction: column;
                        gap: 1rem;
                    }
                    .gamble-set {
                        text-align: center;
                    }
                    .gamble-title {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .gamble-set button {
                        margin: 0.25rem;
                    }
                    .gamble-set button.selected {
                        background: #22c55e !important;
                    }
                </style>
            </div>

            <!-- Region-Beta Paradox -->
            <div class="paradox-card">
                <h3>Region-Beta Paradox <span class="points">5 pts</span></h3>
                <p class="description">We often recover FASTER from intense negative events than mild ones. Severe trauma triggers coping mechanisms; minor annoyances don't.</p>

                <div class="simulator">
                    <h4>Recovery Time Simulator</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Event Severity: <span id="severity-val">50</span>%</label>
                            <input type="range" id="severity-slider" min="0" max="100" value="50" oninput="updateRegionBeta()">
                        </div>
                    </div>

                    <div class="region-beta-viz">
                        <div class="event-display">
                            <div class="event-icon" id="event-icon">😐</div>
                            <div class="event-label" id="event-label">Moderate Setback</div>
                        </div>
                        <div class="recovery-display">
                            <div class="recovery-label">Recovery Time</div>
                            <div class="recovery-bar">
                                <div class="recovery-fill" id="recovery-fill" style="width: 50%"></div>
                            </div>
                            <div class="recovery-time" id="recovery-time">~3 months</div>
                        </div>
                        <div class="coping-display">
                            <div class="coping-label">Coping Mechanisms Triggered</div>
                            <div class="coping-list" id="coping-list">
                                <span class="coping-item inactive">Therapy</span>
                                <span class="coping-item inactive">Support</span>
                                <span class="coping-item inactive">Meaning</span>
                            </div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="region-beta-result">Adjust severity to see how recovery time changes non-linearly...</p>
                    </div>

                    <div class="insight">
                        "Psychological immune system" kicks in for major events. A bad grade might bother you for weeks, but failing completely triggers rationalization and recovery.
                    </div>
                </div>

                <style>
                    .region-beta-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        text-align: center;
                    }
                    .event-display {
                        margin-bottom: 1.5rem;
                    }
                    .event-icon {
                        font-size: 3rem;
                    }
                    .event-label {
                        font-weight: bold;
                        margin-top: 0.5rem;
                    }
                    .recovery-display {
                        margin-bottom: 1.5rem;
                    }
                    .recovery-label {
                        font-size: 0.875rem;
                        color: var(--muted);
                        margin-bottom: 0.5rem;
                    }
                    .recovery-bar {
                        width: 100%;
                        height: 30px;
                        background: var(--card);
                        border-radius: 0.25rem;
                        overflow: hidden;
                    }
                    .recovery-fill {
                        height: 100%;
                        background: linear-gradient(90deg, #22c55e, #f59e0b, #ef4444);
                        transition: width 0.5s;
                    }
                    .recovery-time {
                        font-size: 1.25rem;
                        font-weight: bold;
                        margin-top: 0.5rem;
                    }
                    .coping-list {
                        display: flex;
                        justify-content: center;
                        gap: 0.5rem;
                        flex-wrap: wrap;
                    }
                    .coping-item {
                        padding: 0.25rem 0.75rem;
                        background: var(--card);
                        border-radius: 1rem;
                        font-size: 0.875rem;
                    }
                    .coping-item.active {
                        background: #22c55e;
                        color: white;
                    }
                    .coping-item.inactive {
                        opacity: 0.4;
                    }
                </style>
            </div>
        </section>

        <!-- QUANTUM PARADOXES (NEW from pages 21-30) -->
        <section id="quantum">
            <h2 class="category-title">Quantum & Logic Paradoxes</h2>

            <!-- Liar's Paradox -->
            <div class="paradox-card">
                <h3>Liar's Paradox <span class="points">4 pts</span></h3>
                <p class="description">"This sentence is false." If it's true, then it's false. If it's false, then it's true. 2,500 years old and still unsolved.</p>

                <div class="simulator">
                    <h4>Truth Value Explorer</h4>

                    <div class="liar-viz">
                        <div class="statement-box" id="liar-statement">
                            <div class="statement-text">"This sentence is false."</div>
                            <div class="truth-value" id="truth-value">???</div>
                        </div>
                        <div class="logic-chain" id="logic-chain">
                            <div class="logic-step">Click a button to trace the logic...</div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="assumeLiar('true')">Assume TRUE</button>
                        <button onclick="assumeLiar('false')">Assume FALSE</button>
                        <button onclick="resetLiar()">Reset</button>
                    </div>

                    <div class="result">
                        <p id="liar-result">This paradox challenged Aristotle, Russell, Tarski, and Gödel. It's at the heart of incompleteness theorems.</p>
                    </div>

                    <div class="insight">
                        Solutions include: truth-value gaps (neither true nor false), hierarchies of truth, or abandoning classical logic. None fully satisfy everyone.
                    </div>
                </div>

                <style>
                    .liar-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        text-align: center;
                    }
                    .statement-box {
                        padding: 1.5rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                        margin-bottom: 1rem;
                    }
                    .statement-text {
                        font-size: 1.25rem;
                        font-style: italic;
                        margin-bottom: 0.5rem;
                    }
                    .truth-value {
                        font-size: 2rem;
                        font-weight: bold;
                    }
                    .truth-value.true { color: #22c55e; }
                    .truth-value.false { color: #ef4444; }
                    .truth-value.paradox { color: #f59e0b; animation: pulse 1s infinite; }
                    @keyframes pulse {
                        50% { opacity: 0.5; }
                    }
                    .logic-chain {
                        text-align: left;
                        padding: 1rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                    }
                    .logic-step {
                        padding: 0.5rem;
                        margin: 0.25rem 0;
                        border-left: 3px solid var(--primary);
                        padding-left: 1rem;
                    }
                    .logic-step.contradiction {
                        border-left-color: #ef4444;
                        color: #ef4444;
                    }
                </style>
            </div>

            <!-- Ross-Littlewood Paradox -->
            <div class="paradox-card">
                <h3>Ross-Littlewood Paradox <span class="points">4 pts</span></h3>
                <p class="description">Add 10 balls to a vase, remove 1. Repeat infinitely before noon. How many balls at noon? Mathematically: ZERO!</p>

                <div class="simulator">
                    <h4>Infinite Ball Experiment</h4>

                    <div class="ross-viz">
                        <div class="vase-container">
                            <div class="vase" id="ross-vase">
                                <div class="ball-count" id="ball-count">0</div>
                            </div>
                            <div class="step-display">
                                <div class="step-label">Step <span id="ross-step">0</span></div>
                                <div class="step-action" id="step-action">Click to begin...</div>
                            </div>
                        </div>
                        <div class="removed-balls">
                            <div class="removed-label">Removed Balls</div>
                            <div class="removed-list" id="removed-list"></div>
                        </div>
                    </div>

                    <div class="controls" style="margin-top: 1rem;">
                        <button onclick="rossStep()">Next Step</button>
                        <button onclick="rossAuto()">Auto (10 steps)</button>
                        <button onclick="rossInfinity()">Skip to ∞</button>
                        <button onclick="resetRoss()">Reset</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="ross-added">0</div>
                            <div class="stat-label">Total Added</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ross-removed">0</div>
                            <div class="stat-label">Total Removed</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ross-in-vase">0</div>
                            <div class="stat-label">In Vase</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="ross-result">At step n, we add balls 10n-9 to 10n, and remove ball n. Every ball gets removed eventually!</p>
                    </div>

                    <div class="insight">
                        Ball 1 is removed at step 1. Ball 2 at step 2. Ball k at step k. For ANY ball number k, it's removed at step k. So at infinity, all balls are gone!
                    </div>
                </div>

                <style>
                    .ross-viz {
                        display: flex;
                        justify-content: space-around;
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        flex-wrap: wrap;
                        gap: 2rem;
                    }
                    .vase-container {
                        text-align: center;
                    }
                    .vase {
                        width: 120px;
                        height: 160px;
                        background: linear-gradient(180deg, transparent 0%, rgba(59, 130, 246, 0.2) 30%, rgba(59, 130, 246, 0.4) 100%);
                        border: 3px solid #3b82f6;
                        border-radius: 0 0 40% 40%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin: 0 auto;
                    }
                    .ball-count {
                        font-size: 2rem;
                        font-weight: bold;
                        color: #3b82f6;
                    }
                    .step-display {
                        margin-top: 1rem;
                    }
                    .step-label {
                        font-weight: bold;
                    }
                    .step-action {
                        font-size: 0.875rem;
                        color: var(--muted);
                    }
                    .removed-balls {
                        text-align: center;
                    }
                    .removed-label {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .removed-list {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 4px;
                        max-width: 200px;
                        justify-content: center;
                    }
                    .removed-ball {
                        width: 24px;
                        height: 24px;
                        background: #ef4444;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 0.625rem;
                        color: white;
                    }
                </style>
            </div>

            <!-- Interesting Number Paradox -->
            <div class="paradox-card">
                <h3>Interesting Number Paradox <span class="points">4 pts</span></h3>
                <p class="description">Every positive integer is interesting. Proof: The smallest uninteresting integer would be interesting for being the smallest!</p>

                <div class="simulator">
                    <h4>Number Interest Checker</h4>

                    <div class="controls">
                        <div class="control-group">
                            <label>Enter a number:</label>
                            <input type="number" id="interest-number" min="1" max="10000" value="42" style="width: 100px;">
                        </div>
                        <button onclick="checkInteresting()">Is It Interesting?</button>
                    </div>

                    <div class="interest-viz">
                        <div class="number-display" id="number-display">42</div>
                        <div class="interest-facts" id="interest-facts">
                            <div class="fact">Click to discover why this number is interesting...</div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="interest-result">The paradox: If "uninteresting" numbers existed, the smallest would be interesting—a contradiction!</p>
                    </div>

                    <div class="insight">
                        This is a "self-defeating" argument. The set of uninteresting numbers must be empty, or we immediately find an interesting member.
                    </div>
                </div>

                <style>
                    .interest-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                        text-align: center;
                    }
                    .number-display {
                        font-size: 4rem;
                        font-weight: bold;
                        color: var(--primary);
                        margin-bottom: 1rem;
                    }
                    .interest-facts {
                        text-align: left;
                        max-width: 400px;
                        margin: 0 auto;
                    }
                    .fact {
                        padding: 0.5rem;
                        background: var(--card);
                        border-radius: 0.25rem;
                        margin: 0.25rem 0;
                        font-size: 0.875rem;
                    }
                    .fact.highlight {
                        background: rgba(34, 197, 94, 0.2);
                        border-left: 3px solid #22c55e;
                    }
                </style>
            </div>

            <!-- Paradoxical Intention -->
            <div class="paradox-card">
                <h3>Paradoxical Intention <span class="points">4 pts</span></h3>
                <p class="description">Try to do what you fear. Insomniac? Try to stay awake. Anxious about blushing? Try to blush more. The paradoxical effort often solves the problem.</p>

                <div class="simulator">
                    <h4>Paradoxical Therapy Simulator</h4>

                    <div class="paradox-intention-viz">
                        <div class="problem-select">
                            <label>Select a problem:</label>
                            <select id="problem-type" onchange="updateProblem()">
                                <option value="insomnia">Insomnia (Can't sleep)</option>
                                <option value="anxiety">Social Anxiety</option>
                                <option value="stutter">Stuttering</option>
                                <option value="blush">Blushing</option>
                            </select>
                        </div>

                        <div class="approach-comparison">
                            <div class="approach traditional">
                                <div class="approach-title">Traditional Approach</div>
                                <div class="approach-instruction" id="trad-instruction">Try harder to fall asleep</div>
                                <div class="approach-result" id="trad-result">
                                    <div class="meter">
                                        <div class="meter-fill stress" style="width: 80%"></div>
                                    </div>
                                    <span>High stress, problem persists</span>
                                </div>
                            </div>
                            <div class="approach paradoxical">
                                <div class="approach-title">Paradoxical Intention</div>
                                <div class="approach-instruction" id="para-instruction">Try to stay awake as long as possible</div>
                                <div class="approach-result" id="para-result">
                                    <div class="meter">
                                        <div class="meter-fill relief" style="width: 30%"></div>
                                    </div>
                                    <span>Low stress, often resolves</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="result">
                        <p id="intention-result">Developed by Viktor Frankl. By trying to do what you fear, you remove the fear of it happening—which often prevents it.</p>
                    </div>

                    <div class="insight">
                        The technique works because anxiety about a problem often causes the problem. Remove the anxiety through acceptance, and the problem diminishes.
                    </div>
                </div>

                <style>
                    .paradox-intention-viz {
                        padding: 1.5rem;
                        background: var(--bg);
                        border-radius: 0.5rem;
                        margin-top: 1rem;
                    }
                    .problem-select {
                        text-align: center;
                        margin-bottom: 1.5rem;
                    }
                    .problem-select select {
                        padding: 0.5rem;
                        border-radius: 0.25rem;
                        background: var(--card);
                        color: var(--text);
                        border: 1px solid var(--muted);
                    }
                    .approach-comparison {
                        display: flex;
                        gap: 1rem;
                        flex-wrap: wrap;
                    }
                    .approach {
                        flex: 1;
                        min-width: 200px;
                        padding: 1rem;
                        background: var(--card);
                        border-radius: 0.5rem;
                    }
                    .approach-title {
                        font-weight: bold;
                        margin-bottom: 0.5rem;
                    }
                    .approach.traditional .approach-title {
                        color: #ef4444;
                    }
                    .approach.paradoxical .approach-title {
                        color: #22c55e;
                    }
                    .approach-instruction {
                        font-style: italic;
                        font-size: 0.875rem;
                        margin-bottom: 1rem;
                        color: var(--muted);
                    }
                    .meter {
                        height: 10px;
                        background: var(--bg);
                        border-radius: 5px;
                        overflow: hidden;
                        margin-bottom: 0.5rem;
                    }
                    .meter-fill.stress {
                        height: 100%;
                        background: #ef4444;
                    }
                    .meter-fill.relief {
                        height: 100%;
                        background: #22c55e;
                    }
                    .approach-result span {
                        font-size: 0.75rem;
                        color: var(--muted);
                    }
                </style>
            </div>
        </section>

        <script>
            // Newcomb's Paradox
            let newcombStats = { games: 0, oneBoxTotal: 0, oneBoxGames: 0, bothBoxTotal: 0, bothBoxGames: 0 };

            function newcombChoice(choice) {
                newcombStats.games++;
                const predictorAccuracy = 0.9;
                let winnings = 0;
                let boxBContent = 0;

                if (choice === 'one') {
                    // Predictor predicted one-box 90% of the time
                    boxBContent = Math.random() < predictorAccuracy ? 1000000 : 0;
                    winnings = boxBContent;
                    newcombStats.oneBoxTotal += winnings;
                    newcombStats.oneBoxGames++;
                } else {
                    // Predictor predicted two-box 90% of the time
                    boxBContent = Math.random() < predictorAccuracy ? 0 : 1000000;
                    winnings = 1000 + boxBContent;
                    newcombStats.bothBoxTotal += winnings;
                    newcombStats.bothBoxGames++;
                }

                document.getElementById('box-b').querySelector('.box-content').textContent =
                    boxBContent === 1000000 ? '$1,000,000' : '$0';
                document.getElementById('box-b').classList.add('revealed');

                if (choice === 'one') {
                    document.getElementById('box-b').classList.add('selected');
                } else {
                    document.getElementById('box-a').classList.add('selected');
                    document.getElementById('box-b').classList.add('selected');
                }

                document.getElementById('predictor-thought').textContent =
                    `The predictor ${boxBContent > 0 ? 'predicted one-box' : 'predicted two-box'}. You won $${winnings.toLocaleString()}!`;

                updateNewcombStats();
            }

            function updateNewcombStats() {
                document.getElementById('newcomb-games').textContent = newcombStats.games;
                document.getElementById('newcomb-one-avg').textContent =
                    newcombStats.oneBoxGames > 0 ? '$' + Math.round(newcombStats.oneBoxTotal / newcombStats.oneBoxGames).toLocaleString() : '$0';
                document.getElementById('newcomb-both-avg').textContent =
                    newcombStats.bothBoxGames > 0 ? '$' + Math.round(newcombStats.bothBoxTotal / newcombStats.bothBoxGames).toLocaleString() : '$0';
                document.getElementById('newcomb-total').textContent =
                    '$' + (newcombStats.oneBoxTotal + newcombStats.bothBoxTotal).toLocaleString();
            }

            function resetNewcomb() {
                document.getElementById('box-b').querySelector('.box-content').textContent = '???';
                document.getElementById('box-b').classList.remove('revealed', 'selected');
                document.getElementById('box-a').classList.remove('selected');
                document.getElementById('predictor-thought').textContent = 'The predictor is watching...';
            }

            // Parrondo's Paradox
            let parrondoState = { capital: 100, rounds: 0, aNet: 0, bNet: 0, abNet: 0 };

            function playParrondo(strategy) {
                const rounds = 100;
                let capital = 100;

                for (let i = 0; i < rounds; i++) {
                    parrondoState.rounds++;
                    let win = false;

                    if (strategy === 'A' || (strategy === 'AB' && i % 2 === 0)) {
                        // Game A: 49% win chance
                        win = Math.random() < 0.49;
                        document.getElementById('game-a-result').textContent = win ? '✓' : '✗';
                    } else {
                        // Game B: depends on capital mod 3
                        const winChance = capital % 3 === 0 ? 0.1 : 0.74;
                        win = Math.random() < winChance;
                        document.getElementById('game-b-result').textContent = win ? '✓' : '✗';
                    }

                    capital += win ? 1 : -1;
                }

                const net = capital - 100;
                if (strategy === 'A') parrondoState.aNet += net;
                else if (strategy === 'B') parrondoState.bNet += net;
                else parrondoState.abNet += net;

                parrondoState.capital = capital;
                updateParrondoDisplay();

                if (parrondoState.aNet < 0 && parrondoState.bNet < 0 && parrondoState.abNet > 0) {
                    document.getElementById('parrondo-result').innerHTML =
                        '<strong style="color: #22c55e;">PARADOX CONFIRMED!</strong> Games A and B both lose money, but alternating them wins!';
                }
            }

            function updateParrondoDisplay() {
                document.getElementById('parrondo-capital').textContent = '$' + parrondoState.capital;
                document.getElementById('capital-fill').style.width = Math.min(100, parrondoState.capital / 2) + '%';
                document.getElementById('parrondo-rounds').textContent = parrondoState.rounds;
                document.getElementById('parrondo-a-net').textContent = (parrondoState.aNet >= 0 ? '+' : '') + '$' + parrondoState.aNet;
                document.getElementById('parrondo-b-net').textContent = (parrondoState.bNet >= 0 ? '+' : '') + '$' + parrondoState.bNet;
                document.getElementById('parrondo-ab-net').textContent = (parrondoState.abNet >= 0 ? '+' : '') + '$' + parrondoState.abNet;
            }

            function resetParrondo() {
                parrondoState = { capital: 100, rounds: 0, aNet: 0, bNet: 0, abNet: 0 };
                updateParrondoDisplay();
                document.getElementById('game-a-result').textContent = '-';
                document.getElementById('game-b-result').textContent = '-';
                document.getElementById('parrondo-result').textContent = 'Play each strategy 100 times to see the paradox emerge...';
            }

            // Ellsberg Paradox
            let ellsbergChoices = { g1: null, g2: null };

            function ellsbergChoice(gamble, choice) {
                ellsbergChoices['g' + gamble] = choice;

                // Update button styles
                const buttons = document.querySelectorAll(`.gamble-set:nth-child(${gamble}) button`);
                buttons.forEach(b => b.classList.remove('selected'));
                event.target.classList.add('selected');

                // Check for inconsistency
                if (ellsbergChoices.g1 && ellsbergChoices.g2) {
                    const inconsistent =
                        (ellsbergChoices.g1 === 'red' && ellsbergChoices.g2 === 'black-yellow') ||
                        (ellsbergChoices.g1 === 'black' && ellsbergChoices.g2 === 'red-yellow');

                    if (inconsistent) {
                        document.getElementById('ellsberg-result').innerHTML =
                            '<strong style="color: #f59e0b;">INCONSISTENCY DETECTED!</strong> Your choices violate expected utility theory. You\'re ambiguity-averse!';
                    } else {
                        document.getElementById('ellsberg-result').innerHTML =
                            '<strong style="color: #22c55e;">Consistent!</strong> Your choices follow expected utility. You\'re in the minority!';
                    }
                }
            }

            // Region-Beta Paradox
            function updateRegionBeta() {
                const severity = parseInt(document.getElementById('severity-slider').value);
                document.getElementById('severity-val').textContent = severity;

                let icon, label, recoveryPct, recoveryTime, copingActive;

                if (severity < 25) {
                    icon = '😐'; label = 'Minor Annoyance';
                    recoveryPct = 30; recoveryTime = '~2 weeks';
                    copingActive = 0;
                } else if (severity < 50) {
                    icon = '😟'; label = 'Moderate Setback';
                    recoveryPct = 60; recoveryTime = '~2-3 months';
                    copingActive = 0;
                } else if (severity < 75) {
                    icon = '😢'; label = 'Significant Problem';
                    recoveryPct = 80; recoveryTime = '~3-6 months';
                    copingActive = 1;
                } else {
                    icon = '😭'; label = 'Major Trauma';
                    recoveryPct = 50; recoveryTime = '~1-2 months';
                    copingActive = 3;
                }

                document.getElementById('event-icon').textContent = icon;
                document.getElementById('event-label').textContent = label;
                document.getElementById('recovery-fill').style.width = recoveryPct + '%';
                document.getElementById('recovery-time').textContent = recoveryTime;

                const copingItems = document.querySelectorAll('.coping-item');
                copingItems.forEach((item, i) => {
                    item.classList.toggle('active', i < copingActive);
                    item.classList.toggle('inactive', i >= copingActive);
                });

                if (severity >= 75) {
                    document.getElementById('region-beta-result').innerHTML =
                        '<strong style="color: #22c55e;">PARADOX!</strong> Major events trigger coping mechanisms (therapy, support, meaning-making) that speed recovery. Minor annoyances just linger!';
                } else if (severity >= 50) {
                    document.getElementById('region-beta-result').textContent =
                        'Moderate problems: Not bad enough to trigger full coping response, so recovery takes longer.';
                } else {
                    document.getElementById('region-beta-result').textContent =
                        'Minor issues persist because they don\'t seem worth addressing. The "psychological immune system" doesn\'t activate.';
                }
            }

            // Liar's Paradox
            function assumeLiar(assumption) {
                const chain = document.getElementById('logic-chain');
                const truthValue = document.getElementById('truth-value');

                if (assumption === 'true') {
                    chain.innerHTML = `
                        <div class="logic-step">1. Assume the sentence is TRUE</div>
                        <div class="logic-step">2. If true, then what it says is the case</div>
                        <div class="logic-step">3. It says "this sentence is false"</div>
                        <div class="logic-step">4. So the sentence must be FALSE</div>
                        <div class="logic-step contradiction">5. CONTRADICTION! We assumed TRUE but derived FALSE</div>
                    `;
                    truthValue.textContent = 'TRUE → FALSE';
                    truthValue.className = 'truth-value paradox';
                } else {
                    chain.innerHTML = `
                        <div class="logic-step">1. Assume the sentence is FALSE</div>
                        <div class="logic-step">2. If false, then what it says is NOT the case</div>
                        <div class="logic-step">3. It says "this sentence is false"</div>
                        <div class="logic-step">4. So the sentence must NOT be false, i.e., TRUE</div>
                        <div class="logic-step contradiction">5. CONTRADICTION! We assumed FALSE but derived TRUE</div>
                    `;
                    truthValue.textContent = 'FALSE → TRUE';
                    truthValue.className = 'truth-value paradox';
                }

                document.getElementById('liar-result').innerHTML =
                    '<strong style="color: #f59e0b;">PARADOX!</strong> Both assumptions lead to contradictions. The sentence can be neither true nor false!';
            }

            function resetLiar() {
                document.getElementById('logic-chain').innerHTML = '<div class="logic-step">Click a button to trace the logic...</div>';
                document.getElementById('truth-value').textContent = '???';
                document.getElementById('truth-value').className = 'truth-value';
                document.getElementById('liar-result').textContent = 'This paradox challenged Aristotle, Russell, Tarski, and Gödel.';
            }

            // Ross-Littlewood Paradox
            let rossState = { step: 0, added: 0, removed: 0 };

            function rossStep() {
                rossState.step++;
                const n = rossState.step;

                // Add balls 10n-9 to 10n (10 balls)
                rossState.added += 10;

                // Remove ball n
                rossState.removed++;

                const inVase = rossState.added - rossState.removed;

                document.getElementById('ross-step').textContent = n;
                document.getElementById('ball-count').textContent = inVase;
                document.getElementById('step-action').textContent = `Added balls ${10*n-9}-${10*n}, removed ball ${n}`;

                // Show removed ball
                const removedList = document.getElementById('removed-list');
                if (n <= 20) {
                    const ball = document.createElement('div');
                    ball.className = 'removed-ball';
                    ball.textContent = n;
                    removedList.appendChild(ball);
                }

                updateRossStats();
            }

            function rossAuto() {
                for (let i = 0; i < 10; i++) {
                    rossStep();
                }
            }

            function rossInfinity() {
                document.getElementById('ross-step').textContent = '∞';
                document.getElementById('ball-count').textContent = '0';
                document.getElementById('step-action').textContent = 'All balls have been removed!';
                document.getElementById('ross-added').textContent = '∞';
                document.getElementById('ross-removed').textContent = '∞';
                document.getElementById('ross-in-vase').textContent = '0';

                document.getElementById('ross-result').innerHTML =
                    '<strong style="color: #f59e0b;">AT INFINITY: ZERO BALLS!</strong> Every ball number k was removed at step k. Ball 1 at step 1, ball 2 at step 2... No ball survives!';
            }

            function updateRossStats() {
                document.getElementById('ross-added').textContent = rossState.added;
                document.getElementById('ross-removed').textContent = rossState.removed;
                document.getElementById('ross-in-vase').textContent = rossState.added - rossState.removed;
            }

            function resetRoss() {
                rossState = { step: 0, added: 0, removed: 0 };
                document.getElementById('ross-step').textContent = '0';
                document.getElementById('ball-count').textContent = '0';
                document.getElementById('step-action').textContent = 'Click to begin...';
                document.getElementById('removed-list').innerHTML = '';
                updateRossStats();
                document.getElementById('ross-result').textContent = 'At step n, we add balls 10n-9 to 10n, and remove ball n. Every ball gets removed eventually!';
            }

            // Interesting Number Paradox
            const numberFacts = {
                1: ['First positive integer', 'Multiplicative identity', 'Only number that is its own factorial'],
                2: ['Only even prime', 'First prime number', 'Binary base'],
                3: ['First odd prime', 'Triangular number', 'Fibonacci number'],
                4: ['First composite', 'Only number = letters in its name', 'Square of 2'],
                5: ['Primes in a prime', 'Fibonacci number', 'Digits on a hand'],
                6: ['First perfect number', 'Triangular number', 'Factorial of 3'],
                7: ['Lucky number', 'Days in a week', 'Fourth prime'],
                12: ['Dozen', 'Hours on clock face', 'Months in a year'],
                13: ['Unlucky number', 'Fibonacci number', 'Sixth prime'],
                42: ['Answer to life (Hitchhiker\'s Guide)', 'Sum of first 6 positive even numbers', 'Catalan number'],
                69: ['Nice', 'Sum of its divisors = square', 'Strobogrammatic'],
                100: ['Square of 10', 'Percentage base', 'Boiling point of water (°C)'],
                137: ['Fine-structure constant inverse (approx)', 'Prime number', 'Physics\'s magic number'],
                420: ['You know why', 'Divisible by 1,2,3,4,5,6,7', 'Harshad number'],
                666: ['Number of the beast', 'Sum of first 36 positive integers', 'Triangular number'],
                1729: ['Hardy-Ramanujan number', 'Smallest taxicab number', 'Sum of two cubes two ways'],
            };

            function checkInteresting() {
                const num = parseInt(document.getElementById('interest-number').value);
                document.getElementById('number-display').textContent = num;

                const facts = numberFacts[num] || generateFacts(num);
                const factsHtml = facts.map(f => `<div class="fact highlight">✓ ${f}</div>`).join('');

                document.getElementById('interest-facts').innerHTML = factsHtml +
                    `<div class="fact" style="margin-top: 1rem; background: rgba(34, 197, 94, 0.2);">
                        <strong>Conclusion:</strong> ${num} is INTERESTING! (They all are.)
                    </div>`;

                document.getElementById('interest-result').innerHTML =
                    `Even if we couldn't find facts about ${num}, it would be interesting as "the smallest uninteresting number" - a contradiction!`;
            }

            function generateFacts(n) {
                const facts = [];
                if (n % 2 === 0) facts.push('Even number');
                else facts.push('Odd number');

                // Check if prime
                let isPrime = n > 1;
                for (let i = 2; i * i <= n; i++) {
                    if (n % i === 0) { isPrime = false; break; }
                }
                if (isPrime) facts.push('Prime number');

                // Check if square
                const sqrt = Math.sqrt(n);
                if (sqrt === Math.floor(sqrt)) facts.push('Perfect square');

                // Digit sum
                const digitSum = String(n).split('').reduce((a, b) => a + parseInt(b), 0);
                facts.push(`Digit sum is ${digitSum}`);

                if (facts.length < 3) facts.push(`${n}th positive integer`);

                return facts;
            }

            // Paradoxical Intention
            const problems = {
                insomnia: {
                    trad: 'Try harder to fall asleep',
                    para: 'Try to stay awake as long as possible'
                },
                anxiety: {
                    trad: 'Try to appear calm and confident',
                    para: 'Try to be as anxious and awkward as possible'
                },
                stutter: {
                    trad: 'Try to speak smoothly without stuttering',
                    para: 'Try to stutter on purpose, as much as you can'
                },
                blush: {
                    trad: 'Try not to blush, stay calm',
                    para: 'Try to blush as intensely as possible'
                }
            };

            function updateProblem() {
                const type = document.getElementById('problem-type').value;
                document.getElementById('trad-instruction').textContent = problems[type].trad;
                document.getElementById('para-instruction').textContent = problems[type].para;
            }

            // Initialize new simulators
            window.addEventListener('load', () => {
                resetNewcomb();
                resetParrondo();
                updateRegionBeta();
                resetLiar();
                resetRoss();
                updateProblem();
            });
        </script>

        <!-- Footer -->
        <footer style="text-align: center; padding: 2rem; color: var(--muted); border-top: 1px solid var(--card); margin-top: 2rem;">
            <p>Data sourced from <a href="https://hn.algolia.com/?query=paradox" style="color: var(--primary);">Hacker News</a></p>
            <p style="font-size: 0.875rem; margin-top: 0.5rem;">Interactive paradox simulators - explore the counterintuitive nature of reality</p>
        </footer>

        <script>
            // Tog's Paradox - Speed Test
            let togMode = null;
            let togTargetIndex = 0;
            let togStartTime = 0;
            let togTargets = [];
            let togMouseTime = null;
            let togKeyboardTime = null;

            function startTogTest(mode) {
                togMode = mode;
                togTargetIndex = 0;
                togTargets = Array.from({length: 9}, (_, i) => i + 1).sort(() => Math.random() - 0.5);

                const arena = document.getElementById('tog-arena');
                arena.innerHTML = '';

                for (let i = 1; i <= 9; i++) {
                    const btn = document.createElement('button');
                    btn.textContent = i;
                    btn.style.cssText = `
                        background: var(--card);
                        border: 2px solid var(--muted);
                        color: var(--text);
                        font-size: 1.5rem;
                        font-weight: bold;
                        cursor: pointer;
                        border-radius: 0.5rem;
                        transition: all 0.1s;
                    `;
                    btn.dataset.num = i;
                    btn.onclick = () => handleTogClick(i);
                    arena.appendChild(btn);
                }

                highlightTogTarget();
                togStartTime = performance.now();

                if (mode === 'keyboard') {
                    document.addEventListener('keydown', handleTogKey);
                }
            }

            function highlightTogTarget() {
                const arena = document.getElementById('tog-arena');
                const buttons = arena.querySelectorAll('button');

                buttons.forEach(btn => {
                    btn.style.background = 'var(--card)';
                    btn.style.borderColor = 'var(--muted)';
                });

                if (togTargetIndex < togTargets.length) {
                    const targetNum = togTargets[togTargetIndex];
                    const targetBtn = Array.from(buttons).find(b => b.dataset.num == targetNum);
                    if (targetBtn) {
                        targetBtn.style.background = 'var(--primary)';
                        targetBtn.style.borderColor = 'var(--accent)';
                    }
                }
            }

            function handleTogClick(num) {
                if (togMode !== 'mouse') return;
                if (num === togTargets[togTargetIndex]) {
                    togTargetIndex++;
                    if (togTargetIndex >= togTargets.length) {
                        endTogTest();
                    } else {
                        highlightTogTarget();
                    }
                }
            }

            function handleTogKey(e) {
                if (togMode !== 'keyboard') return;
                const num = parseInt(e.key);
                if (num >= 1 && num <= 9 && num === togTargets[togTargetIndex]) {
                    togTargetIndex++;
                    if (togTargetIndex >= togTargets.length) {
                        document.removeEventListener('keydown', handleTogKey);
                        endTogTest();
                    } else {
                        highlightTogTarget();
                    }
                }
            }

            function endTogTest() {
                const elapsed = ((performance.now() - togStartTime) / 1000).toFixed(2);

                if (togMode === 'mouse') {
                    togMouseTime = elapsed;
                    document.getElementById('tog-mouse-time').textContent = elapsed + 's';
                    document.getElementById('tog-mouse-feel').textContent = 'Slow?';
                } else {
                    togKeyboardTime = elapsed;
                    document.getElementById('tog-keyboard-time').textContent = elapsed + 's';
                    document.getElementById('tog-keyboard-feel').textContent = 'Fast?';
                }

                togMode = null;
                updateTogResult();
            }

            function updateTogResult() {
                if (togMouseTime && togKeyboardTime) {
                    const result = document.getElementById('tog-result');
                    const mouseFaster = parseFloat(togMouseTime) < parseFloat(togKeyboardTime);

                    if (mouseFaster) {
                        result.innerHTML = `<span style="color: #22c55e;">PARADOX CONFIRMED!</span> Mouse was ${(parseFloat(togKeyboardTime) - parseFloat(togMouseTime)).toFixed(2)}s faster, but keyboard probably FELT faster!`;
                    } else {
                        result.innerHTML = `Keyboard was faster this time. Try again - the paradox often appears with complex menu navigation.`;
                    }
                }
            }

            function resetTogTest() {
                togMode = null;
                togMouseTime = null;
                togKeyboardTime = null;
                document.getElementById('tog-arena').innerHTML = '';
                document.getElementById('tog-mouse-time').textContent = '-';
                document.getElementById('tog-keyboard-time').textContent = '-';
                document.getElementById('tog-mouse-feel').textContent = '-';
                document.getElementById('tog-keyboard-feel').textContent = '-';
                document.getElementById('tog-result').textContent = 'Run both tests to compare!';
            }

            // Solow Paradox Chart
            function drawSolowChart() {
                const canvas = document.getElementById('solow-canvas');
                const ctx = canvas.getContext('2d');
                const w = canvas.width;
                const h = canvas.height;

                ctx.fillStyle = '#0f172a';
                ctx.fillRect(0, 0, w, h);

                // Draw axes
                ctx.strokeStyle = '#64748b';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(50, 20);
                ctx.lineTo(50, h - 30);
                ctx.lineTo(w - 20, h - 30);
                ctx.stroke();

                // Labels
                ctx.fillStyle = '#94a3b8';
                ctx.font = '12px sans-serif';
                ctx.fillText('1980', 50, h - 10);
                ctx.fillText('2000', w/2, h - 10);
                ctx.fillText('2020', w - 50, h - 10);

                // IT Investment (exponential growth)
                const itData = [];
                for (let i = 0; i <= 40; i++) {
                    itData.push(Math.pow(1.08, i) / Math.pow(1.08, 40) * (h - 80));
                }

                // Productivity (slow linear growth)
                const prodData = [];
                for (let i = 0; i <= 40; i++) {
                    prodData.push((1 + i * 0.0125) / 1.5 * (h - 80) * 0.3);
                }

                // Animate
                let frame = 0;
                function animate() {
                    if (frame > 40) return;

                    // Draw IT spending
                    ctx.strokeStyle = '#6366f1';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(50, h - 30 - itData[0]);
                    for (let i = 1; i <= frame; i++) {
                        const x = 50 + (i / 40) * (w - 70);
                        ctx.lineTo(x, h - 30 - itData[i]);
                    }
                    ctx.stroke();

                    // Draw Productivity
                    ctx.strokeStyle = '#f59e0b';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(50, h - 30 - prodData[0]);
                    for (let i = 1; i <= frame; i++) {
                        const x = 50 + (i / 40) * (w - 70);
                        ctx.lineTo(x, h - 30 - prodData[i]);
                    }
                    ctx.stroke();

                    // Legend
                    ctx.fillStyle = '#6366f1';
                    ctx.fillRect(w - 150, 30, 20, 10);
                    ctx.fillStyle = '#e2e8f0';
                    ctx.fillText('IT Spending', w - 125, 40);

                    ctx.fillStyle = '#f59e0b';
                    ctx.fillRect(w - 150, 50, 20, 10);
                    ctx.fillStyle = '#e2e8f0';
                    ctx.fillText('Productivity', w - 125, 60);

                    frame++;
                    requestAnimationFrame(animate);
                }
                animate();
            }

            // Market Efficiency Simulator
            function simulateMarket() {
                const analysts = parseFloat(document.getElementById('market-analysts').value);
                document.getElementById('market-analysts-val').textContent = analysts + '%';

                const canvas = document.getElementById('market-canvas');
                const ctx = canvas.getContext('2d');
                const w = canvas.width;
                const h = canvas.height;

                ctx.fillStyle = '#0f172a';
                ctx.fillRect(0, 0, w, h);

                // True value line
                const trueValue = h / 2;
                ctx.strokeStyle = '#22c55e';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(0, trueValue);
                ctx.lineTo(w, trueValue);
                ctx.stroke();
                ctx.setLineDash([]);

                // Market price (more volatile when fewer analysts)
                const volatility = Math.max(5, 80 - analysts * 0.7);
                let price = trueValue;

                ctx.strokeStyle = '#6366f1';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, price);

                for (let x = 1; x < w; x++) {
                    // Random walk with mean reversion (stronger when more analysts)
                    const meanReversion = (trueValue - price) * (analysts / 1000);
                    const noise = (Math.random() - 0.5) * volatility;
                    price += meanReversion + noise;
                    price = Math.max(20, Math.min(h - 20, price));
                    ctx.lineTo(x, price);
                }
                ctx.stroke();

                // Calculate metrics
                const efficiency = Math.min(95, 20 + analysts * 0.75);
                const profit = analysts > 0 ? Math.max(0, (100 - analysts) * 10 - 200) : 0;
                const worthIt = profit > 500 ? 'Yes' : (profit > 0 ? 'Marginal' : 'No');

                document.getElementById('market-efficiency').textContent = efficiency.toFixed(0) + '%';
                document.getElementById('market-profit').textContent = '$' + profit.toFixed(0);
                document.getElementById('market-profit').style.color = profit > 500 ? '#22c55e' : (profit > 0 ? 'var(--accent)' : '#ef4444');
                document.getElementById('market-worth').textContent = worthIt;
                document.getElementById('market-worth').style.color = worthIt === 'Yes' ? '#22c55e' : (worthIt === 'Marginal' ? 'var(--accent)' : '#ef4444');

                document.getElementById('market-explanation').textContent =
                    `With ${analysts}% analysts active, market efficiency is ${efficiency.toFixed(0)}%. ` +
                    (analysts < 30 ? 'Few analysts means big mispricings and profit opportunities!' :
                     analysts > 70 ? 'Many analysts competing - profits disappear, some leave, cycle continues.' :
                     'Equilibrium zone: just enough analysts to keep markets mostly efficient.');
            }

            document.getElementById('market-analysts').addEventListener('input', function() {
                document.getElementById('market-analysts-val').textContent = this.value + '%';
            });

            // Tolerance Paradox Simulator
            function runToleranceSim() {
                const policy = document.getElementById('tolerance-policy').value;
                const timeline = document.getElementById('tolerance-timeline');
                timeline.innerHTML = '';

                let tolerance = 90;
                let intolerant = 5;
                const history = [];

                for (let year = 0; year < 50; year++) {
                    // Intolerant grow if tolerated
                    if (policy === 'unlimited') {
                        intolerant = Math.min(95, intolerant * 1.08);
                        tolerance = Math.max(5, 100 - intolerant);
                    } else if (policy === 'paradox') {
                        // Suppress intolerance when it exceeds threshold
                        if (intolerant > 15) {
                            intolerant = Math.max(5, intolerant * 0.95);
                        } else {
                            intolerant = Math.min(15, intolerant * 1.02);
                        }
                        tolerance = Math.max(70, 100 - intolerant);
                    } else {
                        // Low tolerance suppresses everyone
                        intolerant = Math.max(2, intolerant * 0.9);
                        tolerance = Math.max(30, 40 + Math.random() * 10);
                    }

                    history.push({ tolerance, intolerant });
                }

                // Draw timeline
                history.forEach((h, i) => {
                    const bar = document.createElement('div');
                    bar.style.cssText = `
                        flex: 1;
                        background: linear-gradient(to top,
                            #ef4444 ${h.intolerant}%,
                            #22c55e ${h.intolerant}%,
                            #22c55e ${h.tolerance}%,
                            var(--muted) ${h.tolerance}%);
                        border-radius: 2px;
                    `;
                    bar.title = `Year ${i + 1}: Tolerance ${h.tolerance.toFixed(0)}%, Intolerant ${h.intolerant.toFixed(0)}%`;
                    timeline.appendChild(bar);
                });

                const final = history[history.length - 1];
                document.getElementById('tolerance-final').textContent = final.tolerance.toFixed(0) + '%';
                document.getElementById('tolerance-final').style.color = final.tolerance > 60 ? '#22c55e' : '#ef4444';
                document.getElementById('tolerance-intolerant').textContent = final.intolerant.toFixed(0) + '%';

                const resultEl = document.getElementById('tolerance-result');
                if (policy === 'unlimited') {
                    resultEl.innerHTML = '<span style="color: #ef4444;">Unlimited tolerance leads to its own destruction.</span> Intolerance grows unchecked.';
                } else if (policy === 'paradox') {
                    resultEl.innerHTML = '<span style="color: #22c55e;">Popper\'s approach works!</span> Tolerance survives by not tolerating intolerance.';
                } else {
                    resultEl.innerHTML = '<span style="color: var(--accent);">Low tolerance maintains order but limits freedom.</span> Everyone is suppressed.';
                }
            }

            // Initialize new simulators
            window.addEventListener('load', () => {
                drawSolowChart();
                simulateMarket();
                runToleranceSim();
            });
        </script>

        <!-- LOGIC & MISC PARADOXES -->
        <section id="logic">
            <h2 class="category-title">Logic & Miscellaneous Paradoxes</h2>

            <!-- French Paradox -->
            <div class="paradox-card">
                <h3>French Paradox <span class="points">3 pts</span></h3>
                <p class="description">The French eat rich food, butter, cheese, and drink wine - yet have lower heart disease rates than Americans. How can a high-fat diet be heart-healthy?</p>

                <div class="simulator">
                    <h4>Diet Comparison Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Saturated Fat (g/day): <span id="french-fat-val">40</span></label>
                            <input type="range" id="french-fat" min="10" max="80" value="40" oninput="updateFrenchParadox()">
                        </div>
                        <div class="control-group">
                            <label>Red Wine (glasses/day): <span id="french-wine-val">2</span></label>
                            <input type="range" id="french-wine" min="0" max="5" value="2" oninput="updateFrenchParadox()">
                        </div>
                        <div class="control-group">
                            <label>Meal Duration (min): <span id="french-meal-val">60</span></label>
                            <input type="range" id="french-meal" min="10" max="120" value="60" oninput="updateFrenchParadox()">
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="french-american">100%</div>
                            <div class="stat-label">US Heart Disease Risk</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="french-french">60%</div>
                            <div class="stat-label">French Heart Disease Risk</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="french-reduction">40%</div>
                            <div class="stat-label">Risk Reduction</div>
                        </div>
                    </div>

                    <div class="result" id="french-result">
                        <p id="french-explanation">Despite similar fat intake, the French have 40% lower heart disease. Wine's resveratrol, slower eating, and social dining may explain the paradox.</p>
                    </div>

                    <div class="insight">
                        The paradox suggests that diet quality isn't just about nutrients - context matters. How you eat may be as important as what you eat.
                    </div>
                </div>
            </div>

            <!-- Buttered Cat Paradox -->
            <div class="paradox-card">
                <h3>Buttered Cat Paradox <span class="points">3 pts</span></h3>
                <p class="description">Cats always land on their feet. Buttered toast always lands butter-side down. What happens if you strap toast (butter up) to a cat's back?</p>

                <div class="simulator">
                    <h4>Anti-Gravity Cat Generator</h4>
                    <div class="controls">
                        <button onclick="dropButteredCat()">Drop the Cat-Toast!</button>
                        <button onclick="resetButteredCat()">Reset</button>
                    </div>

                    <div id="buttered-cat-viz" style="height: 250px; background: var(--bg); border-radius: 0.5rem; position: relative; overflow: hidden; margin-top: 1rem;">
                        <div id="cat-toast" style="position: absolute; left: 50%; top: 20px; transform: translateX(-50%); font-size: 3rem; transition: top 0.5s ease-in;">
                            🐱🍞
                        </div>
                        <div id="cat-spin" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); font-size: 4rem; display: none;">
                            🐱🍞
                        </div>
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 20px; background: #4a5568;"></div>
                    </div>

                    <div class="result" id="buttered-cat-result">
                        <p>Press "Drop" to test the hypothesis...</p>
                    </div>

                    <div class="insight">
                        This humorous paradox illustrates how combining two "laws" can lead to absurd conclusions. It's a lesson in the limits of folk physics.
                    </div>
                </div>
            </div>

            <!-- Raven Paradox -->
            <div class="paradox-card">
                <h3>Raven Paradox <span class="points">3 pts</span></h3>
                <p class="description">To confirm "All ravens are black," seeing a black raven helps. But logically, seeing a green apple (non-black, non-raven) should also confirm it!</p>

                <div class="simulator">
                    <h4>Evidence Confirmation Explorer</h4>
                    <div class="controls">
                        <button onclick="observeRaven('black')">🐦‍⬛ See Black Raven</button>
                        <button onclick="observeRaven('apple')">🍏 See Green Apple</button>
                        <button onclick="observeRaven('white')">🕊️ See White Bird</button>
                        <button onclick="resetRaven()">Reset</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="raven-ravens">0</div>
                            <div class="stat-label">Black Ravens Seen</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="raven-apples">0</div>
                            <div class="stat-label">Green Apples Seen</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="raven-confidence">0%</div>
                            <div class="stat-label">Confidence Level</div>
                        </div>
                    </div>

                    <div class="result" id="raven-result">
                        <p>Observe objects to build evidence for "All ravens are black"</p>
                    </div>

                    <div class="insight">
                        The logical equivalence of "All ravens are black" and "All non-black things are non-ravens" creates this paradox. Both observations technically confirm the hypothesis!
                    </div>
                </div>
            </div>

            <!-- Bell's Theorem Paradox -->
            <div class="paradox-card">
                <h3>Bell's Theorem Paradox <span class="points">3 pts</span></h3>
                <p class="description">Quantum correlations violate classical probability rules. Measurements on entangled particles show results that are mathematically impossible under classical assumptions.</p>

                <div class="simulator">
                    <h4>Quantum vs Classical Probability</h4>
                    <div class="controls">
                        <button onclick="runBellExperiment()">Run Experiment</button>
                        <button onclick="runBellMany()">Run 1000x</button>
                        <button onclick="resetBell()">Reset</button>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div class="stat-box">
                            <h5 style="color: var(--primary); margin-bottom: 0.5rem;">Classical Prediction</h5>
                            <p>Correlation ≤ <span style="color: var(--accent); font-size: 1.5rem;">2.0</span></p>
                            <p style="font-size: 0.8rem; color: var(--muted);">(Bell inequality limit)</p>
                        </div>
                        <div class="stat-box">
                            <h5 style="color: var(--secondary); margin-bottom: 0.5rem;">Quantum Result</h5>
                            <p>Correlation = <span id="bell-result" style="color: var(--accent); font-size: 1.5rem;">?</span></p>
                            <p style="font-size: 0.8rem; color: var(--muted);">Measured: <span id="bell-trials">0</span> trials</p>
                        </div>
                    </div>

                    <div class="result" id="bell-explanation">
                        <p>Run experiments to see if nature violates Bell's inequality...</p>
                    </div>

                    <div class="insight">
                        Quantum mechanics predicts (and experiments confirm) correlations up to 2√2 ≈ 2.83, violating the classical limit. Reality is either non-local or non-realistic!
                    </div>
                </div>
            </div>

            <!-- 2FA Backup Paradox -->
            <div class="paradox-card">
                <h3>2FA Backup Paradox <span class="points">3 pts</span></h3>
                <p class="description">Two-factor authentication needs backups for when you lose your device. But secure backups defeat the purpose of 2FA!</p>

                <div class="simulator">
                    <h4>Security Trade-off Calculator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Backup Method:</label>
                            <select id="backup-method" onchange="calculate2FA()">
                                <option value="none">No Backup</option>
                                <option value="codes">Printed Backup Codes</option>
                                <option value="email">Email Recovery</option>
                                <option value="sms">SMS Recovery</option>
                                <option value="hardware">Second Hardware Key</option>
                            </select>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="twofa-security">100%</div>
                            <div class="stat-label">Security Level</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="twofa-recovery">0%</div>
                            <div class="stat-label">Recovery Chance</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="twofa-effective">50%</div>
                            <div class="stat-label">Effective Protection</div>
                        </div>
                    </div>

                    <div class="result" id="twofa-result">
                        <p id="twofa-explanation">Without backups: Maximum security, but lose access if device is lost.</p>
                    </div>

                    <div class="insight">
                        Perfect security and perfect recoverability are mutually exclusive. Every backup method introduces a potential attack vector.
                    </div>
                </div>
            </div>

            <!-- Paradox of Meritocracy -->
            <div class="paradox-card">
                <h3>Paradox of Meritocracy <span class="points">3 pts</span></h3>
                <p class="description">Organizations that explicitly embrace meritocracy often become less fair. Believing the system is fair makes people less vigilant about bias.</p>

                <div class="simulator">
                    <h4>Organizational Bias Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Organization Type:</label>
                            <select id="merit-type" onchange="updateMeritocracy()">
                                <option value="explicit">Explicitly Meritocratic</option>
                                <option value="neutral">No Stated Values</option>
                                <option value="aware">Bias-Aware Training</option>
                            </select>
                        </div>
                        <button onclick="runMeritSim()">Run Bonus Allocation</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="merit-male">$0</div>
                            <div class="stat-label">Avg Male Bonus</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="merit-female">$0</div>
                            <div class="stat-label">Avg Female Bonus</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="merit-gap">0%</div>
                            <div class="stat-label">Gender Gap</div>
                        </div>
                    </div>

                    <div class="result" id="merit-result">
                        <p>Select organization type and run simulation...</p>
                    </div>

                    <div class="insight">
                        Research shows managers in "meritocratic" companies give larger bonuses to men, assuming any gap must reflect merit. Awareness of bias reduces it.
                    </div>
                </div>
            </div>

            <!-- Transparency Paradox -->
            <div class="paradox-card">
                <h3>Transparency Paradox <span class="points">3 pts</span></h3>
                <p class="description">More workplace transparency can backfire. When employees know they're being watched, they hide creative work and avoid risks.</p>

                <div class="simulator">
                    <h4>Workplace Monitoring Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Monitoring Level: <span id="trans-level-val">50%</span></label>
                            <input type="range" id="trans-level" min="0" max="100" value="50" oninput="updateTransparency()">
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="trans-visible">50%</div>
                            <div class="stat-label">Visible Work</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="trans-hidden">30%</div>
                            <div class="stat-label">Hidden Innovation</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="trans-total">80%</div>
                            <div class="stat-label">Total Output</div>
                        </div>
                    </div>

                    <div style="margin-top: 1rem; height: 30px; background: var(--bg); border-radius: 0.5rem; overflow: hidden; display: flex;">
                        <div id="trans-bar-visible" style="background: var(--primary); height: 100%; transition: width 0.3s;"></div>
                        <div id="trans-bar-hidden" style="background: var(--secondary); height: 100%; transition: width 0.3s;"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--muted); margin-top: 0.25rem;">
                        <span>■ Visible Work</span>
                        <span>■ Hidden Innovation</span>
                    </div>

                    <div class="result" id="trans-result">
                        <p>Adjust monitoring level to see its effect on productivity...</p>
                    </div>

                    <div class="insight">
                        Optimal productivity often requires some privacy. The most innovative work happens when people feel free to experiment without judgment.
                    </div>
                </div>
            </div>

            <!-- Gender-Equality Paradox -->
            <div class="paradox-card">
                <h3>Gender-Equality Paradox <span class="points">3 pts</span></h3>
                <p class="description">Countries with more gender equality have fewer women in STEM. More freedom amplifies rather than eliminates gender differences in career preferences.</p>

                <div class="simulator">
                    <h4>STEM Gender Gap by Country</h4>
                    <div class="controls">
                        <button onclick="showGenderData()">Show Data</button>
                    </div>

                    <div id="gender-chart" style="margin-top: 1rem;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                            <div class="stat-box">
                                <h5 style="color: var(--primary); margin-bottom: 0.5rem;">High Equality Countries</h5>
                                <p style="font-size: 0.9rem;">Finland, Norway, Sweden</p>
                                <p style="color: var(--accent); font-size: 1.5rem;" id="gender-high">~20%</p>
                                <p style="font-size: 0.8rem; color: var(--muted);">Women in STEM</p>
                            </div>
                            <div class="stat-box">
                                <h5 style="color: var(--secondary); margin-bottom: 0.5rem;">Lower Equality Countries</h5>
                                <p style="font-size: 0.9rem;">Algeria, Tunisia, UAE</p>
                                <p style="color: var(--accent); font-size: 1.5rem;" id="gender-low">~40%</p>
                                <p style="font-size: 0.8rem; color: var(--muted);">Women in STEM</p>
                            </div>
                        </div>
                    </div>

                    <div class="result" id="gender-result">
                        <p>When women are free to choose any career, they often choose non-STEM fields. In countries where STEM offers economic security, more women pursue it.</p>
                    </div>

                    <div class="insight">
                        This paradox suggests that gender differences in interests may be partly innate, emerging more strongly when external pressures are removed.
                    </div>
                </div>
            </div>

            <!-- Aggregator Paradox -->
            <div class="paradox-card">
                <h3>Aggregator Paradox <span class="points">3 pts</span></h3>
                <p class="description">Platforms that aggregate content to serve users better eventually control that content. The aggregator's power to distribute becomes power over creation.</p>

                <div class="simulator">
                    <h4>Platform Power Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Platform Maturity: <span id="agg-maturity-val">1</span> years</label>
                            <input type="range" id="agg-maturity" min="1" max="20" value="1" oninput="updateAggregator()">
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="agg-creators">1000</div>
                            <div class="stat-label">Content Creators</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="agg-power">10%</div>
                            <div class="stat-label">Platform Power</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="agg-revenue">50%</div>
                            <div class="stat-label">Creator Revenue Share</div>
                        </div>
                    </div>

                    <div class="result" id="agg-result">
                        <p>Year 1: Platform attracts creators by offering better distribution than alternatives.</p>
                    </div>

                    <div class="insight">
                        Google, Facebook, Amazon all followed this pattern: aggregate to serve users → become essential → dictate terms to creators.
                    </div>
                </div>
            </div>

            <!-- Radioactive Wildlife Paradox -->
            <div class="paradox-card">
                <h3>Radioactive Wildlife Paradox <span class="points">3 pts</span></h3>
                <p class="description">The Chernobyl exclusion zone is now a wildlife paradise. The absence of humans is better for animals than the presence of radiation is harmful.</p>

                <div class="simulator">
                    <h4>Chernobyl Ecosystem Simulator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Years Since Evacuation: <span id="rad-years-val">0</span></label>
                            <input type="range" id="rad-years" min="0" max="40" value="0" oninput="updateRadioactive()">
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="rad-radiation">100%</div>
                            <div class="stat-label">Radiation Level</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="rad-wildlife">20%</div>
                            <div class="stat-label">Wildlife Population</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="rad-species">10</div>
                            <div class="stat-label">Large Species</div>
                        </div>
                    </div>

                    <div id="rad-animals" style="margin-top: 1rem; font-size: 2rem; text-align: center; min-height: 50px;">
                        🏚️
                    </div>

                    <div class="result" id="rad-result">
                        <p>1986: Humans evacuate. Radiation at lethal levels.</p>
                    </div>

                    <div class="insight">
                        Wolves, wild boar, deer, and even rare species like Przewalski's horses thrive in the zone. Human absence trumps radiation harm.
                    </div>
                </div>
            </div>
        </section>

        <script>
            // French Paradox
            function updateFrenchParadox() {
                const fat = parseInt(document.getElementById('french-fat').value);
                const wine = parseInt(document.getElementById('french-wine').value);
                const meal = parseInt(document.getElementById('french-meal').value);

                document.getElementById('french-fat-val').textContent = fat;
                document.getElementById('french-wine-val').textContent = wine;
                document.getElementById('french-meal-val').textContent = meal;

                // US baseline risk (simple model)
                const usRisk = 100;

                // French risk factors (wine reduces, slow meals reduce)
                const wineReduction = wine * 8; // Up to 40% reduction
                const mealReduction = Math.min((meal - 10) / 3, 15); // Up to 15% for slow eating
                const frenchRisk = Math.max(40, 100 - wineReduction - mealReduction);

                document.getElementById('french-american').textContent = usRisk + '%';
                document.getElementById('french-french').textContent = frenchRisk.toFixed(0) + '%';
                document.getElementById('french-reduction').textContent = (usRisk - frenchRisk).toFixed(0) + '%';

                let explanation = '';
                if (wine >= 2 && meal >= 45) {
                    explanation = `With ${wine} glasses of wine and ${meal}-minute meals, the French lifestyle provides significant cardioprotective benefits despite ${fat}g daily fat.`;
                } else if (wine >= 2) {
                    explanation = `Moderate wine consumption (${wine} glasses) provides resveratrol and polyphenols that may explain some protection.`;
                } else if (meal >= 45) {
                    explanation = `Longer meal times (${meal} min) allow better digestion and social bonding, reducing stress-related heart risk.`;
                } else {
                    explanation = `Without wine or leisurely dining, the French advantages are minimal. The paradox requires the full lifestyle.`;
                }
                document.getElementById('french-explanation').textContent = explanation;
            }

            // Buttered Cat Paradox
            let catAnimating = false;
            function dropButteredCat() {
                if (catAnimating) return;
                catAnimating = true;

                const catToast = document.getElementById('cat-toast');
                const catSpin = document.getElementById('cat-spin');
                const result = document.getElementById('buttered-cat-result');

                // Drop animation
                catToast.style.top = '100px';

                setTimeout(() => {
                    catToast.style.display = 'none';
                    catSpin.style.display = 'block';

                    // Spin animation
                    let rotation = 0;
                    const spinInterval = setInterval(() => {
                        rotation += 30;
                        catSpin.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
                    }, 50);

                    result.innerHTML = `
                        <p style="color: var(--accent); font-size: 1.25rem;">⚡ PARADOX ACTIVATED! ⚡</p>
                        <p>The cat-toast system hovers indefinitely, spinning in place!</p>
                        <p>Cat wants to land feet-down. Toast wants to land butter-down.</p>
                        <p>Neither can win. Free energy discovered! 🎉</p>
                    `;

                    // Keep spinning
                    setTimeout(() => {
                        clearInterval(spinInterval);
                        catAnimating = false;
                    }, 5000);
                }, 500);
            }

            function resetButteredCat() {
                catAnimating = false;
                const catToast = document.getElementById('cat-toast');
                const catSpin = document.getElementById('cat-spin');
                catToast.style.display = 'block';
                catToast.style.top = '20px';
                catSpin.style.display = 'none';
                catSpin.style.transform = 'translate(-50%, -50%)';
                document.getElementById('buttered-cat-result').innerHTML = '<p>Press "Drop" to test the hypothesis...</p>';
            }

            // Raven Paradox
            let ravenStats = { ravens: 0, apples: 0 };
            function observeRaven(type) {
                const result = document.getElementById('raven-result');

                if (type === 'black') {
                    ravenStats.ravens++;
                    result.innerHTML = `<p>🐦‍⬛ <strong>Black raven observed!</strong> This directly confirms "All ravens are black." Strong evidence!</p>`;
                } else if (type === 'apple') {
                    ravenStats.apples++;
                    result.innerHTML = `<p>🍏 <strong>Green apple observed!</strong> This is non-black AND non-raven, confirming "All non-black things are non-ravens" - logically equivalent to our hypothesis! <em>But does it really help?</em></p>`;
                } else if (type === 'white') {
                    result.innerHTML = `<p>🕊️ <strong>White bird observed!</strong> Is it a raven? If yes, hypothesis FALSIFIED! If no, it's irrelevant. You'd need to check...</p>`;
                }

                document.getElementById('raven-ravens').textContent = ravenStats.ravens;
                document.getElementById('raven-apples').textContent = ravenStats.apples;

                // Ravens count way more than apples for confidence
                const confidence = Math.min(99, ravenStats.ravens * 10 + ravenStats.apples * 0.0001);
                document.getElementById('raven-confidence').textContent = confidence.toFixed(2) + '%';
            }

            function resetRaven() {
                ravenStats = { ravens: 0, apples: 0 };
                document.getElementById('raven-ravens').textContent = '0';
                document.getElementById('raven-apples').textContent = '0';
                document.getElementById('raven-confidence').textContent = '0%';
                document.getElementById('raven-result').innerHTML = '<p>Observe objects to build evidence for "All ravens are black"</p>';
            }

            // Bell's Theorem
            let bellTrials = 0;
            let bellCorrelation = 0;

            function runBellExperiment() {
                bellTrials++;
                // Quantum mechanics predicts violation of Bell inequality
                // Simulate getting correlation around 2.4-2.8 (> 2.0 classical limit)
                const thisResult = 2.0 + Math.random() * 0.828; // Up to 2√2
                bellCorrelation = ((bellCorrelation * (bellTrials - 1)) + thisResult) / bellTrials;

                updateBellDisplay();
            }

            function runBellMany() {
                for (let i = 0; i < 1000; i++) {
                    bellTrials++;
                    const thisResult = 2.0 + Math.random() * 0.828;
                    bellCorrelation = ((bellCorrelation * (bellTrials - 1)) + thisResult) / bellTrials;
                }
                updateBellDisplay();
            }

            function updateBellDisplay() {
                document.getElementById('bell-result').textContent = bellCorrelation.toFixed(3);
                document.getElementById('bell-trials').textContent = bellTrials;

                const explanation = document.getElementById('bell-explanation');
                if (bellCorrelation > 2.0) {
                    explanation.innerHTML = `<p style="color: #22c55e;"><strong>BELL INEQUALITY VIOLATED!</strong></p>
                        <p>Measured correlation ${bellCorrelation.toFixed(3)} > 2.0 (classical limit)</p>
                        <p>This proves quantum mechanics is correct and reality is stranger than classical physics allows!</p>`;
                } else {
                    explanation.innerHTML = `<p>Current correlation: ${bellCorrelation.toFixed(3)}. Run more trials...</p>`;
                }
            }

            function resetBell() {
                bellTrials = 0;
                bellCorrelation = 0;
                document.getElementById('bell-result').textContent = '?';
                document.getElementById('bell-trials').textContent = '0';
                document.getElementById('bell-explanation').innerHTML = '<p>Run experiments to see if nature violates Bell\'s inequality...</p>';
            }

            // 2FA Backup Paradox
            function calculate2FA() {
                const method = document.getElementById('backup-method').value;
                let security, recovery, explanation;

                switch(method) {
                    case 'none':
                        security = 100;
                        recovery = 0;
                        explanation = 'Maximum security, but lose your device = lose access forever. No backup means no weakness, but also no recovery.';
                        break;
                    case 'codes':
                        security = 70;
                        recovery = 80;
                        explanation = 'Backup codes are just passwords on paper. Anyone who finds them bypasses your 2FA entirely. Store them in a safe?';
                        break;
                    case 'email':
                        security = 40;
                        recovery = 95;
                        explanation = 'Email recovery means your email is now a single point of failure. Compromise email = compromise everything.';
                        break;
                    case 'sms':
                        security = 30;
                        recovery = 90;
                        explanation = 'SMS is vulnerable to SIM swapping attacks. Attackers can port your number and receive your codes.';
                        break;
                    case 'hardware':
                        security = 90;
                        recovery = 70;
                        explanation = 'A second hardware key maintains security but costs money, and you still need to store it somewhere safe.';
                        break;
                }

                const effective = (security * 0.5 + recovery * 0.5);

                document.getElementById('twofa-security').textContent = security + '%';
                document.getElementById('twofa-recovery').textContent = recovery + '%';
                document.getElementById('twofa-effective').textContent = effective.toFixed(0) + '%';
                document.getElementById('twofa-explanation').textContent = explanation;

                // Color code security
                const secEl = document.getElementById('twofa-security');
                secEl.style.color = security >= 70 ? '#22c55e' : security >= 40 ? '#f59e0b' : '#ef4444';
            }

            // Paradox of Meritocracy
            function runMeritSim() {
                const type = document.getElementById('merit-type').value;
                let maleBonus, femaleBonus, explanation;

                // Based on actual research findings
                switch(type) {
                    case 'explicit':
                        maleBonus = 12000 + Math.random() * 2000;
                        femaleBonus = 9000 + Math.random() * 1500;
                        explanation = 'PARADOX CONFIRMED: In explicitly meritocratic orgs, managers assume any gap reflects merit differences. Men receive 25% higher bonuses on average.';
                        break;
                    case 'neutral':
                        maleBonus = 10500 + Math.random() * 1500;
                        femaleBonus = 9500 + Math.random() * 1500;
                        explanation = 'Without meritocracy claims, managers are slightly more careful. Gap is smaller but still exists due to implicit bias.';
                        break;
                    case 'aware':
                        maleBonus = 10000 + Math.random() * 1500;
                        femaleBonus = 10000 + Math.random() * 1500;
                        explanation = 'Bias-awareness training makes managers question their assumptions. Bonuses are more equitable.';
                        break;
                }

                const gap = ((maleBonus - femaleBonus) / maleBonus * 100);

                document.getElementById('merit-male').textContent = '$' + maleBonus.toFixed(0);
                document.getElementById('merit-female').textContent = '$' + femaleBonus.toFixed(0);
                document.getElementById('merit-gap').textContent = gap.toFixed(1) + '%';
                document.getElementById('merit-gap').style.color = gap > 10 ? '#ef4444' : gap > 5 ? '#f59e0b' : '#22c55e';
                document.getElementById('merit-result').innerHTML = '<p>' + explanation + '</p>';
            }

            function updateMeritocracy() {
                document.getElementById('merit-male').textContent = '$0';
                document.getElementById('merit-female').textContent = '$0';
                document.getElementById('merit-gap').textContent = '0%';
                document.getElementById('merit-result').innerHTML = '<p>Click "Run Bonus Allocation" to simulate...</p>';
            }

            // Transparency Paradox
            function updateTransparency() {
                const level = parseInt(document.getElementById('trans-level').value);
                document.getElementById('trans-level-val').textContent = level + '%';

                // High monitoring = high visible work but low innovation
                // Low monitoring = lower visible work but high innovation
                const visible = 30 + level * 0.5; // 30-80%
                const hidden = Math.max(5, 50 - level * 0.45); // 50-5%
                const total = visible + hidden;

                document.getElementById('trans-visible').textContent = visible.toFixed(0) + '%';
                document.getElementById('trans-hidden').textContent = hidden.toFixed(0) + '%';
                document.getElementById('trans-total').textContent = total.toFixed(0) + '%';

                document.getElementById('trans-bar-visible').style.width = visible + '%';
                document.getElementById('trans-bar-hidden').style.width = hidden + '%';

                let explanation;
                if (level < 30) {
                    explanation = 'Low monitoring: Employees experiment freely. Innovation thrives but some slack off.';
                } else if (level < 70) {
                    explanation = 'Moderate monitoring: Balance of accountability and freedom. Near-optimal total output.';
                } else {
                    explanation = 'High monitoring: Everyone looks busy, but creative risk-taking disappears. Innovation dies in the shadows.';
                }
                document.getElementById('trans-result').innerHTML = '<p>' + explanation + '</p>';
            }

            // Gender-Equality Paradox
            function showGenderData() {
                // Animate the numbers
                const highEl = document.getElementById('gender-high');
                const lowEl = document.getElementById('gender-low');

                let high = 0, low = 0;
                const interval = setInterval(() => {
                    high = Math.min(20, high + 1);
                    low = Math.min(40, low + 2);
                    highEl.textContent = high + '%';
                    lowEl.textContent = low + '%';
                    if (high >= 20 && low >= 40) {
                        clearInterval(interval);
                        highEl.textContent = '~20%';
                        lowEl.textContent = '~40%';
                    }
                }, 50);
            }

            // Aggregator Paradox
            function updateAggregator() {
                const years = parseInt(document.getElementById('agg-maturity').value);
                document.getElementById('agg-maturity-val').textContent = years;

                // Platform grows, power increases, creator share decreases
                const creators = Math.floor(1000 * Math.pow(1.5, years));
                const power = Math.min(95, 10 + years * 4.5);
                const revenue = Math.max(15, 50 - years * 2);

                document.getElementById('agg-creators').textContent = creators.toLocaleString();
                document.getElementById('agg-power').textContent = power.toFixed(0) + '%';
                document.getElementById('agg-revenue').textContent = revenue.toFixed(0) + '%';

                document.getElementById('agg-power').style.color = power > 70 ? '#ef4444' : power > 40 ? '#f59e0b' : '#22c55e';
                document.getElementById('agg-revenue').style.color = revenue < 25 ? '#ef4444' : revenue < 40 ? '#f59e0b' : '#22c55e';

                let explanation;
                if (years <= 3) {
                    explanation = `Year ${years}: Platform attracts creators with generous terms. "We're just helping you reach audiences!"`;
                } else if (years <= 8) {
                    explanation = `Year ${years}: Platform becomes dominant. Creators depend on it. Terms start shifting in platform's favor.`;
                } else if (years <= 15) {
                    explanation = `Year ${years}: Platform controls discovery. Creators must pay for visibility. Revenue share drops.`;
                } else {
                    explanation = `Year ${years}: Platform IS the market. Take it or leave it. Creators are commoditized suppliers.`;
                }
                document.getElementById('agg-result').innerHTML = '<p>' + explanation + '</p>';
            }

            // Radioactive Wildlife Paradox
            function updateRadioactive() {
                const years = parseInt(document.getElementById('rad-years').value);
                document.getElementById('rad-years-val').textContent = years;

                // Radiation decays, wildlife rebounds
                const radiation = Math.max(5, 100 * Math.exp(-years * 0.05));
                const wildlife = Math.min(400, 20 + years * 10);
                const species = Math.min(60, 10 + years * 1.5);

                document.getElementById('rad-radiation').textContent = radiation.toFixed(0) + '%';
                document.getElementById('rad-wildlife').textContent = wildlife.toFixed(0) + '%';
                document.getElementById('rad-species').textContent = species.toFixed(0);

                document.getElementById('rad-radiation').style.color = radiation > 50 ? '#ef4444' : radiation > 20 ? '#f59e0b' : '#22c55e';
                document.getElementById('rad-wildlife').style.color = '#22c55e';

                // Show animals based on years
                let animals = '🏚️';
                if (years > 0) animals = '🐀🐁';
                if (years > 5) animals = '🐀🐁🦊🐗';
                if (years > 10) animals = '🦊🐗🦌🐺';
                if (years > 20) animals = '🦊🐗🦌🐺🦅🦉';
                if (years > 30) animals = '🐺🦌🐗🦊🦅🦉🐴🦬';

                document.getElementById('rad-animals').textContent = animals;

                let explanation;
                if (years === 0) {
                    explanation = '1986: Humans evacuate. Radiation at lethal levels. Wildlife flees or dies.';
                } else if (years < 10) {
                    explanation = `${1986 + years}: Small animals return first. Radiation still high but decreasing.`;
                } else if (years < 25) {
                    explanation = `${1986 + years}: Large mammals thrive. Wolf packs, wild boar, deer. Forest reclaims towns.`;
                } else {
                    explanation = `${1986 + years}: Wildlife paradise. More biodiversity than before the disaster. Przewalski's horses introduced.`;
                }
                document.getElementById('rad-result').innerHTML = '<p>' + explanation + '</p>';
            }

            // Initialize
            window.addEventListener('load', () => {
                updateFrenchParadox();
                calculate2FA();
                updateTransparency();
                updateAggregator();
                updateRadioactive();
            });
        </script>

        <!-- MORE PHYSICS PARADOXES -->
        <section id="morephysics">
            <h2 class="category-title">More Physics & Science Paradoxes</h2>

            <!-- Black Hole Information Paradox -->
            <div class="paradox-card">
                <h3>Black Hole Information Paradox <span class="points">96 pts</span></h3>
                <p class="description">Information cannot be destroyed, but black holes seem to destroy everything. Where does the information go when a black hole evaporates?</p>
                <div class="simulator">
                    <h4>Information Loss Simulator</h4>
                    <div class="controls">
                        <button onclick="dropIntoBH()">Drop Object</button>
                        <button onclick="resetBH()">Reset</button>
                    </div>
                    <div id="bh-viz" style="height: 150px; background: var(--bg); border-radius: 0.5rem; position: relative; margin-top: 1rem; display: flex; align-items: center; justify-content: center;">
                        <div style="width: 60px; height: 60px; background: radial-gradient(circle, #000 60%, transparent 70%); border-radius: 50%; box-shadow: 0 0 20px rgba(139,92,246,0.5);"></div>
                        <div id="bh-object" style="position: absolute; left: 20%; font-size: 1.5rem; transition: all 1s;">📦</div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="bh-in">0</div><div class="stat-label">Info Bits In</div></div>
                        <div class="stat-box"><div class="stat-value" id="bh-out">0</div><div class="stat-label">Hawking Bits Out</div></div>
                        <div class="stat-box"><div class="stat-value" id="bh-lost">❓</div><div class="stat-label">Info Preserved?</div></div>
                    </div>
                    <div class="insight">Hawking radiation is thermal - it carries no information about what fell in. This violates quantum mechanics!</div>
                </div>
            </div>

            <!-- Archer's Paradox -->
            <div class="paradox-card">
                <h3>Archer's Paradox <span class="points">276 pts</span></h3>
                <p class="description">An arrow must flex around the bow handle to hit a target it's not initially pointed at!</p>
                <div class="simulator">
                    <h4>Arrow Flight</h4>
                    <div class="controls">
                        <button onclick="fireArrow()">Fire Arrow</button>
                        <button onclick="resetArrow()">Reset</button>
                    </div>
                    <div id="archer-viz" style="height: 100px; background: var(--bg); border-radius: 0.5rem; position: relative; margin-top: 1rem;">
                        <div style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); font-size: 2rem;">🏹</div>
                        <div id="arrow-obj" style="position: absolute; left: 50px; top: 50%; transform: translateY(-50%); transition: left 1s;">➡️</div>
                        <div style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); font-size: 2rem;">🎯</div>
                    </div>
                    <div class="result" id="archer-result"><p>The arrow flexes around the bow riser during release, allowing it to fly straight despite the obstruction.</p></div>
                </div>
            </div>

            <!-- Hydrostatic Paradox -->
            <div class="paradox-card">
                <h3>Hydrostatic Paradox <span class="points">4 pts</span></h3>
                <p class="description">Pressure at the bottom depends only on height, not container shape. A narrow tube exerts the same pressure as a wide tank!</p>
                <div class="simulator">
                    <h4>Pressure Comparison</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Height: <span id="hydro-h-val">10</span>m</label>
                            <input type="range" id="hydro-h" min="1" max="30" value="10" oninput="updateHydro()">
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 1rem;">
                        <div style="width: 60px; height: 80px; border: 2px solid var(--muted); background: linear-gradient(to top, #3b82f6 50%, transparent 50%);"></div>
                        <div style="width: 20px; height: 80px; border: 2px solid var(--muted); background: linear-gradient(to top, #3b82f6 50%, transparent 50%);"></div>
                        <div style="width: 40px; height: 80px; border: 2px solid var(--muted); background: linear-gradient(to top, #3b82f6 50%, transparent 50%); clip-path: polygon(30% 0, 70% 0, 100% 100%, 0 100%);"></div>
                    </div>
                    <div class="result"><p>Bottom pressure: <span class="result-value" id="hydro-p">98</span> kPa - <span style="color: var(--accent);">SAME for all shapes!</span></p></div>
                </div>
            </div>

            <!-- Faint Sun Paradox -->
            <div class="paradox-card">
                <h3>Faint Sun Paradox <span class="points">15 pts</span></h3>
                <p class="description">The early Sun was 30% dimmer, yet Earth had liquid water. It should have been frozen!</p>
                <div class="simulator">
                    <h4>Early Earth Temperature</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Billion years ago: <span id="faint-val">4</span></label>
                            <input type="range" id="faint-t" min="0" max="4" step="0.5" value="4" oninput="updateFaint()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="faint-lum">70%</div><div class="stat-label">Solar Output</div></div>
                        <div class="stat-box"><div class="stat-value" id="faint-exp">-40°C</div><div class="stat-label">Expected</div></div>
                        <div class="stat-box"><div class="stat-value" id="faint-act">+15°C</div><div class="stat-label">Evidence Shows</div></div>
                    </div>
                    <div class="insight">Solutions: more greenhouse gases, different albedo, or tidal heating from a closer Moon.</div>
                </div>
            </div>

            <!-- EPR Paradox -->
            <div class="paradox-card">
                <h3>EPR Paradox <span class="points">5 pts</span></h3>
                <p class="description">Measuring one entangled particle instantly affects another light-years away - "spooky action at a distance."</p>
                <div class="simulator">
                    <h4>Entanglement Experiment</h4>
                    <div class="controls">
                        <button onclick="measureEPR('A')">Measure A</button>
                        <button onclick="measureEPR('B')">Measure B</button>
                        <button onclick="resetEPR()">New Pair</button>
                    </div>
                    <div style="display: flex; justify-content: space-around; align-items: center; margin-top: 1rem;">
                        <div class="stat-box" style="text-align: center;"><div style="font-size: 2rem;">⚛️</div><div id="epr-a">?</div></div>
                        <div style="color: var(--muted);">〰️ entangled 〰️</div>
                        <div class="stat-box" style="text-align: center;"><div style="font-size: 2rem;">⚛️</div><div id="epr-b">?</div></div>
                    </div>
                    <div class="result" id="epr-result"><p>Measure one particle to instantly determine the other!</p></div>
                </div>
            </div>

            <!-- Heat Death Paradox -->
            <div class="paradox-card">
                <h3>Heat Death Paradox <span class="points">5 pts</span></h3>
                <p class="description">If the universe were infinitely old, it would have reached maximum entropy. Why hasn't it?</p>
                <div class="simulator">
                    <h4>Universe Age Model</h4>
                    <div class="controls">
                        <button onclick="setHeatModel('finite')">Finite Age (13.8 Gyr)</button>
                        <button onclick="setHeatModel('infinite')">Infinite Age</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="heat-ent">45%</div><div class="stat-label">Entropy</div></div>
                        <div class="stat-box"><div class="stat-value" id="heat-stars">✨</div><div class="stat-label">Stars?</div></div>
                    </div>
                    <div class="result" id="heat-result"><p>Finite age explains why we're not at heat death yet.</p></div>
                </div>
            </div>

            <!-- Banach-Tarski Paradox -->
            <div class="paradox-card">
                <h3>Banach-Tarski Paradox <span class="points">97 pts</span></h3>
                <p class="description">A sphere can be decomposed into pieces and reassembled into TWO identical spheres! Mathematical duplication!</p>
                <div class="simulator">
                    <h4>Sphere Duplication</h4>
                    <div class="controls">
                        <button onclick="runBanach()">Decompose & Reassemble</button>
                        <button onclick="resetBanach()">Reset</button>
                    </div>
                    <div id="banach-viz" style="display: flex; justify-content: center; gap: 2rem; margin-top: 1rem; font-size: 3rem;">
                        <span id="banach-1">🔵</span>
                        <span id="banach-2" style="opacity: 0;">🔵</span>
                    </div>
                    <div class="result" id="banach-result"><p>Using the Axiom of Choice, we can cut a sphere into 5 pieces and rearrange them into 2 spheres!</p></div>
                    <div class="insight">This only works with non-measurable sets - you can't do this with physical matter!</div>
                </div>
            </div>

            <!-- Two Capacitor Paradox -->
            <div class="paradox-card">
                <h3>Two Capacitor Paradox <span class="points">438 pts</span></h3>
                <p class="description">Connect a charged capacitor to an empty one. Energy is lost! Where does it go?</p>
                <div class="simulator">
                    <h4>Energy Conservation?</h4>
                    <div class="controls">
                        <button onclick="connectCaps()">Connect Capacitors</button>
                        <button onclick="resetCaps()">Reset</button>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 1rem; align-items: center; margin-top: 1rem;">
                        <div class="stat-box" style="text-align: center;"><div id="cap1-v">10V</div><div class="stat-label">Cap 1</div></div>
                        <div id="cap-wire" style="width: 50px; height: 4px; background: var(--muted);"></div>
                        <div class="stat-box" style="text-align: center;"><div id="cap2-v">0V</div><div class="stat-label">Cap 2</div></div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="cap-e-before">50 J</div><div class="stat-label">Energy Before</div></div>
                        <div class="stat-box"><div class="stat-value" id="cap-e-after">50 J</div><div class="stat-label">Energy After</div></div>
                        <div class="stat-box"><div class="stat-value" id="cap-lost">0 J</div><div class="stat-label">Lost!</div></div>
                    </div>
                    <div class="insight">The "missing" energy is dissipated as heat in the wire resistance, or radiated as EM waves!</div>
                </div>
            </div>
        </section>

        <script>
            // Black Hole Info
            let bhIn = 0;
            function dropIntoBH() {
                const obj = document.getElementById('bh-object');
                obj.style.left = '50%';
                obj.style.opacity = '0';
                bhIn += 1024;
                document.getElementById('bh-in').textContent = bhIn;
                setTimeout(() => {
                    const out = Math.floor(Math.random() * 50);
                    document.getElementById('bh-out').textContent = out + ' (random)';
                    document.getElementById('bh-lost').textContent = '❌ NO!';
                    document.getElementById('bh-lost').style.color = '#ef4444';
                }, 1000);
            }
            function resetBH() {
                document.getElementById('bh-object').style.cssText = 'position: absolute; left: 20%; font-size: 1.5rem; transition: all 1s;';
                bhIn = 0;
                document.getElementById('bh-in').textContent = '0';
                document.getElementById('bh-out').textContent = '0';
                document.getElementById('bh-lost').textContent = '❓';
                document.getElementById('bh-lost').style.color = '';
            }

            // Archer
            function fireArrow() {
                document.getElementById('arrow-obj').style.left = 'calc(100% - 60px)';
                document.getElementById('archer-result').innerHTML = '<p style="color: var(--accent);"><strong>HIT!</strong> Arrow flexed around bow handle!</p>';
            }
            function resetArrow() {
                document.getElementById('arrow-obj').style.left = '50px';
                document.getElementById('archer-result').innerHTML = '<p>The arrow flexes around the bow riser during release.</p>';
            }

            // Hydrostatic
            function updateHydro() {
                const h = document.getElementById('hydro-h').value;
                document.getElementById('hydro-h-val').textContent = h;
                document.getElementById('hydro-p').textContent = (h * 9.8).toFixed(0);
            }

            // Faint Sun
            function updateFaint() {
                const t = parseFloat(document.getElementById('faint-t').value);
                document.getElementById('faint-val').textContent = t;
                document.getElementById('faint-lum').textContent = (100 - t * 7.5).toFixed(0) + '%';
                document.getElementById('faint-exp').textContent = (-10 - t * 10).toFixed(0) + '°C';
                document.getElementById('faint-act').textContent = '+' + (20 - t * 2).toFixed(0) + '°C';
            }

            // EPR
            let eprDone = false;
            function measureEPR(p) {
                if (eprDone) return;
                eprDone = true;
                const spin = Math.random() > 0.5 ? '↑' : '↓';
                const anti = spin === '↑' ? '↓' : '↑';
                document.getElementById('epr-a').textContent = p === 'A' ? spin : anti;
                document.getElementById('epr-b').textContent = p === 'B' ? spin : anti;
                document.getElementById('epr-result').innerHTML = `<p style="color: var(--accent);">Measured ${p}! Other particle INSTANTLY becomes opposite - faster than light!</p>`;
            }
            function resetEPR() {
                eprDone = false;
                document.getElementById('epr-a').textContent = '?';
                document.getElementById('epr-b').textContent = '?';
                document.getElementById('epr-result').innerHTML = '<p>Measure one particle to instantly determine the other!</p>';
            }

            // Heat Death
            function setHeatModel(m) {
                if (m === 'finite') {
                    document.getElementById('heat-ent').textContent = '45%';
                    document.getElementById('heat-stars').textContent = '✨ Yes';
                    document.getElementById('heat-result').innerHTML = '<p>Finite age explains current low entropy.</p>';
                } else {
                    document.getElementById('heat-ent').textContent = '100%';
                    document.getElementById('heat-stars').textContent = '❌ No';
                    document.getElementById('heat-result').innerHTML = '<p style="color: #ef4444;">PARADOX! Should be at max entropy with no stars!</p>';
                }
            }

            // Banach-Tarski
            function runBanach() {
                document.getElementById('banach-1').textContent = '🔵';
                document.getElementById('banach-2').style.opacity = '1';
                document.getElementById('banach-result').innerHTML = '<p style="color: var(--accent);">ONE sphere became TWO identical spheres!</p>';
            }
            function resetBanach() {
                document.getElementById('banach-2').style.opacity = '0';
                document.getElementById('banach-result').innerHTML = '<p>Using the Axiom of Choice, we can duplicate a sphere!</p>';
            }

            // Two Capacitor
            function connectCaps() {
                document.getElementById('cap1-v').textContent = '5V';
                document.getElementById('cap2-v').textContent = '5V';
                document.getElementById('cap-wire').style.background = 'var(--accent)';
                document.getElementById('cap-e-after').textContent = '25 J';
                document.getElementById('cap-lost').textContent = '25 J!';
                document.getElementById('cap-lost').style.color = '#ef4444';
            }
            function resetCaps() {
                document.getElementById('cap1-v').textContent = '10V';
                document.getElementById('cap2-v').textContent = '0V';
                document.getElementById('cap-wire').style.background = 'var(--muted)';
                document.getElementById('cap-e-before').textContent = '50 J';
                document.getElementById('cap-e-after').textContent = '50 J';
                document.getElementById('cap-lost').textContent = '0 J';
                document.getElementById('cap-lost').style.color = '';
            }
        </script>

        <!-- MORE TECHNOLOGY PARADOXES -->
        <section id="moretech">
            <h2 class="category-title">More Technology Paradoxes</h2>

            <!-- Python Paradox -->
            <div class="paradox-card">
                <h3>Python Paradox <span class="points">148 pts</span></h3>
                <p class="description">If a company uses a "hard" language, they'll get better programmers - those who learn for passion, not just jobs.</p>
                <div class="simulator">
                    <h4>Language Choice Effect</h4>
                    <div class="controls">
                        <select id="lang-choice" onchange="updateLangParadox()">
                            <option value="java">Java (Popular, Required)</option>
                            <option value="python">Python (Easy, Growing)</option>
                            <option value="haskell">Haskell (Hard, Niche)</option>
                            <option value="rust">Rust (Hard, Growing)</option>
                        </select>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="lang-pool">Large</div><div class="stat-label">Candidate Pool</div></div>
                        <div class="stat-box"><div class="stat-value" id="lang-passion">40%</div><div class="stat-label">Passion-Driven</div></div>
                        <div class="stat-box"><div class="stat-value" id="lang-quality">Medium</div><div class="stat-label">Avg Quality</div></div>
                    </div>
                    <div class="result" id="lang-result"><p>Java: Large pool but many learn just for jobs.</p></div>
                </div>
            </div>

            <!-- Static Site Paradox -->
            <div class="paradox-card">
                <h3>Static Site Paradox <span class="points">546 pts</span></h3>
                <p class="description">Static sites are "simpler" but often require more complex tooling than dynamic sites!</p>
                <div class="simulator">
                    <h4>Complexity Comparison</h4>
                    <div class="controls">
                        <button onclick="showSiteStack('dynamic')">Dynamic Site</button>
                        <button onclick="showSiteStack('static')">Static Site</button>
                    </div>
                    <div id="site-stack" style="margin-top: 1rem; font-family: monospace; font-size: 0.85rem; background: var(--bg); padding: 1rem; border-radius: 0.5rem; min-height: 100px;"></div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="site-deps">?</div><div class="stat-label">Dependencies</div></div>
                        <div class="stat-box"><div class="stat-value" id="site-build">?</div><div class="stat-label">Build Steps</div></div>
                    </div>
                </div>
            </div>

            <!-- Open Source Paradox -->
            <div class="paradox-card">
                <h3>Open Source Paradox <span class="points">368 pts</span></h3>
                <p class="description">Companies give away code for free, yet make billions. How does giving away your product make money?</p>
                <div class="simulator">
                    <h4>Business Model</h4>
                    <div class="controls">
                        <select id="oss-model" onchange="updateOSSParadox()">
                            <option value="support">Support/Consulting</option>
                            <option value="saas">SaaS (Hosted)</option>
                            <option value="opencore">Open Core</option>
                            <option value="dual">Dual Licensing</option>
                        </select>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="oss-free">100%</div><div class="stat-label">Code Free</div></div>
                        <div class="stat-box"><div class="stat-value" id="oss-rev">$$$</div><div class="stat-label">Revenue Source</div></div>
                    </div>
                    <div class="result" id="oss-result"><p>Red Hat model: Code is free, expertise is valuable.</p></div>
                </div>
            </div>

            <!-- Captcha Paradox -->
            <div class="paradox-card">
                <h3>Captcha Paradox <span class="points">13 pts</span></h3>
                <p class="description">CAPTCHAs designed to stop bots now train AI to be better at solving them!</p>
                <div class="simulator">
                    <h4>The Self-Defeating Loop</h4>
                    <div class="controls">
                        <button onclick="runCaptchaLoop()">Run Evolution</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="captcha-gen">1</div><div class="stat-label">Generation</div></div>
                        <div class="stat-box"><div class="stat-value" id="captcha-human">Easy</div><div class="stat-label">For Humans</div></div>
                        <div class="stat-box"><div class="stat-value" id="captcha-bot">Hard</div><div class="stat-label">For Bots</div></div>
                    </div>
                    <div class="result" id="captcha-result"><p>Each CAPTCHA solved trains ML models to solve the next one...</p></div>
                </div>
            </div>

            <!-- Generative AI Paradox -->
            <div class="paradox-card">
                <h3>Generative AI Paradox <span class="points">5 pts</span></h3>
                <p class="description">What AI can create, it may not understand. LLMs generate sophisticated text without comprehension.</p>
                <div class="simulator">
                    <h4>Creation vs Understanding</h4>
                    <div class="controls">
                        <button onclick="testAIParadox('create')">Ask to Create</button>
                        <button onclick="testAIParadox('explain')">Ask to Explain</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="ai-create">✨</div><div class="stat-label">Creation Ability</div></div>
                        <div class="stat-box"><div class="stat-value" id="ai-understand">❓</div><div class="stat-label">Understanding</div></div>
                    </div>
                    <div class="result" id="ai-paradox-result"><p>Can produce Shakespeare-quality prose, but does it "know" what it means?</p></div>
                </div>
            </div>

            <!-- AI Deskilling Paradox -->
            <div class="paradox-card">
                <h3>AI Deskilling Paradox <span class="points">4 pts</span></h3>
                <p class="description">As AI handles more tasks, humans lose skills. But when AI fails, we need those skills most!</p>
                <div class="simulator">
                    <h4>Skill Degradation Over Time</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>AI Reliance: <span id="deskill-val">50</span>%</label>
                            <input type="range" id="deskill-r" min="0" max="100" value="50" oninput="updateDeskill()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="deskill-human">50%</div><div class="stat-label">Human Skill</div></div>
                        <div class="stat-box"><div class="stat-value" id="deskill-ai">50%</div><div class="stat-label">AI Capability</div></div>
                        <div class="stat-box"><div class="stat-value" id="deskill-risk">Low</div><div class="stat-label">Failure Risk</div></div>
                    </div>
                    <div class="result" id="deskill-result"><p>Balanced reliance maintains human capability.</p></div>
                </div>
            </div>

            <!-- Miserable Programmer Paradox -->
            <div class="paradox-card">
                <h3>Miserable Programmer Paradox <span class="points">154 pts</span></h3>
                <p class="description">The most productive programmers are often the most miserable - they see all the problems others miss.</p>
                <div class="simulator">
                    <h4>Awareness vs Happiness</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Code Awareness: <span id="misery-val">50</span>%</label>
                            <input type="range" id="misery-a" min="0" max="100" value="50" oninput="updateMisery()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="misery-bugs">50</div><div class="stat-label">Bugs You See</div></div>
                        <div class="stat-box"><div class="stat-value" id="misery-happy">😐</div><div class="stat-label">Happiness</div></div>
                        <div class="stat-box"><div class="stat-value" id="misery-prod">Medium</div><div class="stat-label">Productivity</div></div>
                    </div>
                </div>
            </div>

            <!-- Vibe Coding Paradox -->
            <div class="paradox-card">
                <h3>Vibe Coding Paradox <span class="points">NEW</span></h3>
                <p class="description">AI removes friction from coding, but friction was where we decided what mattered. AI amplifies both excellence and dysfunction.</p>
                <div class="simulator">
                    <h4>System Ownership Test</h4>
                    <div class="controls">
                        <button onclick="setVibeCoding('owned')">Your Own System</button>
                        <button onclick="setVibeCoding('inherited')">Inherited Codebase</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="vibe-friction">-</div><div class="stat-label">Friction Removed</div></div>
                        <div class="stat-box"><div class="stat-value" id="vibe-quality">-</div><div class="stat-label">Code Quality</div></div>
                        <div class="stat-box"><div class="stat-value" id="vibe-outcome">-</div><div class="stat-label">AI Effect</div></div>
                    </div>
                    <div class="result" id="vibe-result">
                        <p><strong>The Paradox:</strong> A 1,100-line React component needs fixing. Refactor properly = 2 hours. AI patch = 5 minutes. Which do you choose?</p>
                    </div>
                    <div class="insight">"Computers are amplifiers." AI doesn't improve broken systems - it scales dysfunction silently with clean, well-formatted code.</div>
                </div>
            </div>
        </section>

        <script>
            // Vibe Coding Paradox
            function setVibeCoding(type) {
                if (type === 'owned') {
                    document.getElementById('vibe-friction').textContent = 'High';
                    document.getElementById('vibe-quality').textContent = 'Improved';
                    document.getElementById('vibe-outcome').textContent = 'Amplifies Care';
                    document.getElementById('vibe-result').innerHTML = '<p style="color: var(--primary);"><strong>Your system:</strong> You have intentional constraints and standards. AI-generated code either aligns with them or gets caught immediately. AI amplifies your care and intent.</p>';
                } else {
                    document.getElementById('vibe-friction').textContent = 'Very High';
                    document.getElementById('vibe-quality').textContent = 'Unchanged';
                    document.getElementById('vibe-outcome').textContent = 'Scales Dysfunction';
                    document.getElementById('vibe-result').innerHTML = '<p style="color: #ef4444;"><strong>Inherited mess:</strong> AI becomes a shield against cognitive overload. You ship "beautifully formatted, semantically named dysfunction." The cost of caring exceeds the cost of being correct.</p>';
                }
            }

            // Python Paradox
            function updateLangParadox() {
                const lang = document.getElementById('lang-choice').value;
                const data = {
                    java: { pool: 'Large', passion: '40%', quality: 'Medium', desc: 'Many learn for jobs, not love.' },
                    python: { pool: 'Large', passion: '60%', quality: 'Medium-High', desc: 'Popular but also loved by hobbyists.' },
                    haskell: { pool: 'Small', passion: '95%', quality: 'Very High', desc: 'Only enthusiasts bother - they\'re exceptional!' },
                    rust: { pool: 'Medium', passion: '90%', quality: 'High', desc: 'Hard enough to filter, popular enough to attract.' }
                };
                const d = data[lang];
                document.getElementById('lang-pool').textContent = d.pool;
                document.getElementById('lang-passion').textContent = d.passion;
                document.getElementById('lang-quality').textContent = d.quality;
                document.getElementById('lang-result').innerHTML = `<p>${d.desc}</p>`;
            }

            // Static Site Paradox
            function showSiteStack(type) {
                const stacks = {
                    dynamic: { deps: 3, build: 1, stack: 'PHP/WordPress\n└── Apache\n    └── MySQL\n\nDeploy: FTP upload' },
                    static: { deps: 847, build: 6, stack: 'React + Gatsby\n├── Node.js\n├── npm (847 packages)\n├── Webpack\n├── Babel\n├── GraphQL\n└── 12 plugins\n\nDeploy: npm build → CI/CD → CDN' }
                };
                const s = stacks[type];
                document.getElementById('site-stack').textContent = s.stack;
                document.getElementById('site-deps').textContent = s.deps;
                document.getElementById('site-build').textContent = s.build;
            }

            // Open Source Paradox
            function updateOSSParadox() {
                const model = document.getElementById('oss-model').value;
                const data = {
                    support: { free: '100%', rev: 'Services', desc: 'Red Hat: Code free, expertise costs.' },
                    saas: { free: '100%', rev: 'Hosting', desc: 'GitLab: Run yourself free, or pay us to host.' },
                    opencore: { free: '80%', rev: 'Premium', desc: 'Elastic: Core free, advanced features paid.' },
                    dual: { free: '100%*', rev: 'Licenses', desc: 'MySQL: Free for open source, pay for proprietary use.' }
                };
                const d = data[model];
                document.getElementById('oss-free').textContent = d.free;
                document.getElementById('oss-rev').textContent = d.rev;
                document.getElementById('oss-result').innerHTML = `<p>${d.desc}</p>`;
            }

            // Captcha Paradox
            let captchaGen = 1;
            function runCaptchaLoop() {
                captchaGen++;
                const human = captchaGen > 5 ? 'Very Hard' : captchaGen > 3 ? 'Hard' : 'Easy';
                const bot = captchaGen > 5 ? 'Easy (trained!)' : captchaGen > 3 ? 'Medium' : 'Hard';
                document.getElementById('captcha-gen').textContent = captchaGen;
                document.getElementById('captcha-human').textContent = human;
                document.getElementById('captcha-bot').textContent = bot;
                document.getElementById('captcha-result').innerHTML = captchaGen > 5 ?
                    '<p style="color: #ef4444;">PARADOX! CAPTCHAs are now harder for humans than bots!</p>' :
                    '<p>Generation ' + captchaGen + ': Making CAPTCHAs harder trains better AI...</p>';
            }

            // Generative AI Paradox
            function testAIParadox(action) {
                if (action === 'create') {
                    document.getElementById('ai-create').textContent = '✅ Excellent';
                    document.getElementById('ai-understand').textContent = '❓';
                    document.getElementById('ai-paradox-result').innerHTML = '<p>AI can write a sonnet about love without ever feeling it.</p>';
                } else {
                    document.getElementById('ai-understand').textContent = '🤷 Maybe?';
                    document.getElementById('ai-paradox-result').innerHTML = '<p>AI can explain its output, but is that understanding or pattern matching?</p>';
                }
            }

            // AI Deskilling
            function updateDeskill() {
                const r = parseInt(document.getElementById('deskill-r').value);
                document.getElementById('deskill-val').textContent = r;
                document.getElementById('deskill-human').textContent = (100 - r * 0.8).toFixed(0) + '%';
                document.getElementById('deskill-ai').textContent = r + '%';
                const risk = r > 80 ? 'Critical!' : r > 60 ? 'High' : r > 30 ? 'Medium' : 'Low';
                document.getElementById('deskill-risk').textContent = risk;
                document.getElementById('deskill-risk').style.color = r > 80 ? '#ef4444' : r > 60 ? '#f59e0b' : '#22c55e';
                document.getElementById('deskill-result').innerHTML = r > 80 ?
                    '<p style="color: #ef4444;">DANGER: If AI fails now, humans can\'t compensate!</p>' :
                    '<p>Current balance: ' + (r > 50 ? 'AI-dependent' : 'Human-capable') + '</p>';
            }

            // Miserable Programmer
            function updateMisery() {
                const a = parseInt(document.getElementById('misery-a').value);
                document.getElementById('misery-val').textContent = a;
                document.getElementById('misery-bugs').textContent = Math.floor(a * 1.5);
                const happy = a > 80 ? '😫' : a > 60 ? '😟' : a > 40 ? '😐' : '😊';
                const prod = a > 80 ? 'Very High' : a > 60 ? 'High' : a > 40 ? 'Medium' : 'Low';
                document.getElementById('misery-happy').textContent = happy;
                document.getElementById('misery-prod').textContent = prod;
            }
        </script>

        <!-- MORE SOCIAL/PSYCHOLOGY PARADOXES -->
        <section id="moresocial">
            <h2 class="category-title">More Social & Psychology Paradoxes</h2>

            <!-- Sleeping Beauty Paradox -->
            <div class="paradox-card">
                <h3>Sleeping Beauty Paradox <span class="points">77 pts</span></h3>
                <p class="description">Sleeping Beauty is woken and asked the probability the coin was heads. Is it 1/2 or 1/3?</p>
                <div class="simulator">
                    <h4>The Experiment</h4>
                    <div class="controls">
                        <button onclick="runSleepingBeauty()">Run Experiment</button>
                        <button onclick="setSBView('halfer')">I'm a Halfer (1/2)</button>
                        <button onclick="setSBView('thirder')">I'm a Thirder (1/3)</button>
                    </div>
                    <div class="result" id="sb-result">
                        <p><strong>Setup:</strong> Coin flip Sunday. Heads = wake Monday only. Tails = wake Monday AND Tuesday (memory wiped). What's P(Heads) when woken?</p>
                    </div>
                    <div class="insight">Philosophers still debate this! Both 1/2 and 1/3 have valid arguments.</div>
                </div>
            </div>

            <!-- Unexpected Hanging Paradox -->
            <div class="paradox-card">
                <h3>Unexpected Hanging Paradox <span class="points">77 pts</span></h3>
                <p class="description">A judge says: "You'll be hanged one day next week, and it will be a surprise." Can this ever be true?</p>
                <div class="simulator">
                    <h4>Reasoning Chain</h4>
                    <div class="controls">
                        <button onclick="reasonHanging()">Follow the Logic</button>
                        <button onclick="resetHanging()">Reset</button>
                    </div>
                    <div id="hanging-days" style="display: flex; gap: 0.5rem; margin-top: 1rem; justify-content: center;">
                        <span class="stat-box" style="padding: 0.5rem;">Mon</span>
                        <span class="stat-box" style="padding: 0.5rem;">Tue</span>
                        <span class="stat-box" style="padding: 0.5rem;">Wed</span>
                        <span class="stat-box" style="padding: 0.5rem;">Thu</span>
                        <span class="stat-box" style="padding: 0.5rem;" id="hang-fri">Fri</span>
                    </div>
                    <div class="result" id="hanging-result"><p>Can Friday be the day? Can Thursday? Keep eliminating...</p></div>
                </div>
            </div>

            <!-- Paradox of Choice -->
            <div class="paradox-card">
                <h3>Paradox of Choice <span class="points">54 pts</span></h3>
                <p class="description">More options should make us happier, but too many choices leads to anxiety and regret.</p>
                <div class="simulator">
                    <h4>Jam Experiment</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Number of Jams: <span id="choice-val">6</span></label>
                            <input type="range" id="choice-n" min="2" max="30" value="6" oninput="updateChoice()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="choice-interest">60%</div><div class="stat-label">Stop to Look</div></div>
                        <div class="stat-box"><div class="stat-value" id="choice-buy">30%</div><div class="stat-label">Actually Buy</div></div>
                        <div class="stat-box"><div class="stat-value" id="choice-happy">High</div><div class="stat-label">Satisfaction</div></div>
                    </div>
                </div>
            </div>

            <!-- Willpower Paradox -->
            <div class="paradox-card">
                <h3>Willpower Paradox <span class="points">91 pts</span></h3>
                <p class="description">People with more self-control use it less. They structure life to avoid temptation.</p>
                <div class="simulator">
                    <h4>Self-Control Strategy</h4>
                    <div class="controls">
                        <button onclick="setWillpower('resist')">Rely on Willpower</button>
                        <button onclick="setWillpower('avoid')">Avoid Temptation</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="will-used">High</div><div class="stat-label">Willpower Used</div></div>
                        <div class="stat-box"><div class="stat-value" id="will-success">60%</div><div class="stat-label">Success Rate</div></div>
                    </div>
                    <div class="result" id="will-result"><p>Choose your strategy...</p></div>
                </div>
            </div>

            <!-- Paradox of Hedonism -->
            <div class="paradox-card">
                <h3>Paradox of Hedonism <span class="points">10 pts</span></h3>
                <p class="description">Directly pursuing pleasure often leads to unhappiness. Happiness is a byproduct, not a goal.</p>
                <div class="simulator">
                    <h4>Happiness Pursuit</h4>
                    <div class="controls">
                        <button onclick="setHedonism('direct')">Chase Happiness</button>
                        <button onclick="setHedonism('indirect')">Pursue Meaning</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="hed-effort">100%</div><div class="stat-label">Effort</div></div>
                        <div class="stat-box"><div class="stat-value" id="hed-happy">❓</div><div class="stat-label">Happiness Found</div></div>
                    </div>
                    <div class="result" id="hed-result"><p>Choose your approach to happiness...</p></div>
                </div>
            </div>

            <!-- Dating App Paradox -->
            <div class="paradox-card">
                <h3>Dating App Paradox <span class="points">251 pts</span></h3>
                <p class="description">Apps designed to help you find love make it harder. Infinite options = impossible choices.</p>
                <div class="simulator">
                    <h4>Dating Pool Size</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Matches Available: <span id="date-val">10</span></label>
                            <input type="range" id="date-n" min="1" max="1000" value="10" oninput="updateDating()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="date-commit">High</div><div class="stat-label">Commitment</div></div>
                        <div class="stat-box"><div class="stat-value" id="date-satisfy">High</div><div class="stat-label">Satisfaction</div></div>
                    </div>
                    <div class="result" id="date-result"><p>Small pool: You commit and appreciate what you have.</p></div>
                </div>
            </div>

            <!-- Hispanic Paradox -->
            <div class="paradox-card">
                <h3>Hispanic Paradox <span class="points">24 pts</span></h3>
                <p class="description">Hispanic Americans live longer than white Americans despite lower income and healthcare access.</p>
                <div class="simulator">
                    <h4>Health Outcomes</h4>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value">$52k</div><div class="stat-label">Median Income</div></div>
                        <div class="stat-box"><div class="stat-value">81.8 yrs</div><div class="stat-label">Life Expectancy</div></div>
                    </div>
                    <div style="margin-top: 1rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.9rem;">
                        <div>White Americans: $74k income, 78.8 yrs</div>
                        <div style="color: var(--accent);">Hispanic: Lower income, 3 years longer life!</div>
                    </div>
                    <div class="insight">Possible factors: family support, diet, selective migration, or the "healthy immigrant effect."</div>
                </div>
            </div>

            <!-- Violence Paradox -->
            <div class="paradox-card">
                <h3>Violence Paradox <span class="points">25 pts</span></h3>
                <p class="description">Despite news coverage, violence has dramatically declined over human history. We live in the most peaceful era ever.</p>
                <div class="simulator">
                    <h4>Violence Through History</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Era:</label>
                            <select id="violence-era" onchange="updateViolence()">
                                <option value="tribal">Tribal Era</option>
                                <option value="medieval">Medieval</option>
                                <option value="1900">Early 1900s</option>
                                <option value="now" selected>Today</option>
                            </select>
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="viol-rate">0.7%</div><div class="stat-label">Death by Violence</div></div>
                        <div class="stat-box"><div class="stat-value" id="viol-feel">High</div><div class="stat-label">Perceived Violence</div></div>
                    </div>
                    <div class="insight">Steven Pinker: "The past was a bloodbath." 24/7 news makes us think violence is increasing.</div>
                </div>
            </div>
        </section>

        <!-- More Logic Section -->
        <section id="morelogic">
            <h2 class="category-title">More Logic & Math</h2>

            <!-- Sorites Paradox -->
            <div class="paradox-card">
                <h3>Sorites Paradox <span class="points">59 pts</span></h3>
                <p class="description">Remove one grain from a heap and it's still a heap. But repeat enough times and you have no heap. When does it stop being a heap?</p>
                <div class="simulator">
                    <h4>Heap Builder</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Grains: <span id="sorites-val">1000</span></label>
                            <input type="range" id="sorites-n" min="0" max="1000" value="1000" oninput="updateSorites()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="sorites-grains">1000</div><div class="stat-label">Grains</div></div>
                        <div class="stat-box"><div class="stat-value" id="sorites-status">🏔️ Heap</div><div class="stat-label">Classification</div></div>
                    </div>
                    <div class="result" id="sorites-result"><p>At what exact point does a heap cease to be a heap?</p></div>
                    <div class="insight">Vague predicates have no sharp boundary. The paradox shows that our language contains inherent vagueness.</div>
                </div>
            </div>

            <!-- Dome Paradox -->
            <div class="paradox-card">
                <h3>Dome Paradox <span class="points">10 pts</span></h3>
                <p class="description">A ball balanced on a special dome can spontaneously start moving without any external cause, challenging Newtonian determinism.</p>
                <div class="simulator">
                    <h4>Norton's Dome</h4>
                    <div class="controls">
                        <button onclick="startDome()">Wait for Motion</button>
                        <button onclick="resetDome()">Reset</button>
                    </div>
                    <canvas id="dome-canvas" width="300" height="200" style="background: var(--bg); border-radius: 0.5rem; display: block; margin: 1rem auto;"></canvas>
                    <div class="result" id="dome-result"><p>The ball is perfectly balanced at the apex...</p></div>
                    <div class="insight">Norton's dome shows Newtonian mechanics can be indeterministic - the ball can start moving at any time T≥0 without cause.</div>
                </div>
            </div>

            <!-- Bootstrap Paradox -->
            <div class="paradox-card">
                <h3>Bootstrap Paradox <span class="points">10 pts</span></h3>
                <p class="description">In time travel, information or objects exist without ever being created. Who composed Beethoven's symphonies if you gave them to him?</p>
                <div class="simulator">
                    <h4>Causal Loop</h4>
                    <div class="controls">
                        <button onclick="runBootstrap()">Travel Through Time</button>
                    </div>
                    <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin: 1rem 0; flex-wrap: wrap;">
                        <div id="boot-you" style="padding: 1rem; background: var(--primary); border-radius: 0.5rem; text-align: center;">
                            <div>🧑 You</div>
                            <div style="font-size: 0.8rem;">Has symphony</div>
                        </div>
                        <div style="font-size: 2rem;">→</div>
                        <div id="boot-past" style="padding: 1rem; background: var(--card); border: 2px solid var(--muted); border-radius: 0.5rem; text-align: center;">
                            <div>🎹 Young Beethoven</div>
                            <div style="font-size: 0.8rem;">Receives symphony</div>
                        </div>
                        <div style="font-size: 2rem;">→</div>
                        <div id="boot-future" style="padding: 1rem; background: var(--card); border: 2px solid var(--muted); border-radius: 0.5rem; text-align: center;">
                            <div>📜 Published Work</div>
                            <div style="font-size: 0.8rem;">You find it</div>
                        </div>
                    </div>
                    <div class="result" id="boot-result"><p>Who originally composed the symphony?</p></div>
                    <div class="insight">The information exists in a closed loop with no origin - a genuine ontological paradox.</div>
                </div>
            </div>

            <!-- Bonini's Paradox -->
            <div class="paradox-card">
                <h3>Bonini's Paradox <span class="points">88 pts</span></h3>
                <p class="description">As a model becomes more complete and realistic, it becomes harder to understand. A perfect model is as complex as reality itself.</p>
                <div class="simulator">
                    <h4>Model Complexity</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Model Detail: <span id="bonini-val">50%</span></label>
                            <input type="range" id="bonini-n" min="0" max="100" value="50" oninput="updateBonini()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="bonini-accuracy">Medium</div><div class="stat-label">Accuracy</div></div>
                        <div class="stat-box"><div class="stat-value" id="bonini-understand">Medium</div><div class="stat-label">Understandability</div></div>
                    </div>
                    <div class="result" id="bonini-result"><p>The usefulness of a model depends on its simplicity, not just accuracy.</p></div>
                    <div class="insight">"All models are wrong, but some are useful" - George Box. The goal is insight, not replication.</div>
                </div>
            </div>

            <!-- Polanyi's Paradox -->
            <div class="paradox-card">
                <h3>Polanyi's Paradox <span class="points">88 pts</span></h3>
                <p class="description">"We know more than we can tell." Much human knowledge is tacit and cannot be explicitly stated - which is why many skills are hard to automate.</p>
                <div class="simulator">
                    <h4>Tacit Knowledge Test</h4>
                    <div class="controls">
                        <button onclick="setPolanyi('bike')">Riding a Bike</button>
                        <button onclick="setPolanyi('face')">Recognizing Faces</button>
                        <button onclick="setPolanyi('chess')">Playing Chess</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="pol-human">Easy</div><div class="stat-label">Human Ability</div></div>
                        <div class="stat-box"><div class="stat-value" id="pol-explain">❓</div><div class="stat-label">Can Explain How?</div></div>
                        <div class="stat-box"><div class="stat-value" id="pol-automate">❓</div><div class="stat-label">Automation Ease</div></div>
                    </div>
                    <div class="result" id="pol-result"><p>Select a skill to analyze...</p></div>
                    <div class="insight">Explains Moravec's paradox: we can automate "hard" tasks (chess) but not "easy" ones (walking).</div>
                </div>
            </div>

            <!-- Grelling-Nelson Paradox -->
            <div class="paradox-card">
                <h3>Grelling-Nelson Paradox <span class="points">7 pts</span></h3>
                <p class="description">Is "heterological" (a word that doesn't describe itself) heterological? If yes, then no. If no, then yes.</p>
                <div class="simulator">
                    <h4>Word Classification</h4>
                    <div class="controls">
                        <button onclick="classifyWord('short')">Short</button>
                        <button onclick="classifyWord('long')">Long</button>
                        <button onclick="classifyWord('english')">English</button>
                        <button onclick="classifyWord('heterological')">Heterological</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="grell-word">-</div><div class="stat-label">Word</div></div>
                        <div class="stat-box"><div class="stat-value" id="grell-type">-</div><div class="stat-label">Classification</div></div>
                    </div>
                    <div class="result" id="grell-result"><p>Autological words describe themselves. Heterological words don't.</p></div>
                    <div class="insight">Like Russell's paradox, self-reference creates contradictions in natural language.</div>
                </div>
            </div>

            <!-- Curry's Paradox -->
            <div class="paradox-card">
                <h3>Curry's Paradox <span class="points">23 pts</span></h3>
                <p class="description">"If this sentence is true, then Santa exists." This seemingly absurd conditional can prove anything!</p>
                <div class="simulator">
                    <h4>Self-Referential Logic</h4>
                    <div class="controls">
                        <button onclick="runCurry('santa')">Prove Santa Exists</button>
                        <button onclick="runCurry('unicorn')">Prove Unicorns Exist</button>
                        <button onclick="runCurry('anything')">Prove Anything</button>
                    </div>
                    <div class="result" id="curry-result">
                        <p>Let S = "If S is true, then [claim]"</p>
                        <p>Step 1: Assume S is true</p>
                        <p>Step 2: Then by S's definition, [claim] is true</p>
                        <p>Step 3: We've proven "If S is true, then [claim]"</p>
                        <p>Step 4: But that's exactly what S says! So S is true.</p>
                        <p>Step 5: Therefore [claim] is true. 🤯</p>
                    </div>
                    <div class="insight">Curry's paradox shows that self-reference + modus ponens breaks classical logic.</div>
                </div>
            </div>

            <!-- Berry Paradox -->
            <div class="paradox-card">
                <h3>Berry Paradox <span class="points">9 pts</span></h3>
                <p class="description">"The smallest integer not definable in under sixty letters" - but that phrase has fewer than sixty letters!</p>
                <div class="simulator">
                    <h4>Definition Counter</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Max letters: <span id="berry-val">60</span></label>
                            <input type="range" id="berry-n" min="20" max="100" value="60" oninput="updateBerry()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="berry-phrase">57</div><div class="stat-label">Phrase Letters</div></div>
                        <div class="stat-box"><div class="stat-value" id="berry-status">⚠️ Paradox!</div><div class="stat-label">Status</div></div>
                    </div>
                    <div class="result" id="berry-result"><p>The phrase defines a number by claiming it can't be defined with this few letters!</p></div>
                    <div class="insight">Related to Gödel's incompleteness - "definability" itself cannot be well-defined.</div>
                </div>
            </div>

            <!-- Allais Paradox -->
            <div class="paradox-card">
                <h3>Allais Paradox <span class="points">5 pts</span></h3>
                <p class="description">Human choices in gambles systematically violate expected utility theory. Certainty has disproportionate psychological weight.</p>
                <div class="simulator">
                    <h4>Gamble Choice</h4>
                    <p style="color: var(--muted); margin-bottom: 1rem;">Choice 1:</p>
                    <div class="controls">
                        <button onclick="setAllais(1, 'A')">A: 100% chance of $1M</button>
                        <button onclick="setAllais(1, 'B')">B: 89% $1M, 10% $5M, 1% $0</button>
                    </div>
                    <p style="color: var(--muted); margin: 1rem 0;">Choice 2:</p>
                    <div class="controls">
                        <button onclick="setAllais(2, 'C')">C: 11% chance of $1M</button>
                        <button onclick="setAllais(2, 'D')">D: 10% chance of $5M</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="allais-c1">-</div><div class="stat-label">Choice 1</div></div>
                        <div class="stat-box"><div class="stat-value" id="allais-c2">-</div><div class="stat-label">Choice 2</div></div>
                    </div>
                    <div class="result" id="allais-result"><p>Most people choose A and D - but this is inconsistent!</p></div>
                    <div class="insight">The "certainty effect" - we overweight guaranteed outcomes vs probabilistic ones of equal expected value.</div>
                </div>
            </div>

            <!-- Inventor's Paradox -->
            <div class="paradox-card">
                <h3>Inventor's Paradox <span class="points">5 pts</span></h3>
                <p class="description">Sometimes it's easier to solve a more general problem than a specific one. The extra generality provides more angles of attack.</p>
                <div class="simulator">
                    <h4>Problem Approach</h4>
                    <div class="controls">
                        <button onclick="setInventor('specific')">Solve Specific Problem</button>
                        <button onclick="setInventor('general')">Solve General Problem</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="inv-scope">-</div><div class="stat-label">Problem Scope</div></div>
                        <div class="stat-box"><div class="stat-value" id="inv-ease">-</div><div class="stat-label">Solution Ease</div></div>
                        <div class="stat-box"><div class="stat-value" id="inv-insight">-</div><div class="stat-label">Insight Gained</div></div>
                    </div>
                    <div class="result" id="inv-result"><p>Compare the two approaches...</p></div>
                    <div class="insight">George Pólya: "The more ambitious plan may have more chances of success."</div>
                </div>
            </div>

            <!-- Drinker Paradox -->
            <div class="paradox-card">
                <h3>Drinker Paradox <span class="points">4 pts</span></h3>
                <p class="description">"There is someone in the pub such that if they are drinking, everyone is drinking." This bizarre statement is always true!</p>
                <div class="simulator">
                    <h4>Pub Logic</h4>
                    <div class="controls">
                        <button onclick="setDrinker('all')">Everyone Drinking</button>
                        <button onclick="setDrinker('some')">Some Drinking</button>
                        <button onclick="setDrinker('none')">Nobody Drinking</button>
                        <button onclick="setDrinker('empty')">Empty Pub</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="drink-scene">🍺🍺🍺</div><div class="stat-label">Scene</div></div>
                        <div class="stat-box"><div class="stat-value" id="drink-person">-</div><div class="stat-label">The Person</div></div>
                    </div>
                    <div class="result" id="drink-result"><p>Choose a scenario to find "the person"...</p></div>
                    <div class="insight">The statement is vacuously true when someone isn't drinking (false → anything is true).</div>
                </div>
            </div>
        </section>

        <!-- More Economics Section -->
        <section id="moreeconomics">
            <h2 class="category-title">More Economics & Medical</h2>

            <!-- Commuting Paradox -->
            <div class="paradox-card">
                <h3>Commuting Paradox <span class="points">140 pts</span></h3>
                <p class="description">People with long commutes report lower life satisfaction, yet millions choose to commute. The extra income doesn't compensate for lost time.</p>
                <div class="simulator">
                    <h4>Commute Calculator</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Daily Commute: <span id="commute-val">30</span> min</label>
                            <input type="range" id="commute-n" min="0" max="120" value="30" oninput="updateCommute()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="comm-year">130 hrs</div><div class="stat-label">Hours/Year</div></div>
                        <div class="stat-box"><div class="stat-value" id="comm-salary">+$5K</div><div class="stat-label">Extra Salary</div></div>
                        <div class="stat-box"><div class="stat-value" id="comm-happy">😊 Good</div><div class="stat-label">Life Satisfaction</div></div>
                    </div>
                    <div class="result" id="commute-result"><p>Research shows commuting is the activity that makes people least happy.</p></div>
                    <div class="insight">To offset a 1-hour commute's unhappiness, you'd need a 40% salary increase.</div>
                </div>
            </div>

            <!-- Free-Time Paradox -->
            <div class="paradox-card">
                <h3>Free-Time Paradox <span class="points">257 pts</span></h3>
                <p class="description">Americans have more free time than ever but feel more rushed. Higher income people have less leisure but feel less busy.</p>
                <div class="simulator">
                    <h4>Time Perception</h4>
                    <div class="controls">
                        <button onclick="setFreeTime('low')">Low Income</button>
                        <button onclick="setFreeTime('mid')">Middle Income</button>
                        <button onclick="setFreeTime('high')">High Income</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="ft-actual">-</div><div class="stat-label">Actual Free Time</div></div>
                        <div class="stat-box"><div class="stat-value" id="ft-feel">-</div><div class="stat-label">Perceived Busyness</div></div>
                    </div>
                    <div class="result" id="ft-result"><p>Select an income level...</p></div>
                    <div class="insight">Wealth buys busyness as a status symbol. Having "no time" signals importance.</div>
                </div>
            </div>

            <!-- Eligible Bachelor Paradox -->
            <div class="paradox-card">
                <h3>Eligible Bachelor Paradox <span class="points">94 pts</span></h3>
                <p class="description">Why do all the good partners seem taken? Selection bias and market dynamics create a dating pool where eligible partners are rare.</p>
                <div class="simulator">
                    <h4>Dating Market</h4>
                    <div class="controls">
                        <button onclick="runBachelor()">Run Simulation</button>
                    </div>
                    <div style="display: flex; justify-content: center; gap: 2rem; margin: 1rem 0; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem;" id="bach-pool">👤👤👤👤👤</div>
                            <div style="color: var(--muted);">Dating Pool</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem;" id="bach-taken">💑💑💑</div>
                            <div style="color: var(--muted);">Paired Off</div>
                        </div>
                    </div>
                    <div class="result" id="bach-result"><p>Good partners get selected quickly, leaving the pool with disproportionately difficult matches.</p></div>
                    <div class="insight">It's not your imagination - the stable marriage problem mathematically guarantees this outcome.</div>
                </div>
            </div>

            <!-- Deming Paradox -->
            <div class="paradox-card">
                <h3>Deming Paradox <span class="points">283 pts</span></h3>
                <p class="description">Operationally rigorous companies often aren't nice places to work. The practices that make companies efficient can make them unpleasant.</p>
                <div class="simulator">
                    <h4>Company Culture</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Operational Rigor: <span id="deming-val">50%</span></label>
                            <input type="range" id="deming-n" min="0" max="100" value="50" oninput="updateDeming()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="dem-efficiency">Medium</div><div class="stat-label">Efficiency</div></div>
                        <div class="stat-box"><div class="stat-value" id="dem-pleasant">Medium</div><div class="stat-label">Pleasant to Work</div></div>
                    </div>
                    <div class="result" id="deming-result"><p>Balance operational excellence with human factors.</p></div>
                    <div class="insight">Amazon, Toyota, McKinsey: great at execution, often described as "intense" cultures.</div>
                </div>
            </div>

            <!-- Karl Popper Paradox -->
            <div class="paradox-card">
                <h3>Karl Popper Paradox <span class="points">147 pts</span></h3>
                <p class="description">A tolerant society cannot tolerate intolerance. Unlimited tolerance leads to the disappearance of tolerance itself.</p>
                <div class="simulator">
                    <h4>Tolerance Dilemma</h4>
                    <div class="controls">
                        <button onclick="setPopper('tolerate')">Tolerate Intolerance</button>
                        <button onclick="setPopper('reject')">Reject Intolerance</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="pop-action">-</div><div class="stat-label">Action</div></div>
                        <div class="stat-box"><div class="stat-value" id="pop-outcome">-</div><div class="stat-label">Long-term</div></div>
                    </div>
                    <div class="result" id="popper-result"><p>What should a tolerant society do?</p></div>
                    <div class="insight">Popper: "We should claim the right to suppress the intolerant if necessary."</div>
                </div>
            </div>

            <!-- Clothesline Paradox -->
            <div class="paradox-card">
                <h3>Clothesline Paradox <span class="points">12 pts</span></h3>
                <p class="description">When you dry clothes on a clothesline instead of a dryer, GDP goes DOWN. Our economic metrics punish efficiency!</p>
                <div class="simulator">
                    <h4>Economic Impact</h4>
                    <div class="controls">
                        <button onclick="setClothesline('dryer')">Use Electric Dryer</button>
                        <button onclick="setClothesline('line')">Use Clothesline</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="cloth-energy">-</div><div class="stat-label">Energy Used</div></div>
                        <div class="stat-box"><div class="stat-value" id="cloth-gdp">-</div><div class="stat-label">GDP Impact</div></div>
                        <div class="stat-box"><div class="stat-value" id="cloth-env">-</div><div class="stat-label">Environment</div></div>
                    </div>
                    <div class="result" id="clothesline-result"><p>Compare the economic measurement...</p></div>
                    <div class="insight">GDP measures activity, not well-being. Sustainable behavior can look like economic decline.</div>
                </div>
            </div>

            <!-- Obesity-Hunger Paradox -->
            <div class="paradox-card">
                <h3>Obesity-Hunger Paradox <span class="points">13 pts</span></h3>
                <p class="description">Poor people often face both hunger AND obesity. Cheap foods are calorie-dense but nutrient-poor.</p>
                <div class="simulator">
                    <h4>Food Budget Impact</h4>
                    <div class="controls">
                        <div class="control-group">
                            <label>Daily Food Budget: $<span id="food-val">5</span></label>
                            <input type="range" id="food-n" min="2" max="30" value="5" oninput="updateFood()">
                        </div>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="food-cal">High</div><div class="stat-label">Calories Access</div></div>
                        <div class="stat-box"><div class="stat-value" id="food-nut">Low</div><div class="stat-label">Nutrition Quality</div></div>
                        <div class="stat-box"><div class="stat-value" id="food-health">Poor</div><div class="stat-label">Health Outcome</div></div>
                    </div>
                    <div class="result" id="food-result"><p>Food insecurity leads to binge-eating when food is available.</p></div>
                    <div class="insight">A McDonald's meal is $5. A salad is $12. Poverty forces calorie maximization.</div>
                </div>
            </div>

            <!-- Low Birth-Weight Paradox -->
            <div class="paradox-card">
                <h3>Low Birth-Weight Paradox <span class="points">4 pts</span></h3>
                <p class="description">Low birth weight babies of smokers have BETTER survival rates than low birth weight babies of non-smokers!</p>
                <div class="simulator">
                    <h4>Birth Weight Analysis</h4>
                    <div class="controls">
                        <button onclick="setBirthWeight('smoker')">Smoker's Baby (Low Weight)</button>
                        <button onclick="setBirthWeight('nonsmoker')">Non-Smoker's Baby (Low Weight)</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="bw-weight">Low</div><div class="stat-label">Birth Weight</div></div>
                        <div class="stat-box"><div class="stat-value" id="bw-survival">-</div><div class="stat-label">Survival Rate</div></div>
                    </div>
                    <div class="result" id="bw-result"><p>Select a scenario...</p></div>
                    <div class="insight">Confounding: smoking causes low weight (usually fine), but other causes of low weight are more serious.</div>
                </div>
            </div>

            <!-- Full-Fat Paradox -->
            <div class="paradox-card">
                <h3>Full-Fat Paradox <span class="points">5 pts</span></h3>
                <p class="description">Full-fat dairy may be healthier than low-fat. Despite more saturated fat, whole milk drinkers have lower diabetes risk.</p>
                <div class="simulator">
                    <h4>Dairy Choice</h4>
                    <div class="controls">
                        <button onclick="setDairy('lowfat')">Low-Fat Dairy</button>
                        <button onclick="setDairy('fullfat')">Full-Fat Dairy</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="dairy-fat">-</div><div class="stat-label">Saturated Fat</div></div>
                        <div class="stat-box"><div class="stat-value" id="dairy-diabetes">-</div><div class="stat-label">Diabetes Risk</div></div>
                        <div class="stat-box"><div class="stat-value" id="dairy-satiety">-</div><div class="stat-label">Satiety</div></div>
                    </div>
                    <div class="result" id="dairy-result"><p>Compare the health outcomes...</p></div>
                    <div class="insight">Low-fat products often add sugar. Fat isn't the villain we thought.</div>
                </div>
            </div>

            <!-- Elephant Brain Paradox -->
            <div class="paradox-card">
                <h3>Elephant Brain Paradox <span class="points">5 pts</span></h3>
                <p class="description">Elephants have 3x more neurons than humans. Why aren't they smarter? Their neurons are mostly in the cerebellum, not the cortex.</p>
                <div class="simulator">
                    <h4>Brain Comparison</h4>
                    <div class="controls">
                        <button onclick="setBrain('human')">Human Brain</button>
                        <button onclick="setBrain('elephant')">Elephant Brain</button>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-box"><div class="stat-value" id="brain-neurons">-</div><div class="stat-label">Total Neurons</div></div>
                        <div class="stat-box"><div class="stat-value" id="brain-cortex">-</div><div class="stat-label">Cortical Neurons</div></div>
                        <div class="stat-box"><div class="stat-value" id="brain-iq">-</div><div class="stat-label">Cognitive Ability</div></div>
                    </div>
                    <div class="result" id="brain-result"><p>Compare brain structure...</p></div>
                    <div class="insight">It's not total neurons but WHERE they are. The cortex is the thinking part.</div>
                </div>
            </div>
        </section>

        <script>
            // Sleeping Beauty
            function runSleepingBeauty() {
                document.getElementById('sb-result').innerHTML = `
                    <p><strong>Coin is:</strong> ${Math.random() > 0.5 ? 'HEADS (1 awakening)' : 'TAILS (2 awakenings)'}</p>
                    <p>When asked "What's P(Heads)?", what should Beauty say?</p>
                `;
            }
            function setSBView(view) {
                const text = view === 'halfer' ?
                    '<p style="color: var(--primary);"><strong>Halfer view:</strong> The coin was 50/50. Being woken doesn\'t change that. P(Heads) = 1/2</p>' :
                    '<p style="color: var(--secondary);"><strong>Thirder view:</strong> There are 3 possible awakenings, only 1 is Heads. P(Heads) = 1/3</p>';
                document.getElementById('sb-result').innerHTML = text;
            }

            // Unexpected Hanging
            let hangStep = 0;
            function reasonHanging() {
                hangStep++;
                const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
                const container = document.getElementById('hanging-days');
                const result = document.getElementById('hanging-result');

                if (hangStep <= 5) {
                    const day = 5 - hangStep;
                    container.children[day].style.textDecoration = 'line-through';
                    container.children[day].style.opacity = '0.3';
                    result.innerHTML = `<p>Can't be ${days[day]} - if we reach ${day > 0 ? days[day-1] : 'Sunday'} night, it wouldn't be a surprise!</p>`;
                }
                if (hangStep === 5) {
                    result.innerHTML += '<p style="color: var(--accent);">But then... Wednesday morning, they hang him. SURPRISE! The paradox resolved itself!</p>';
                }
            }
            function resetHanging() {
                hangStep = 0;
                const container = document.getElementById('hanging-days');
                for (let i = 0; i < 5; i++) {
                    container.children[i].style.textDecoration = 'none';
                    container.children[i].style.opacity = '1';
                }
                document.getElementById('hanging-result').innerHTML = '<p>Can Friday be the day? Can Thursday? Keep eliminating...</p>';
            }

            // Paradox of Choice
            function updateChoice() {
                const n = parseInt(document.getElementById('choice-n').value);
                document.getElementById('choice-val').textContent = n;
                const interest = Math.min(90, 30 + n * 2);
                const buy = n > 20 ? 3 : n > 10 ? 10 : 30;
                const happy = n > 20 ? 'Low' : n > 10 ? 'Medium' : 'High';
                document.getElementById('choice-interest').textContent = interest + '%';
                document.getElementById('choice-buy').textContent = buy + '%';
                document.getElementById('choice-happy').textContent = happy;
            }

            // Willpower Paradox
            function setWillpower(type) {
                if (type === 'resist') {
                    document.getElementById('will-used').textContent = 'High';
                    document.getElementById('will-success').textContent = '60%';
                    document.getElementById('will-result').innerHTML = '<p>Constantly fighting temptation depletes willpower. You often fail.</p>';
                } else {
                    document.getElementById('will-used').textContent = 'Low';
                    document.getElementById('will-success').textContent = '90%';
                    document.getElementById('will-result').innerHTML = '<p style="color: var(--accent);">No cookies in the house = no willpower needed!</p>';
                }
            }

            // Paradox of Hedonism
            function setHedonism(type) {
                if (type === 'direct') {
                    document.getElementById('hed-effort').textContent = '100%';
                    document.getElementById('hed-happy').textContent = '😔 30%';
                    document.getElementById('hed-result').innerHTML = '<p>Chasing happiness directly often leads to disappointment and hedonic treadmill.</p>';
                } else {
                    document.getElementById('hed-effort').textContent = '70%';
                    document.getElementById('hed-happy').textContent = '😊 80%';
                    document.getElementById('hed-result').innerHTML = '<p style="color: var(--accent);">Pursuing meaning, relationships, and growth - happiness follows as a byproduct!</p>';
                }
            }

            // Dating App Paradox
            function updateDating() {
                const n = parseInt(document.getElementById('date-n').value);
                document.getElementById('date-val').textContent = n;
                const commit = n > 500 ? 'Very Low' : n > 100 ? 'Low' : n > 20 ? 'Medium' : 'High';
                const satisfy = n > 500 ? 'Very Low' : n > 100 ? 'Low' : n > 20 ? 'Medium' : 'High';
                document.getElementById('date-commit').textContent = commit;
                document.getElementById('date-satisfy').textContent = satisfy;
                document.getElementById('date-result').innerHTML = n > 100 ?
                    '<p style="color: #ef4444;">Too many options! Always wondering if someone better is a swipe away...</p>' :
                    '<p>Manageable pool leads to genuine connection.</p>';
            }

            // Violence Paradox
            function updateViolence() {
                const era = document.getElementById('violence-era').value;
                const data = {
                    tribal: { rate: '15%', feel: 'Normal' },
                    medieval: { rate: '3%', feel: 'Normal' },
                    1900: { rate: '1.5%', feel: 'Concerning' },
                    now: { rate: '0.7%', feel: 'High (news!)' }
                };
                const d = data[era];
                document.getElementById('viol-rate').textContent = d.rate;
                document.getElementById('viol-feel').textContent = d.feel;
            }

            // Sorites Paradox
            function updateSorites() {
                const n = parseInt(document.getElementById('sorites-n').value);
                document.getElementById('sorites-val').textContent = n;
                document.getElementById('sorites-grains').textContent = n;
                let status, result;
                if (n >= 500) {
                    status = '🏔️ Heap';
                    result = '<p>Clearly a heap with ' + n + ' grains.</p>';
                } else if (n >= 100) {
                    status = '🤔 Heap?';
                    result = '<p>Getting smaller... but still probably a heap?</p>';
                } else if (n >= 20) {
                    status = '❓ Pile?';
                    result = '<p style="color: var(--accent);">Is this a heap or just a pile?</p>';
                } else if (n >= 5) {
                    status = '🤷 Few grains';
                    result = '<p style="color: var(--accent);">Surely not a heap anymore... but when did it stop?</p>';
                } else {
                    status = '❌ Not a heap';
                    result = '<p>Definitely not a heap. But which removal made the difference?</p>';
                }
                document.getElementById('sorites-status').textContent = status;
                document.getElementById('sorites-result').innerHTML = result;
            }

            // Dome Paradox
            let domeAnimating = false;
            function drawDome(ballX) {
                const canvas = document.getElementById('dome-canvas');
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // Draw dome
                ctx.strokeStyle = '#6366f1';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(50, 180);
                ctx.quadraticCurveTo(150, 30, 250, 180);
                ctx.stroke();
                // Draw ball
                const ballY = 50 + (ballX - 150) * (ballX - 150) / 200;
                ctx.fillStyle = '#f59e0b';
                ctx.beginPath();
                ctx.arc(ballX, ballY, 12, 0, Math.PI * 2);
                ctx.fill();
            }
            function startDome() {
                if (domeAnimating) return;
                domeAnimating = true;
                document.getElementById('dome-result').innerHTML = '<p>Waiting... at any moment T ≥ 0, the ball may spontaneously move...</p>';
                let wait = Math.random() * 3000 + 1000;
                setTimeout(() => {
                    let ballX = 150;
                    function animate() {
                        if (ballX < 250) {
                            ballX += 2;
                            drawDome(ballX);
                            requestAnimationFrame(animate);
                        } else {
                            domeAnimating = false;
                            document.getElementById('dome-result').innerHTML = '<p style="color: var(--accent);">The ball moved! But nothing caused it - this is allowed by Newton\'s equations!</p>';
                        }
                    }
                    animate();
                }, wait);
            }
            function resetDome() {
                domeAnimating = false;
                drawDome(150);
                document.getElementById('dome-result').innerHTML = '<p>The ball is perfectly balanced at the apex...</p>';
            }
            // Initialize dome
            setTimeout(() => drawDome(150), 100);

            // Bootstrap Paradox
            function runBootstrap() {
                const steps = ['boot-you', 'boot-past', 'boot-future'];
                let i = 0;
                function highlight() {
                    steps.forEach(s => document.getElementById(s).style.background = s === 'boot-you' ? 'var(--primary)' : 'var(--card)');
                    if (i < steps.length) {
                        document.getElementById(steps[i]).style.background = 'var(--accent)';
                        i++;
                        setTimeout(highlight, 800);
                    } else {
                        document.getElementById('boot-result').innerHTML = '<p style="color: var(--accent);">The symphony has no origin! It exists only in the loop. Who composed it? Nobody - and everybody.</p>';
                        // Loop back
                        setTimeout(() => {
                            steps.forEach(s => document.getElementById(s).style.background = s === 'boot-you' ? 'var(--primary)' : 'var(--card)');
                        }, 2000);
                    }
                }
                highlight();
            }

            // Bonini's Paradox
            function updateBonini() {
                const n = parseInt(document.getElementById('bonini-n').value);
                document.getElementById('bonini-val').textContent = n + '%';
                let accuracy, understand, result;
                if (n < 30) {
                    accuracy = 'Low'; understand = 'High';
                    result = '<p>Simple model: easy to understand but misses important details.</p>';
                } else if (n < 70) {
                    accuracy = 'Medium'; understand = 'Medium';
                    result = '<p>Balanced model: useful approximation with manageable complexity.</p>';
                } else if (n < 90) {
                    accuracy = 'High'; understand = 'Low';
                    result = '<p style="color: var(--accent);">Complex model: accurate but hard to interpret or debug.</p>';
                } else {
                    accuracy = 'Perfect'; understand = 'None';
                    result = '<p style="color: #ef4444;">Perfect model: as complex as reality itself - useless for understanding!</p>';
                }
                document.getElementById('bonini-accuracy').textContent = accuracy;
                document.getElementById('bonini-understand').textContent = understand;
                document.getElementById('bonini-result').innerHTML = result;
            }

            // Polanyi's Paradox
            function setPolanyi(skill) {
                const data = {
                    bike: { human: 'Easy', explain: 'Very Hard', automate: 'Very Hard', text: 'You can ride a bike, but can you explain the micro-adjustments for balance? This tacit knowledge took evolution millions of years to develop.' },
                    face: { human: 'Instant', explain: 'Impossible', automate: 'Hard (until DL)', text: 'You recognize thousands of faces effortlessly but cannot articulate how. Deep learning finally cracked this by learning implicitly, like humans.' },
                    chess: { human: 'Hard', explain: 'Possible', automate: 'Easy', text: 'Chess has explicit rules. We can explain strategy. Computers mastered it in the 1990s because the knowledge is formalizable.' }
                };
                const d = data[skill];
                document.getElementById('pol-human').textContent = d.human;
                document.getElementById('pol-explain').textContent = d.explain;
                document.getElementById('pol-automate').textContent = d.automate;
                document.getElementById('pol-result').innerHTML = '<p>' + d.text + '</p>';
            }

            // Grelling-Nelson Paradox
            function classifyWord(word) {
                document.getElementById('grell-word').textContent = word;
                if (word === 'short') {
                    document.getElementById('grell-type').textContent = 'Autological ✓';
                    document.getElementById('grell-result').innerHTML = '<p>"Short" is a short word - it describes itself!</p>';
                } else if (word === 'long') {
                    document.getElementById('grell-type').textContent = 'Heterological';
                    document.getElementById('grell-result').innerHTML = '<p>"Long" is not a long word - it doesn\'t describe itself.</p>';
                } else if (word === 'english') {
                    document.getElementById('grell-type').textContent = 'Autological ✓';
                    document.getElementById('grell-result').innerHTML = '<p>"English" is an English word - it describes itself!</p>';
                } else {
                    document.getElementById('grell-type').textContent = '⚠️ PARADOX';
                    document.getElementById('grell-result').innerHTML = '<p style="color: var(--accent);">If "heterological" IS heterological, then it describes itself, so it\'s autological.<br>If it\'s NOT heterological, then it doesn\'t describe itself, so it IS heterological.<br><strong>Contradiction!</strong></p>';
                }
            }

            // Curry's Paradox
            function runCurry(claim) {
                const claims = { santa: 'Santa Claus exists', unicorn: 'Unicorns are real', anything: 'literally anything you want' };
                const c = claims[claim];
                document.getElementById('curry-result').innerHTML = `
                    <p>Let S = "If S is true, then <strong>${c}</strong>"</p>
                    <p>Step 1: Assume S is true</p>
                    <p>Step 2: Then by S's definition, ${c}</p>
                    <p>Step 3: We've proven "If S is true, then ${c}"</p>
                    <p>Step 4: But that's exactly what S says! So S is true.</p>
                    <p style="color: var(--accent);">Step 5: Therefore <strong>${c}</strong>! 🤯</p>
                `;
            }

            // Berry Paradox
            function updateBerry() {
                const n = parseInt(document.getElementById('berry-n').value);
                document.getElementById('berry-val').textContent = n;
                const phrase = `the smallest integer not definable in under ${n} letters`;
                const len = phrase.replace(/\s/g, '').length;
                document.getElementById('berry-phrase').textContent = len;
                if (len < n) {
                    document.getElementById('berry-status').textContent = '⚠️ Paradox!';
                    document.getElementById('berry-result').innerHTML = `<p style="color: var(--accent);">The phrase "${phrase}" has only ${len} letters but defines a number that supposedly can't be defined in under ${n} letters!</p>`;
                } else {
                    document.getElementById('berry-status').textContent = '✓ No paradox';
                    document.getElementById('berry-result').innerHTML = `<p>The phrase has ${len} letters, which is ≥ ${n}, so no paradox occurs at this threshold.</p>`;
                }
            }

            // Allais Paradox
            let allaisChoices = { c1: null, c2: null };
            function setAllais(choice, option) {
                if (choice === 1) {
                    allaisChoices.c1 = option;
                    document.getElementById('allais-c1').textContent = option;
                } else {
                    allaisChoices.c2 = option;
                    document.getElementById('allais-c2').textContent = option;
                }
                if (allaisChoices.c1 && allaisChoices.c2) {
                    if (allaisChoices.c1 === 'A' && allaisChoices.c2 === 'D') {
                        document.getElementById('allais-result').innerHTML = '<p style="color: var(--accent);">You chose A and D - the most common pattern! But this violates expected utility theory. The certainty of A shouldn\'t change your risk preference in Choice 2.</p>';
                    } else if (allaisChoices.c1 === 'A' && allaisChoices.c2 === 'C') {
                        document.getElementById('allais-result').innerHTML = '<p style="color: var(--primary);">Consistent risk-averse choices. You value certainty highly throughout.</p>';
                    } else if (allaisChoices.c1 === 'B' && allaisChoices.c2 === 'D') {
                        document.getElementById('allais-result').innerHTML = '<p style="color: var(--primary);">Consistent risk-seeking choices. You go for higher expected value.</p>';
                    } else {
                        document.getElementById('allais-result').innerHTML = '<p>Interesting choice combination! This is less common.</p>';
                    }
                }
            }

            // Inventor's Paradox
            function setInventor(type) {
                if (type === 'specific') {
                    document.getElementById('inv-scope').textContent = 'Narrow';
                    document.getElementById('inv-ease').textContent = 'Hard';
                    document.getElementById('inv-insight').textContent = 'Limited';
                    document.getElementById('inv-result').innerHTML = '<p>Specific problem: "Find the sum 1+2+...+100"<br>Approach: Add each number one by one.<br>Result: Tedious, error-prone, no generalizable insight.</p>';
                } else {
                    document.getElementById('inv-scope').textContent = 'Broad';
                    document.getElementById('inv-ease').textContent = 'Easier!';
                    document.getElementById('inv-insight').textContent = 'Deep';
                    document.getElementById('inv-result').innerHTML = '<p style="color: var(--accent);">General problem: "Find the sum 1+2+...+n"<br>Approach: Pair first and last: (1+n) + (2+n-1) + ... = n(n+1)/2<br>Result: Elegant formula works for ANY n!</p>';
                }
            }

            // Drinker Paradox
            function setDrinker(scenario) {
                const scenes = {
                    all: { emoji: '🍺🍺🍺🍺', person: 'Anyone!', text: 'If everyone is drinking, pick anyone. "If they drink, everyone drinks" is trivially true.' },
                    some: { emoji: '🍺🚫🍺🚫', person: 'Non-drinker', text: 'Pick someone NOT drinking. "If they drink (false), everyone drinks" is vacuously true! False implies anything.' },
                    none: { emoji: '🚫🚫🚫🚫', person: 'Anyone!', text: 'Pick anyone. "If they drink (false), everyone drinks" is vacuously true for everyone.' },
                    empty: { emoji: '🏚️', person: 'Vacuously', text: 'Empty pub: the statement is vacuously true because there\'s no counterexample possible!' }
                };
                const s = scenes[scenario];
                document.getElementById('drink-scene').textContent = s.emoji;
                document.getElementById('drink-person').textContent = s.person;
                document.getElementById('drink-result').innerHTML = '<p>' + s.text + '</p>';
            }

            // Commuting Paradox
            function updateCommute() {
                const n = parseInt(document.getElementById('commute-n').value);
                document.getElementById('commute-val').textContent = n;
                const yearHrs = Math.round(n * 2 * 260 / 60);
                const salary = n > 60 ? '+$15K' : n > 30 ? '+$8K' : n > 0 ? '+$3K' : '$0';
                let happy;
                if (n === 0) happy = '😊 Great';
                else if (n <= 20) happy = '🙂 Good';
                else if (n <= 40) happy = '😐 Okay';
                else if (n <= 60) happy = '😕 Lower';
                else happy = '😩 Poor';
                document.getElementById('comm-year').textContent = yearHrs + ' hrs';
                document.getElementById('comm-salary').textContent = salary;
                document.getElementById('comm-happy').textContent = happy;
                document.getElementById('commute-result').innerHTML = n > 45 ?
                    '<p style="color: #ef4444;">Long commutes are linked to higher divorce rates, obesity, and depression. The salary rarely compensates.</p>' :
                    '<p>Research shows commuting is the activity that makes people least happy.</p>';
            }

            // Free-Time Paradox
            function setFreeTime(level) {
                const data = {
                    low: { actual: '38 hrs/week', feel: 'Very Busy', text: 'Low-income workers often have multiple jobs or unpredictable schedules. Despite "more" free hours, they feel constantly rushed and stressed.' },
                    mid: { actual: '35 hrs/week', feel: 'Busy', text: 'Middle class juggles work, family, and aspirational activities. Free time becomes another thing to optimize.' },
                    high: { actual: '30 hrs/week', feel: 'Moderate', text: 'High earners work longer but report less time pressure. Why? Status. "Being busy" is a choice that signals importance.' }
                };
                const d = data[level];
                document.getElementById('ft-actual').textContent = d.actual;
                document.getElementById('ft-feel').textContent = d.feel;
                document.getElementById('ft-result').innerHTML = '<p>' + d.text + '</p>';
            }

            // Eligible Bachelor Paradox
            function runBachelor() {
                const pool = document.getElementById('bach-pool');
                const taken = document.getElementById('bach-taken');
                pool.textContent = '👤👤👤👤👤👤👤👤';
                taken.textContent = '';
                let remaining = 8;
                const interval = setInterval(() => {
                    if (remaining > 2) {
                        remaining -= 2;
                        pool.textContent = '👤'.repeat(remaining);
                        taken.textContent += '💑';
                    } else {
                        clearInterval(interval);
                        pool.textContent = '👤👤';
                        document.getElementById('bach-result').innerHTML = '<p style="color: var(--accent);">The best matches paired quickly. What remains in the pool are the harder-to-match individuals. It\'s not you - it\'s mathematics!</p>';
                    }
                }, 600);
            }

            // Deming Paradox
            function updateDeming() {
                const n = parseInt(document.getElementById('deming-n').value);
                document.getElementById('deming-val').textContent = n + '%';
                let eff, pleasant, result;
                if (n < 30) {
                    eff = 'Low'; pleasant = 'High';
                    result = '<p>Relaxed culture: pleasant to work but may lack competitive edge.</p>';
                } else if (n < 60) {
                    eff = 'Medium'; pleasant = 'Medium';
                    result = '<p>Balanced approach: reasonable efficiency with acceptable culture.</p>';
                } else if (n < 85) {
                    eff = 'High'; pleasant = 'Low';
                    result = '<p style="color: var(--accent);">High-performance culture: great results but high turnover and burnout risk.</p>';
                } else {
                    eff = 'Very High'; pleasant = 'Very Low';
                    result = '<p style="color: #ef4444;">Extreme rigor: ruthlessly efficient but often described as "brutal" or "cult-like."</p>';
                }
                document.getElementById('dem-efficiency').textContent = eff;
                document.getElementById('dem-pleasant').textContent = pleasant;
                document.getElementById('deming-result').innerHTML = result;
            }

            // Karl Popper Paradox
            function setPopper(choice) {
                if (choice === 'tolerate') {
                    document.getElementById('pop-action').textContent = 'Allow all';
                    document.getElementById('pop-outcome').textContent = '❌ Loss';
                    document.getElementById('popper-result').innerHTML = '<p style="color: #ef4444;">If we extend unlimited tolerance to those who are intolerant, they will eventually destroy tolerance. The tolerant will be dominated by the intolerant.</p>';
                } else {
                    document.getElementById('pop-action').textContent = 'Set limits';
                    document.getElementById('pop-outcome').textContent = '✓ Preserved';
                    document.getElementById('popper-result').innerHTML = '<p style="color: var(--accent);">A tolerant society must be intolerant of intolerance - not through suppression of speech, but by refusing to engage with intolerant arguments in good faith.</p>';
                }
            }

            // Clothesline Paradox
            function setClothesline(method) {
                if (method === 'dryer') {
                    document.getElementById('cloth-energy').textContent = '3 kWh';
                    document.getElementById('cloth-gdp').textContent = '+$0.40';
                    document.getElementById('cloth-env').textContent = '🏭 CO2';
                    document.getElementById('clothesline-result').innerHTML = '<p>Using electricity adds to GDP! The economy "grows" from this consumption.</p>';
                } else {
                    document.getElementById('cloth-energy').textContent = '0 kWh';
                    document.getElementById('cloth-gdp').textContent = '$0';
                    document.getElementById('cloth-env').textContent = '🌱 Clean';
                    document.getElementById('clothesline-result').innerHTML = '<p style="color: var(--accent);">Zero energy, zero GDP contribution. Economists see this as "non-productive" activity despite being better for everyone!</p>';
                }
            }

            // Obesity-Hunger Paradox
            function updateFood() {
                const n = parseInt(document.getElementById('food-n').value);
                document.getElementById('food-val').textContent = n;
                let cal, nut, health, result;
                if (n < 5) {
                    cal = 'Variable'; nut = 'Very Low'; health = 'Poor';
                    result = '<p style="color: #ef4444;">Food insecurity forces calorie maximization. Fast food and processed foods are cheapest per calorie.</p>';
                } else if (n < 10) {
                    cal = 'High'; nut = 'Low'; health = 'Fair';
                    result = '<p style="color: var(--accent);">Can afford calories but not nutrition. The "food desert" problem: cheap food is unhealthy.</p>';
                } else if (n < 20) {
                    cal = 'Adequate'; nut = 'Medium'; health = 'Good';
                    result = '<p>Budget allows for some fresh food and variety.</p>';
                } else {
                    cal = 'Abundant'; nut = 'High'; health = 'Excellent';
                    result = '<p>Full access to nutritious foods, organic options, and variety.</p>';
                }
                document.getElementById('food-cal').textContent = cal;
                document.getElementById('food-nut').textContent = nut;
                document.getElementById('food-health').textContent = health;
                document.getElementById('food-result').innerHTML = result;
            }

            // Low Birth-Weight Paradox
            function setBirthWeight(type) {
                document.getElementById('bw-weight').textContent = 'Low';
                if (type === 'smoker') {
                    document.getElementById('bw-survival').textContent = '95%';
                    document.getElementById('bw-result').innerHTML = '<p style="color: var(--accent);">Paradoxically higher survival! Why? Smoking CAUSES low birth weight, but the babies are otherwise healthy. It\'s a "known cause."</p>';
                } else {
                    document.getElementById('bw-survival').textContent = '88%';
                    document.getElementById('bw-result').innerHTML = '<p>Lower survival among non-smoker low-weight babies because their low weight is caused by something MORE serious - genetic issues, placental problems, etc.</p>';
                }
            }

            // Full-Fat Paradox
            function setDairy(type) {
                if (type === 'lowfat') {
                    document.getElementById('dairy-fat').textContent = 'Low';
                    document.getElementById('dairy-diabetes').textContent = 'Higher';
                    document.getElementById('dairy-satiety').textContent = 'Lower';
                    document.getElementById('dairy-result').innerHTML = '<p>Low-fat dairy removes fat but often adds sugar. You eat more because you\'re less satisfied, and the sugar spikes insulin.</p>';
                } else {
                    document.getElementById('dairy-fat').textContent = 'High';
                    document.getElementById('dairy-diabetes').textContent = 'Lower!';
                    document.getElementById('dairy-satiety').textContent = 'Higher';
                    document.getElementById('dairy-result').innerHTML = '<p style="color: var(--accent);">Full-fat dairy provides better satiety, no added sugar, and fat-soluble vitamins. The 50-year "fat is bad" orthodoxy is being reconsidered.</p>';
                }
            }

            // Elephant Brain Paradox
            function setBrain(species) {
                if (species === 'human') {
                    document.getElementById('brain-neurons').textContent = '86B';
                    document.getElementById('brain-cortex').textContent = '16B';
                    document.getElementById('brain-iq').textContent = 'Highest';
                    document.getElementById('brain-result').innerHTML = '<p style="color: var(--primary);">Human brains pack 16 billion neurons into the cerebral cortex - the thinking part. This density enables abstract reasoning, language, and technology.</p>';
                } else {
                    document.getElementById('brain-neurons').textContent = '257B';
                    document.getElementById('brain-cortex').textContent = '5.6B';
                    document.getElementById('brain-iq').textContent = 'High but...';
                    document.getElementById('brain-result').innerHTML = '<p style="color: var(--accent);">Elephants have 3x more total neurons but only 1/3 the cortical neurons of humans. Most neurons are in the cerebellum for motor control of their trunk (40,000+ muscles!).</p>';
                }
            }
        </script>

        <!-- All Paradoxes By Points View -->
        <section id="all-paradoxes">
            <h2 class="category-title">All Paradoxes by Points</h2>
            <div id="sorted-paradoxes-container"></div>
        </section>

        <!-- Sorting Functionality -->
        <script>
            // Sort by Points Functionality
            let currentView = 'categories';

            function getPointsFromCard(card) {
                const pointsSpan = card.querySelector('.points');
                if (pointsSpan) {
                    const text = pointsSpan.textContent;
                    const match = text.match(/(\d+)/);
                    return match ? parseInt(match[1]) : 0;
                }
                return 0;
            }

            function getCardTitle(card) {
                const h3 = card.querySelector('h3');
                if (h3) {
                    return h3.childNodes[0].textContent.trim();
                }
                return 'Unknown';
            }

            function showCategories() {
                currentView = 'categories';
                document.getElementById('view-categories').classList.add('active');
                document.getElementById('view-points').classList.remove('active');
                document.getElementById('sort-order').style.display = 'none';

                // Show all sections, hide all-paradoxes
                document.querySelectorAll('main > section:not(#all-paradoxes)').forEach(s => s.style.display = '');
                document.getElementById('all-paradoxes').style.display = 'none';
            }

            function showByPoints() {
                currentView = 'points';
                document.getElementById('view-categories').classList.remove('active');
                document.getElementById('view-points').classList.add('active');
                document.getElementById('sort-order').style.display = 'inline-block';

                // Hide all sections, show all-paradoxes
                document.querySelectorAll('main > section:not(#all-paradoxes)').forEach(s => s.style.display = 'none');
                document.getElementById('all-paradoxes').style.display = 'block';

                buildSortedView();
            }

            function buildSortedView() {
                const container = document.getElementById('sorted-paradoxes-container');
                const sortOrder = document.getElementById('sort-order').value;

                // Gather all paradox cards with their data
                const cards = [];
                document.querySelectorAll('main > section:not(#all-paradoxes) .paradox-card').forEach((card, idx) => {
                    // Give each card a unique ID if it doesn't have one
                    if (!card.id) {
                        card.id = 'paradox-card-' + idx;
                    }
                    cards.push({
                        element: card,
                        id: card.id,
                        points: getPointsFromCard(card),
                        title: getCardTitle(card),
                        description: card.querySelector('.description')?.textContent || ''
                    });
                });

                // Sort by points
                cards.sort((a, b) => {
                    if (sortOrder === 'desc') {
                        return b.points - a.points;
                    } else {
                        return a.points - b.points;
                    }
                });

                // Build the sorted view as a list with links
                container.innerHTML = '';
                cards.forEach((cardData, index) => {
                    const item = document.createElement('div');
                    item.className = 'sorted-item';
                    item.style.cssText = `
                        background: var(--card);
                        border-radius: 0.75rem;
                        padding: 1.25rem;
                        margin-bottom: 1rem;
                        display: flex;
                        align-items: center;
                        gap: 1rem;
                        cursor: pointer;
                        transition: all 0.2s;
                        border: 2px solid transparent;
                    `;
                    item.onmouseover = () => item.style.borderColor = 'var(--primary)';
                    item.onmouseout = () => item.style.borderColor = 'transparent';
                    item.onclick = () => scrollToCard(cardData.id);

                    item.innerHTML = `
                        <div style="
                            background: var(--primary);
                            color: white;
                            width: 45px;
                            height: 45px;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: bold;
                            font-size: 1rem;
                            flex-shrink: 0;
                        ">#${index + 1}</div>
                        <div style="flex: 1; min-width: 0;">
                            <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.25rem;">
                                <span style="font-weight: bold; color: var(--text); font-size: 1.1rem;">${cardData.title}</span>
                                <span style="background: var(--accent); color: var(--bg); padding: 0.2rem 0.6rem; border-radius: 9999px; font-size: 0.8rem; font-weight: bold;">${cardData.points} pts</span>
                            </div>
                            <p style="color: var(--muted); font-size: 0.875rem; margin: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${cardData.description}</p>
                        </div>
                        <div style="color: var(--primary); font-size: 1.5rem;">→</div>
                    `;

                    container.appendChild(item);
                });
            }

            function scrollToCard(cardId) {
                // Switch to category view and scroll to the card
                showCategories();
                setTimeout(() => {
                    const card = document.getElementById(cardId);
                    if (card) {
                        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        // Highlight briefly
                        card.style.boxShadow = '0 0 0 3px var(--accent)';
                        setTimeout(() => {
                            card.style.boxShadow = '';
                        }, 2000);
                    }
                }, 100);
            }

            function updatePointsSort() {
                if (currentView === 'points') {
                    buildSortedView();
                }
            }

            // Initialize view
            window.addEventListener('load', () => {
                showCategories();
                // Update paradox count
                const count = document.querySelectorAll('main > section:not(#all-paradoxes) .paradox-card').length;
                document.getElementById('paradox-count').textContent = count + ' Paradoxes';
            });
        </script>
    </main>
</body>
</html>
